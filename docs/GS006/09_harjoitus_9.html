<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="10 HARJOITUS 2.2: KARTTATIILIPALVELUT | Johdanto GeoServerin käyttöön" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Oy" />

<meta name="date" content="2023-12-18" />


<meta name="description" content="10 HARJOITUS 2.2: KARTTATIILIPALVELUT | Johdanto GeoServerin käyttöön">

<title>10 HARJOITUS 2.2: KARTTATIILIPALVELUT | Johdanto GeoServerin käyttöön</title>




<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Johdanto GeoServerin käyttöön</h1></div>
<div class="abstract-sidebar"><p>Johdantokurssi GeoServerin käyttöön.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li class="has-sub"><a href="index.html#johdanto-geoserverin-käyttöön"><span class="toc-section-number">1</span> JOHDANTO GEOSERVERIN KÄYTTÖÖN</a>
<ul>
<li><a href="index.html#tervetuloa-geoserver-kurssille"><span class="toc-section-number">1.1</span> Tervetuloa GeoServer-kurssille!</a></li>
<li><a href="index.html#geoserverin-taustaa"><span class="toc-section-number">1.2</span> GeoServerin taustaa</a></li>
<li><a href="index.html#lukuohje"><span class="toc-section-number">1.3</span> Lukuohje</a></li>
<li><a href="index.html#mistä-lisätietoja"><span class="toc-section-number">1.4</span> Mistä lisätietoja?</a></li>
<li><a href="index.html#virheet"><span class="toc-section-number">1.5</span> Virheet</a></li>
<li><a href="index.html#lisenssi-ja-oikeudet"><span class="toc-section-number">1.6</span> Lisenssi ja oikeudet</a></li>
</ul></li>
<li class="has-sub"><a href="01_harjoitus_1.html#harjoitus-1.1-asennus-ja-käyttöönotto"><span class="toc-section-number">2</span> HARJOITUS 1.1: ASENNUS JA KÄYTTÖÖNOTTO</a>
<ul>
<li><a href="01_harjoitus_1.html#valmistautuminen"><span class="toc-section-number">2.1</span> <strong>Valmistautuminen</strong></a></li>
<li class="has-sub"><a href="01_harjoitus_1.html#päävalikko"><span class="toc-section-number">2.2</span> <strong>Päävalikko</strong></a>
<ul>
<li><a href="01_harjoitus_1.html#about-geoserver"><span class="toc-section-number">2.2.1</span> <strong>About GeoServer</strong></a></li>
<li><a href="01_harjoitus_1.html#layer-preview"><span class="toc-section-number">2.2.2</span> <strong>Layer Preview</strong></a></li>
<li><a href="01_harjoitus_1.html#service-capabilities-palvelutoiminnallisuudet"><span class="toc-section-number">2.2.3</span> <strong>Service Capabilities (palvelutoiminnallisuudet)</strong></a></li>
<li><a href="01_harjoitus_1.html#demos"><span class="toc-section-number">2.2.4</span> <strong>Demos</strong></a></li>
<li><a href="01_harjoitus_1.html#demo-requests"><span class="toc-section-number">2.2.5</span> <strong>Demo requests</strong></a></li>
</ul></li>
<li><a href="01_harjoitus_1.html#srs-list-ja-reprojection-console"><span class="toc-section-number">2.3</span> <strong>SRS List ja Reprojection console</strong></a></li>
<li><a href="01_harjoitus_1.html#wcs-request-builder"><span class="toc-section-number">2.4</span> <strong>WCS request builder</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#harjoitus-1.2-geoserverin-web-käyttöliittymä"><span class="toc-section-number">3</span> HARJOITUS 1.2: GEOSERVERIN WEB-KÄYTTÖLIITTYMÄ</a>
<ul>
<li><a href="02_harjoitus_2.html#valmistautuminen-1"><span class="toc-section-number">3.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="02_harjoitus_2.html#ylläpitäjän-käyttöliittymä"><span class="toc-section-number">3.2</span> <strong>Ylläpitäjän käyttöliittymä</strong></a></li>
<li><a href="02_harjoitus_2.html#master--ja-administrator-käyttäjät"><span class="toc-section-number">3.3</span> <strong>Master- ja Administrator-käyttäjät</strong></a></li>
<li class="has-sub"><a href="02_harjoitus_2.html#about-status--asetukset"><span class="toc-section-number">3.4</span> <strong>About &amp; Status -asetukset</strong></a>
<ul>
<li><a href="02_harjoitus_2.html#contact-information"><span class="toc-section-number">3.4.1</span> <strong>Contact Information</strong></a></li>
<li><a href="02_harjoitus_2.html#server-status"><span class="toc-section-number">3.4.2</span> <strong>Server Status</strong></a></li>
<li><a href="02_harjoitus_2.html#geoserver-logs"><span class="toc-section-number">3.4.3</span> <strong>GeoServer Logs</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#data-valikko"><span class="toc-section-number">3.5</span> <strong>Data-valikko</strong></a>
<ul>
<li><a href="02_harjoitus_2.html#layer-preview-1"><span class="toc-section-number">3.5.1</span> <strong>Layer Preview</strong></a></li>
<li><a href="02_harjoitus_2.html#workspaces"><span class="toc-section-number">3.5.2</span> <strong>Workspaces</strong></a></li>
<li><a href="02_harjoitus_2.html#stores"><span class="toc-section-number">3.5.3</span> <strong>Stores</strong></a></li>
<li><a href="02_harjoitus_2.html#layers"><span class="toc-section-number">3.5.4</span> <strong>Layers</strong></a></li>
</ul></li>
<li><a href="02_harjoitus_2.html#layer-groups"><span class="toc-section-number">3.6</span> <strong>Layer Groups</strong></a></li>
<li><a href="02_harjoitus_2.html#styles"><span class="toc-section-number">3.7</span> <strong>Styles</strong></a></li>
<li><a href="02_harjoitus_2.html#services-1"><span class="toc-section-number">3.8</span> <strong>Services</strong></a></li>
<li><a href="02_harjoitus_2.html#settings"><span class="toc-section-number">3.9</span> <strong>Settings</strong></a></li>
<li><a href="02_harjoitus_2.html#tile-caching-1"><span class="toc-section-number">3.10</span> <strong>Tile Caching</strong></a></li>
<li><a href="02_harjoitus_2.html#security-1"><span class="toc-section-number">3.11</span> <strong>Security</strong></a></li>
</ul></li>
<li class="has-sub"><a href="03_harjoitus_3.html#harjoitus-1.3-vektoriaineistot"><span class="toc-section-number">4</span> Harjoitus 1.3: VEKTORIAINEISTOT</a>
<ul>
<li><a href="03_harjoitus_3.html#valmistautuminen-2"><span class="toc-section-number">4.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="03_harjoitus_3.html#vektoriaineisto-storen-luominen"><span class="toc-section-number">4.2</span> <strong>Vektoriaineisto Storen luominen</strong></a></li>
<li><a href="03_harjoitus_3.html#vektoritason-julkaiseminen"><span class="toc-section-number">4.3</span> <strong>Vektoritason julkaiseminen</strong></a></li>
<li class="has-sub"><a href="03_harjoitus_3.html#data-asetukset"><span class="toc-section-number">4.4</span> <strong>Data asetukset</strong></a>
<ul>
<li><a href="03_harjoitus_3.html#coordinate-reference-systems"><span class="toc-section-number">4.4.1</span> <strong>Coordinate Reference Systems</strong></a></li>
<li><a href="03_harjoitus_3.html#bounding-boxes"><span class="toc-section-number">4.4.2</span> <strong>Bounding Boxes</strong></a></li>
<li><a href="03_harjoitus_3.html#feature-type-details"><span class="toc-section-number">4.4.3</span> <strong>Feature Type Details</strong></a></li>
</ul></li>
<li><a href="03_harjoitus_3.html#helsingin-tiestön-lisääminen"><span class="toc-section-number">4.5</span> <strong>Helsingin tiestön lisääminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="04_harjoitus_4.html#harjoitus-1.4-kuvaustekniikan-perusteet-sld"><span class="toc-section-number">5</span> HARJOITUS 1.4: KUVAUSTEKNIIKAN PERUSTEET (SLD)</a>
<ul>
<li><a href="04_harjoitus_4.html#valmistautuminen-3"><span class="toc-section-number">5.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="04_harjoitus_4.html#geoserverin-kuvaustekniikka"><span class="toc-section-number">5.2</span> <strong>GeoServerin kuvaustekniikka</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikka"><span class="toc-section-number">5.3</span> <strong>SLD-kuvaustekniikka</strong></a></li>
<li><a href="04_harjoitus_4.html#uuden-tyylin-luominen"><span class="toc-section-number">5.4</span> <strong>Uuden tyylin luominen</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikan-käyttöönotto"><span class="toc-section-number">5.5</span> <strong>SLD-kuvaustekniikan käyttöönotto</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-cookbook"><span class="toc-section-number">5.6</span> <strong>SLD Cookbook</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikan-muokkaaminen"><span class="toc-section-number">5.7</span> <strong>SLD-kuvaustekniikan muokkaaminen</strong></a></li>
<li><a href="04_harjoitus_4.html#tiestön-tyylin-luominen"><span class="toc-section-number">5.8</span> <strong>Tiestön tyylin luominen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="05_harjoitus_5.html#harjoitus-1.5-wms--ja-wcs-palvelut"><span class="toc-section-number">6</span> HARJOITUS 1.5: WMS- JA WCS-PALVELUT</a>
<ul>
<li><a href="05_harjoitus_5.html#valmistautuminen-4"><span class="toc-section-number">6.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="05_harjoitus_5.html#ogc-standardit"><span class="toc-section-number">6.2</span> <strong>OGC-standardit</strong></a></li>
<li><a href="05_harjoitus_5.html#yleiset-karttapalveluasetukset"><span class="toc-section-number">6.3</span> <strong>Yleiset karttapalveluasetukset</strong></a></li>
<li><a href="05_harjoitus_5.html#wms"><span class="toc-section-number">6.4</span> <strong>WMS</strong></a></li>
<li><a href="05_harjoitus_5.html#workspace-kohtaiset-palvelimen-asetukset"><span class="toc-section-number">6.5</span> <strong>Workspace-kohtaiset palvelimen asetukset</strong></a></li>
<li><a href="05_harjoitus_5.html#wms-karttapalvelun-kuvan-dpi-resoluutio"><span class="toc-section-number">6.6</span> <strong>WMS-karttapalvelun kuvan DPI-resoluutio</strong></a></li>
<li><a href="05_harjoitus_5.html#wcs"><span class="toc-section-number">6.7</span> <strong>WCS</strong></a></li>
</ul></li>
<li class="has-sub"><a href="06_harjoitus_6.html#harjoitus-1.6-rasteriaineistot"><span class="toc-section-number">7</span> HARJOITUS 1.6: RASTERIAINEISTOT</a>
<ul>
<li><a href="06_harjoitus_6.html#valmistautuminen-5"><span class="toc-section-number">7.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="06_harjoitus_6.html#rasteriaineiston-lisääminen"><span class="toc-section-number">7.2</span> <strong>Rasteriaineiston lisääminen</strong></a></li>
<li><a href="06_harjoitus_6.html#ilmakuvan-lisääminen"><span class="toc-section-number">7.3</span> <strong>Ilmakuvan lisääminen</strong></a></li>
<li><a href="06_harjoitus_6.html#image-mosaic"><span class="toc-section-number">7.4</span> <strong>Image Mosaic</strong></a></li>
<li class="has-sub"><a href="06_harjoitus_6.html#layer-groups-1"><span class="toc-section-number">7.5</span> <strong>Layer Groups</strong></a>
<ul>
<li><a href="06_harjoitus_6.html#ryhmätasojen-julkaisemisen-muoto"><span class="toc-section-number">7.5.1</span> <strong>Ryhmätasojen julkaisemisen muoto</strong></a></li>
<li><a href="06_harjoitus_6.html#muiden-wms-palvelujen-hyödyntäminen-cascading-wms"><span class="toc-section-number">7.5.2</span> <strong>Muiden WMS-palvelujen hyödyntäminen (cascading WMS)</strong></a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="07_harjoitus_7.html#harjoitus-1.7-paikkatietokannat"><span class="toc-section-number">8</span> HARJOITUS 1.7: PAIKKATIETOKANNAT</a>
<ul>
<li><a href="07_harjoitus_7.html#valmistautuminen-6"><span class="toc-section-number">8.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="07_harjoitus_7.html#yhteyden-muodostaminen-paikkatietokantaan"><span class="toc-section-number">8.2</span> <strong>Yhteyden muodostaminen paikkatietokantaan</strong></a></li>
<li><a href="07_harjoitus_7.html#postgis-tason-lisääminen"><span class="toc-section-number">8.3</span> <strong>PostGIS-tason lisääminen</strong></a></li>
<li><a href="07_harjoitus_7.html#monikulmio--ja-viiva-tason-lisääminen-postgis-tietokannasta"><span class="toc-section-number">8.4</span> <strong>Monikulmio- ja viiva-tason lisääminen PostGIS-tietokannasta</strong></a></li>
<li><a href="07_harjoitus_7.html#tasojen-oletustyylien-asettaminen"><span class="toc-section-number">8.5</span> <strong>Tasojen oletustyylien asettaminen</strong></a></li>
<li><a href="07_harjoitus_7.html#sql-näkymät"><span class="toc-section-number">8.6</span> <strong>SQL-näkymät</strong></a></li>
<li><a href="07_harjoitus_7.html#paikkatietotoiminnot-sql-näkymien-kautta"><span class="toc-section-number">8.7</span> <strong>Paikkatietotoiminnot SQL-näkymien kautta</strong></a></li>
</ul></li>
<li class="has-sub"><a href="08_harjoitus_8.html#harjoitus-2.1-wfs-palvelut"><span class="toc-section-number">9</span> HARJOITUS 2.1: WFS-PALVELUT</a>
<ul>
<li><a href="08_harjoitus_8.html#valmistautuminen-7"><span class="toc-section-number">9.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="08_harjoitus_8.html#ogc-standardit-1"><span class="toc-section-number">9.2</span> <strong>OGC-standardit</strong></a></li>
<li><a href="08_harjoitus_8.html#wfs-asetukset"><span class="toc-section-number">9.3</span> <strong>WFS-asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#tietomäärä-pyynnöissä"><span class="toc-section-number">9.4</span> <strong>Tietomäärä pyynnöissä</strong></a></li>
<li><a href="08_harjoitus_8.html#useiden-koordinaattijärjestelmien-määrittäminen"><span class="toc-section-number">9.5</span> <strong>Useiden koordinaattijärjestelmien määrittäminen</strong></a></li>
<li><a href="08_harjoitus_8.html#service-levels"><span class="toc-section-number">9.6</span> <strong>Service Levels</strong></a></li>
<li><a href="08_harjoitus_8.html#gml-asetukset"><span class="toc-section-number">9.7</span> <strong>GML-asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#workspace-kohtaiset-asetukset"><span class="toc-section-number">9.8</span> <strong>Workspace kohtaiset asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#editointi-wfs-t-palvelun-kautta"><span class="toc-section-number">9.9</span> <strong>Editointi WFS-T-palvelun kautta</strong></a></li>
<li><a href="08_harjoitus_8.html#muiden-wfs-palvelujen-hyödyntäminen-cascading-wfs"><span class="toc-section-number">9.10</span> <strong>Muiden WFS-palvelujen hyödyntäminen (cascading WFS)</strong></a></li>
</ul></li>
<li class="has-sub"><a href="09_harjoitus_9.html#harjoitus-2.2-karttatiilipalvelut"><span class="toc-section-number">10</span> HARJOITUS 2.2: KARTTATIILIPALVELUT</a>
<ul>
<li><a href="09_harjoitus_9.html#valmistautuminen-8"><span class="toc-section-number">10.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="09_harjoitus_9.html#tile-caching-2"><span class="toc-section-number">10.2</span> <strong>Tile Caching</strong></a></li>
<li><a href="09_harjoitus_9.html#geowebcache-käyttöliittymä"><span class="toc-section-number">10.3</span> <strong>GeoWebCache-käyttöliittymä</strong></a></li>
<li><a href="09_harjoitus_9.html#tasokohtaiset-asetukset"><span class="toc-section-number">10.4</span> <strong>Tasokohtaiset asetukset</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiilien-esiluominen"><span class="toc-section-number">10.5</span> <strong>Karttatiilien esiluominen</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiilien-kovalevyn-käyttö"><span class="toc-section-number">10.6</span> <strong>Karttatiilien kovalevyn käyttö</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiiliruudukot"><span class="toc-section-number">10.7</span> <strong>Karttatiiliruudukot</strong></a></li>
<li><a href="09_harjoitus_9.html#jhs180-mukainen-karttatiiliruudukko"><span class="toc-section-number">10.8</span> <strong>JHS180 mukainen karttatiiliruudukko</strong></a></li>
<li><a href="09_harjoitus_9.html#uuden-karttatiiliruudukon-luominen"><span class="toc-section-number">10.9</span> <strong>Uuden karttatiiliruudukon luominen</strong></a></li>
<li><a href="09_harjoitus_9.html#suomen-openstreetmap-tiestö"><span class="toc-section-number">10.10</span> <strong>Suomen OpenStreetMap-tiestö</strong></a></li>
<li><a href="09_harjoitus_9.html#oman-karttatiiliruudukon-käyttöönotto"><span class="toc-section-number">10.11</span> <strong>Oman karttatiiliruudukon käyttöönotto</strong></a></li>
<li><a href="09_harjoitus_9.html#paikallisen-karttatiiliruudukon-muodostaminen"><span class="toc-section-number">10.12</span> <strong>Paikallisen karttatiiliruudukon muodostaminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="10_harjoitus_10.html#harjoitus-2.3-arkkitehtuuri-ja-käyttöönotto"><span class="toc-section-number">11</span> HARJOITUS 2.3: ARKKITEHTUURI JA KÄYTTÖÖNOTTO</a>
<ul>
<li><a href="10_harjoitus_10.html#valmistautuminen-9"><span class="toc-section-number">11.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="10_harjoitus_10.html#yleistiedot-geoserverin-palvelimesta"><span class="toc-section-number">11.2</span> <strong>Yleistiedot GeoServerin palvelimesta</strong></a></li>
<li><a href="10_harjoitus_10.html#image-processing--asetukset"><span class="toc-section-number">11.3</span> <strong>Image Processing -asetukset</strong></a></li>
<li><a href="10_harjoitus_10.html#raster-access"><span class="toc-section-number">11.4</span> <strong>Raster Access</strong></a></li>
<li><a href="10_harjoitus_10.html#geoserverin-loki"><span class="toc-section-number">11.5</span> <strong>GeoServerin loki</strong></a></li>
<li><a href="10_harjoitus_10.html#rest-apin-toimintaa"><span class="toc-section-number">11.6</span> <strong>REST API:n toimintaa</strong></a></li>
<li><a href="10_harjoitus_10.html#monitor-lisäosan-käyttö"><span class="toc-section-number">11.7</span> <strong>Monitor-lisäosan käyttö</strong></a></li>
</ul></li>
<li class="has-sub"><a href="11_harjoitus_11.html#harjoitus-2.4-css-kuvaustekniikka"><span class="toc-section-number">12</span> HARJOITUS 2.4: CSS-KUVAUSTEKNIIKKA</a>
<ul>
<li><a href="11_harjoitus_11.html#valmistautuminen-10"><span class="toc-section-number">12.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="11_harjoitus_11.html#css-tyylit"><span class="toc-section-number">12.2</span> <strong>CSS-tyylit</strong></a></li>
<li><a href="11_harjoitus_11.html#tyylin-luominen"><span class="toc-section-number">12.3</span> <strong>Tyylin luominen</strong></a></li>
<li><a href="11_harjoitus_11.html#aineiston-luokittelu"><span class="toc-section-number">12.4</span> <strong>Aineiston luokittelu</strong></a></li>
<li><a href="11_harjoitus_11.html#tyylin-virittäminen"><span class="toc-section-number">12.5</span> <strong>Tyylin virittäminen</strong></a></li>
<li><a href="11_harjoitus_11.html#luokkien-nimeäminen"><span class="toc-section-number">12.6</span> <strong>Luokkien nimeäminen</strong></a></li>
<li><a href="11_harjoitus_11.html#mittakaavaperusteinen-näkyvyys"><span class="toc-section-number">12.7</span> <strong>Mittakaavaperusteinen näkyvyys</strong></a></li>
<li><a href="11_harjoitus_11.html#tekstityksen-lisääminen"><span class="toc-section-number">12.8</span> <strong>Tekstityksen lisääminen</strong></a></li>
<li><a href="11_harjoitus_11.html#kuvaustekniikan-soveltaminen"><span class="toc-section-number">12.9</span> <strong>Kuvaustekniikan soveltaminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="12_harjoitus_12.html#harjoitus-2.5-pääsynhallinta"><span class="toc-section-number">13</span> HARJOITUS 2.5: PÄÄSYNHALLINTA</a>
<ul>
<li><a href="12_harjoitus_12.html#geoserverin-yleiset-turvallisuusasetukset"><span class="toc-section-number">13.1</span> <strong>GeoServerin yleiset turvallisuusasetukset</strong></a></li>
<li><a href="12_harjoitus_12.html#tunnistautuminen"><span class="toc-section-number">13.2</span> <strong>Tunnistautuminen</strong></a></li>
<li><a href="12_harjoitus_12.html#uuden-roolin-ja-käyttäjän-luominen"><span class="toc-section-number">13.3</span> <strong>Uuden roolin ja käyttäjän luominen</strong></a></li>
<li><a href="12_harjoitus_12.html#aineiston-käyttöoikeuksien-rajoittaminen"><span class="toc-section-number">13.4</span> <strong>Aineiston käyttöoikeuksien rajoittaminen</strong></a></li>
<li><a href="12_harjoitus_12.html#aineiston-käyttäjäkohtaiset-käyttöoikeudet"><span class="toc-section-number">13.5</span> <strong>Aineiston käyttäjäkohtaiset käyttöoikeudet</strong></a></li>
<li><a href="12_harjoitus_12.html#karttapalvelukohtaiset-oikeudet"><span class="toc-section-number">13.6</span> <strong>Karttapalvelukohtaiset oikeudet</strong></a></li>
</ul></li>
<li class="has-sub"><a href="13_harjoitus_13.html#harjoitus-2.6-suodattimet"><span class="toc-section-number">14</span> HARJOITUS 2.6: SUODATTIMET</a>
<ul>
<li><a href="13_harjoitus_13.html#valmistautuminen-11"><span class="toc-section-number">14.1</span> <strong>Valmistautuminen</strong></a></li>
<li><a href="13_harjoitus_13.html#ominaisuustietosuodattimet"><span class="toc-section-number">14.2</span> <strong>Ominaisuustietosuodattimet</strong></a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-2.2-karttatiilipalvelut" class="section level1" number="10">
<h1><span class="header-section-number">10</span> HARJOITUS 2.2: KARTTATIILIPALVELUT</h1>
<p><strong>Harjoituksen sisältö</strong></p>
<p>Harjoituksessa hyödynnetään GeoServerissa olevia karttatiilien ja ruudukkojen luontityökaluja.</p>
<p><strong>Harjoituksen tavoite</strong></p>
<p>Harjoituksen jälkeen opiskelija pystyy luomaan ja säätämään omia karttatiilipalveluja.</p>
<p><strong>Arvioitu kesto</strong></p>
<p>40 minuuttia.</p>
<div id="valmistautuminen-8" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> <strong>Valmistautuminen</strong></h2>
<p>GeoServerin palvelimeen on ladattu ja julkaistu useita rasteri- ja vektoriaineistoja. GeoServerin oletusasennukseen on myös integroitu GeoWebCache, jota GeoServer käyttää karttatiilien luomiseen ja hallitsemiseen.</p>
</div>
<div id="tile-caching-2" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> <strong>Tile Caching</strong></h2>
<p>GeoServer sisältää <strong>Tile</strong>-palvelut osana <strong>GeoWebCache-</strong>palvelua.</p>
<p>Avaa <strong>Tile Caching → Caching defaults</strong> ja tarkista, mitkä karttatiilipalvelut ovat käytössä GeoServerin asennuksessasi.</p>
<p><img src="img/harjoitus_9/image1.png" /></p>
<p>Oletuksena aktivoituna ovat <strong>WMS-C</strong>- (WMS Service-Cached) ja <strong>TMS</strong> (Tile Map Service)-karttatiilipalvelut.</p>
<p>Avaa vielä <strong>Tile Caching → Tile Layers</strong> ja huomaa myös, että kaikille tasoille on automaattisesti luotu oma karttatiilitaso.<br />
<img src="img/harjoitus_9/image2.png" /></p>
</div>
<div id="geowebcache-käyttöliittymä" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> <strong>GeoWebCache-käyttöliittymä</strong></h2>
<p>Yleisimmät karttatiilipalvelun asetukset määritellään jo tutuiksi tulleissa eri GeoServerin web-käyttöliittymän asetusosissa. Tarkemmin karttatiilipalvelun toimintaa hallitaan GeoWebCache:n käyttöliittymästä.</p>
<p>Palaa <strong>Tile Caching → Caching Defaults</strong> -näkymään ja avaa vielä GeoWebCache:n oma asetusnäkymä painamalla <strong>Go to the embedded GeoWebCache home page</strong>.<br />
<img src="img/harjoitus_9/image3.png" /></p>
<p>GeoWebCache on oletuksena asennettu GeoServeriin ja se hallitsee kaikkia karttatiiliä, joita jaetaan karttatiilipalvelujen kautta.</p>
<p>Avaa lista demoista <strong>A list of all the layers and automatic demos</strong>.</p>
<p>Kaikilla GeoServerin tasoilla on oma karttatiilipalvelu käytössä: <img src="img/harjoitus_9/image4.png" /></p>
<p>Avaa <strong>helsinki:ilmakuvat</strong> OpenLayers <strong>png</strong>-esikatselu linkkiä ja selaile karttaa. Huomaat, miten eri karttatiilet lasketaan ja piirretään näyttöön sen mukaan kun palvelin saa niitä luotua.</p>
<p>Testaa, että karttatiilet pysyvät palvelimessa uudelleen käytettävänä siirtymällä kartalla paikasta toiseen suurin piirtein samalla kartta-alueella. Karttatiilet tulevat nyt nopeammin näkyviin, koska GeoServerin ei enää tarvitse piirtää niitä, vaan se vain välittää palvelimella jo valmiina olevia karttatiiliä.</p>
</div>
<div id="tasokohtaiset-asetukset" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> <strong>Tasokohtaiset asetukset</strong></h2>
<p>Tasojen karttatiiliasetukset löytyvät päävalikon <strong>Tile Caching → Tile Layers</strong> -näkymän kautta. Avaa <strong>helsinki:ilmakuvat_keskusta</strong> -tason ominaisuudet painamalla tason linkkiä taulusta. <img src="img/harjoitus_9/image5.png" /></p>
<p>Valitse sitten <strong>Tile Caching</strong>.</p>
<p><img src="img/harjoitus_9/image6.png" /></p>
<p>Oletusasetukset on määritelty siten, että kaikille uusille tasoille luodaan automaattisesti karttatiilet. Myös sekä jpeg- että png-kuvatiilet ovat oletuksena aktivoituna.</p>
<p>Selaa vielä tämän näkymän alaosaan, josta selviää <strong>Available gridsets</strong> -osiosta, että kaksi eri karttatiiliruudukkoa on oletuksena käytössä: <strong>EPSG:4326</strong> (WGS 84) ja <strong>EPSG:900913</strong> (Google Mercator): <img src="img/harjoitus_9/image7.png" /></p>
<div class="hint-box">
<p>Psst! Tasokohtaisia tiilitysasetuksia pääset myös muokkaamaan Data → Layers näkymän kautta valitsemalla tason ja sen jälkeen Tile Caching -välilehden.</p>
</div>
</div>
<div id="karttatiilien-esiluominen" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> <strong>Karttatiilien esiluominen</strong></h2>
<p>Palaa <strong>Tile Caching → Tile Layers</strong> näkymään. Tältä sivulta voit myös esikatsella tiilitettyjä karttapalveluita.</p>
<p><strong>Preview</strong>-sarakkeen alta valikosta löytyy kyseiselle tasolle saatavilla olevat tiilitysvaihtoehdot. Saat aikaiseksi saman esikatselun kuin käyttäessäsi GeoWebCache:n näkymää.</p>
<p><strong>Actions</strong>-sarakkeen alta löytyy vielä linkki <strong>Seed/Truncate</strong>, jolla pääse GeoWebCache:n tasojen esitiilittämiseen. <strong>Empty</strong>-linkillä tyhjennetään kaikki tasolle aiemmin tallennetut karttatiilet. <img src="img/harjoitus_9/image8.png" /></p>
<p>Valitse nyt <strong>Seed/Truncate</strong> -linkki Helsingin ilmakuvien tason karttatiilien luomista varten.</p>
<p><strong>GeoWebCache</strong>-näkymässä sivun yläosasta löytyy yleisiä toimintoja ja lista meneillään olevista tehtävistä. Karttatiilien luominen on hyvin resurssi-intensiivinen ja kohtuullisia levytiloja vaativa prosessi. On myös tyypillistä, että tehtävien eli karttatiilien luominen voi kestää hyvinkin pitkään (tunteja, jopa päiviä). Sivun tiedot päivitetään käyttämällä <strong>Refresh list</strong> -toimintoa. <img src="img/harjoitus_9/image9.png" /></p>
<p>Tiilien luomista varten asetukset löytyvät sivun alapuolelta <strong>Create a new task</strong> -osiosta.</p>
<table>
<colgroup>
<col width="23%" />
<col width="76%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Number of tasks to use</strong></td>
<td>Määrittää kuinka monta prosessia käynnistetään karttatiilien luomiseksi</td>
</tr>
<tr class="even">
<td><strong>Type of operation</strong></td>
<td><p>Tiilien luomisen toimintotapa</p>
<p>Reseed: luodaan kaikki karttatiilet, korvataan vanhat karttatiilet</p>
<p>Seed: luodaan vain puuttuvat karttatiilet</p>
<p>Truncate: poistetaan karttatiilet palvelimesta</p></td>
</tr>
<tr class="odd">
<td><strong>Grid set</strong></td>
<td>Määrittää mille karttatiiliruudukolle luodaan karttatiilet</td>
</tr>
<tr class="even">
<td><strong>Format</strong></td>
<td>Karttakuvan tiedostomuoto (esim. jpg, png)</td>
</tr>
<tr class="odd">
<td><strong>Zoom start, Zoom stop</strong></td>
<td>Mittakaavavälit luotavalle karttatiilille (mittakaavat on määritelty karttatiiliruudukoille)</td>
</tr>
<tr class="even">
<td><strong>Bounding box</strong></td>
<td>Sijainnin suorakaiderajaus, jolta karttatiilet luodaan</td>
</tr>
</tbody>
</table>
<p>Aseta <strong>Number of tasks to use</strong> -asetukseksi 1.</p>
<div class="hint-box">
<p>Psst! 2*tietokoneen_suorittimien_lukumäärä on hyvä lähtökohta kokeilulle.</p>
</div>
<p>Aseta tehtävän asetukset seuraavalla tavalla, huomaa erityisesti <strong>Zoom stop</strong> -asetus. Laita arvoksi 15, niin lasketaan valmiiksi mittakaavatasot 0-15:</p>
<p>Paina <strong>Submit</strong>.</p>
<p>GeoServer (GeoWebCache) muodostaa nyt karttatiilet valitusta palvelusta mittakaavatasoista 0–15.</p>
<p>Muodostamisen ajan käyttöliittymässä voi seurata karttatiilien valmistumista:</p>
<p>Paina <strong>Refresh list</strong> -linkkiä, kun haluat päivittää tiedot laskennan etenemisestä.</p>
<p>Karttatiiliruudukon määritelmä ja tason sijainnin rajauksen mukaan mittakaavoille 0-15 tarvitaan 1 922 karttatiiltä. Kuvien piirtäminen kestää etäpalvelimella näillä asetuksilla minuutin verran.<br />
<img src="img/harjoitus_9/image10.png" /></p>
<p>Huomaa, että karttatiilet luodaan oletuksena tason sijainnin rajauksen mukaisesti (ellei sitä toisin ole määritelty). <img src="img/harjoitus_9/image11.png" /></p>
<p>Laske vielä karttatiilet <strong>tasolle 16</strong> (määrittele zoomaus aloitus- ja lopputasoksi 16). Päivitä laskennan aikana sivua ja tutki karttatiilien luomisen etenemistä.<br />
<img src="img/harjoitus_9/image12.png" /></p>
<p>Jos erehdyt määrittelemään vääriä asetuksia, voit pysäyttää laskennan käyttämällä <strong>Kill all Tasks…</strong> -toimintoa painamalla <strong>Submit</strong>-näppäintä. <img src="img/harjoitus_9/image13.png" /></p>
<p>Taso 16 vastaa mittakaavaa 1:4 262. Kaikkiaan sen tiilittämiseen tarvitaan 3 700 karttatiiliä, joiden luomiseen menee noin pari minuuttia. Laske vielä taso 17 samalla tavalla ja kirjoita muistiinpanot prosessorimäärästä, karttatiilistä sekä ajasta.</p>
<p>Taso 17 näyttää kartalla tältä: <img src="img/harjoitus_9/image14.png" /></p>
</div>
<div id="karttatiilien-kovalevyn-käyttö" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> <strong>Karttatiilien kovalevyn käyttö</strong></h2>
<p>Edellisessä kohdassa laskettiin karttatiiliä vain yhdelle tasolle (<strong>ilmakuvat_keskusta</strong>), vain yhteen karttatiiliruudukkoon (<strong>EPSG:4326</strong>) ja vain yhdelle kuvaformaatille (<strong>png</strong>). Tämän karttatason mittakaavatason 16 karttatiilet vievät noin 300 MB levytilaa.</p>
<p>Karttatasoilla saattaa olla useita karttatiilipalveluita riippuen siitä, kuinka monta karttatiiliruudukkoa ja kuvatyyppiä on tason tiilitysasetuksissa määritelty.</p>
<p>Karttatiilien luominen kannattaa suunnitella etukäteen ja toteuttaa huolellisesti. Yksi tärkeä asetus karttatiilipalveluissa on karttatiilien kovalevyn käytön tarkkaileminen ja hallinnointi. Siihen on GeoWebCache:ssa erilaisia asetuksia ja osaa niistä voi säätää suoraan GeoServeristä.</p>
<p>Avaa <strong>Tile Caching → Tile Layers</strong> -näkymästä <strong>ilmakuvat_keskusta</strong> tason asetukset. Avaa vielä <strong>Tile Caching</strong> välilehti.</p>
<p>Sivun asetuksista voit tarkistaa, että sekä <strong>jpeg</strong>- että <strong>png</strong>-kuvaformaatit ovat rastitettuina. Sen lisäksi on määritelty <strong>kaksi eri karttatiiliruudukkoa</strong> käytettäväksi. Tämä tarkoittaa sitä, että tämä taso on saatavilla kuudella eri karttatiilitasolla. Äskettäin laskettiin valmiiksi karttatiiliä vain yhdelle.</p>
<p>Voit tarkistaa kovalevyn käytön tasokohtaisesti <strong>Tile Caching → Tile Layers</strong> -näkymästä. Huomaa kuitenkin, että oletusasetuksilla tämä tieto ei ole saatavilla (<strong>N/A</strong>). <img src="img/harjoitus_9/image15.png" /></p>
<p>Tiedon näkymiseksi pitää ensin määrittää, kuinka paljon kovalevytilaa karttatiilipalvelulla on lupa käyttää. Oletuksena GeoWebCache voi käyttää koko palvelimen levytilan.</p>
<p>Palataan hetkeksi takaisin näkymään <strong>Tile Caching</strong> → <strong>Disk Quota</strong>. Rastita siellä <strong>Enable disk quota</strong> ja määrittele vielä <strong>Maximum tile cache size</strong> -arvoksi <strong>2 GiB</strong>. <img src="img/harjoitus_9/image16.png" /></p>
<p>Paina lopulta <strong>Submit</strong>, niin asetukset tulevat tallennetuksi.</p>
<div class="hint-box">
<p>Psst! Käyttöliittymässä käytetään lyhenteitä GiB ja GB. Niiden ero tulee siitä, että GiB (Gibibyte) on binäärijärjestelmä monikerta kun GB (Gigabyte) on kymmenjärjestelmä monikerta: GiB on 1024 MiB ja tavuina 230 tavua → eli 1 073 741 824 tavua GB on 1000 MB ja tavuina 109 tavua → eli 1 000 000 000 tavua</p>
</div>
<p>Huomaa vielä, että <strong>When enforcing disk quota limits, remove tiles that are</strong> -asetus tarkoittaa se, että GeoServer/GeoWebCache ei lopeta karttatiilien luomista, vaikka määritelty maksimi-karttatiilien levykäyttö saavutettaisiin. Sallitun levytilan täyttymisen jälkeen palvelin alkaa poistaa automaattisesti joko vähiten tai pitkän aikaan käyttämättä olleita karttatiiliä. Karttatiiliä tuotetaan siis jatkuvasti, vaikka maksimilevytilan raja tulisikin täyteen.</p>
<p>Paina <strong>Submit</strong> ja palaa <strong>Tile Caching → Tile Layers -</strong>näkymään.</p>
<p>Tarkista, että nyt <strong>Disk Used</strong> -sarakkeessa näkyy tarvittavat tiedot. Ilmakuvien karttatiilet vievät tällä hetkellä alle 500 megatavua. Muut tasot eivät käytä yhtään levytilaa. <img src="img/harjoitus_9/image17.png" /></p>
<p>Karttatiilet tulevat myös tallennetuksi automaattisesti aina karttatiilipalvelun luodessa karttatiiliä. Kokeile esikatsella eri tasojen karttatiilitasoja (<strong>Tile Caching</strong> → <strong>Tile Layers</strong> → <strong>Preview</strong>). Esimerkiksi rakennukset- ja taustakartta-tasoja. <img src="img/harjoitus_9/image18.png" /></p>
<p>Voidaan todeta, että sen jälkeen myös niiden kohdalla <strong>Disk Used</strong> -sarakkeessa on tietoa levytilan käytöstä. Niiden levytilan käyttö kasvaa sitä mukaan kun eri kartta-alueita ja tiilitasoja käytetään. <img src="img/harjoitus_9/image19.png" /></p>
<p>Edellisessä kohdassa laskettiin muutama karttatiilitasoja. Esimerkiksi Helsingin ilmakuvien mittakaavatason 16 karttatiilet vievät levytilaa reilut 300 megatavua.</p>
<p>Tasojen käyttämää levytilaa voidaan myös vapauttaa. Voit halutessasi tyhjentää tietyn tason kaikki karttatiilet käyttäen tason <strong>Empty</strong>-linkkiä. Kokeile tyhjentää <strong>hki-rakennukset</strong>-tason karttatiilet.</p>
<p>On mahdollista myös tyhjentää ainoastaan tietyn mittakaavan karttatiilet GeoWebCache-käyttöliittymällä: </p>
<ul>
<li><p>Avaa <strong>ilmakuvat_keskusta</strong>-tason oikealta <strong>Seed/Truncate</strong> ja valitse mittakaavataso 17 alku- ja loppumittakaavaksi.</p></li>
<li><p>Valitse toiminnoksi <strong>Truncate</strong> ja lopuksi <strong>Submit</strong>. Tällä tavalla poistat palvelimesta kaikki mittakaavatason 17 karttatiiltä.</p></li>
<li><p>Voit tarkistaa <strong>Tile Layers</strong> -näkymästä <strong>ilmakuvat_keskusta</strong>-tason nykyisen kovalevyn käytön.</p></li>
</ul>
<div class="hint-box">
<p>Psst! Helsingin ilmakuvien mittakaavataso 17 vaatii 1,4 GB.</p>
</div>
</div>
<div id="karttatiiliruudukot" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> <strong>Karttatiiliruudukot</strong></h2>
<p>GeoServerin oletusasennuksesta löytyy muutama valmiiksi määritelty karttatiiliruudukko. Nämä ruudukot ovat joko WGS 84 tai Web Mercator -koordinaattijärjestelmässä.</p>
<p>Avaa <strong>Tile Caching → Gridsets</strong> ja paina sitten <strong>EPSG:4326</strong> -nimistä ruudukkoa. <img src="img/harjoitus_9/image20.png" /></p>
<p>Karttatiiliruudukon määritelmiin kuuluvat muun muassa:</p>
<table>
<colgroup>
<col width="17%" />
<col width="82%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Coordinate Reference System</strong></td>
<td>Koordinaattijärjestelmä, jolla ruudukot määritellään.<br />
</td>
</tr>
<tr class="even">
<td><strong>Gridset bounds</strong></td>
<td>Karttalehtijaon sijainnin rajaus, jolla määritetään, mille sijainnille karttatiiliruudukko on rajattu.</td>
</tr>
<tr class="odd">
<td><strong>Tile Matrix Set</strong></td>
<td>Karttatiilimalli (kuvapyramidi), jolla määritellään karttatiiliruudukolle valitut mittakaavat. Tämä voidaan määritellä joko resoluution tai mittakaavan mukaan.</td>
</tr>
</tbody>
</table>
<p>Karttatiiliruudukkoja voi myös laatia omiin tarpeisiin.</p>
</div>
<div id="jhs180-mukainen-karttatiiliruudukko" class="section level2" number="10.8">
<h2><span class="header-section-number">10.8</span> <strong>JHS180 mukainen karttatiiliruudukko</strong></h2>
<p>JHS180 suosituksesta löytyy muun muassa suositus kansallisesta karttatiiliruudukosta, joka perustuu OGC-standardien määrittelyihin. Suosituksesta löytyy muun muassa seuraavat määritelmät:</p>
<table>
<colgroup>
<col width="21%" />
<col width="78%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Rajapintastandardi</strong></td>
<td>OGC:n WMS-T standardi</td>
</tr>
<tr class="even">
<td><strong>Koordinaattijärjestelmä</strong></td>
<td>ETRS89 / TM35-FIN (EPSG:3067)</td>
</tr>
<tr class="odd">
<td><strong>Käytettävä origo</strong></td>
<td>Itä -548 576 m, pohjoinen 8 388 608 m (tiilien ankkuripiste on vasen yläkulma)</td>
</tr>
<tr class="even">
<td><strong>Resoluutiotasot</strong></td>
<td>0.25 m, 0.5 m, 1 m, 2 m, 4 m, 8 m, 16 m, 32 m, 64 m, 128 m, 256 m, 512 m, 1 024 m, 2 048 m, 4 096 m ja 8 192 m</td>
</tr>
<tr class="odd">
<td><strong>Tiilien koko pikseleissä</strong></td>
<td>256*256 pikseliä</td>
</tr>
<tr class="even">
<td><strong>Kuvaformaatti</strong></td>
<td>Image/png</td>
</tr>
</tbody>
</table>
<p>Näillä määritelmillä, karkeimmalla resoluutiotasolla (taso 0) on vain yksi tiilikuva kooltaan 2 097 152 m * 2 097 152 m (8 192*8 192 pikseliä). Tämän kuvatiilen pohjois-etelä -suuntainen keskilinja sijoittuu projektiokaistan keskimeridiaanille (27 astetta). Ja tiilen pohjoisreunan pohjoiskoordinaatti on tiilen koon monikerta päiväntasaajalta laskien (4 * 2 097 152).</p>
<p>Seuraava taso (taso 1) muodostuu jakamalla 0 tason ainoa tiili neljään yhtä suureen osaan. Ja niin edelleen muodostuvat seuraavat tasot, taso 15 asti. Katso tarkemmin luentomateriaalista.</p>
</div>
<div id="uuden-karttatiiliruudukon-luominen" class="section level2" number="10.9">
<h2><span class="header-section-number">10.9</span> <strong>Uuden karttatiiliruudukon luominen</strong></h2>
<p>Luodaan GeoServerin palvelimelle uusi karttatiiliruudukko JHS180-suositusten mukaisesti.</p>
<p>Valitse <strong>Tile caching → Gridset</strong> päävalikosta ja luo uusi karttatiiliruudukko painamalla <strong>Create a new gridset</strong>.</p>
<p>Anna nimeksi esimerkiksi <strong>JHS180_EPSG3067</strong> ja kirjoita lyhyt määritelmä ruudukosta.</p>
<p>Valitse <strong>Coordinate Reference System</strong> -arvoksi <strong>EPSG 3067</strong>.</p>
<p>Määrittele vielä ruudukon kattavuus aiemmin mainituilla JHS180 suosituksella, eli karkeamman tason kattavuus.</p>
<p>Suosituksissa sanotaan, että vasemman yläkulman koordinaatit (origo) ovat itäkoordinaatti <strong>-548 576</strong> m ja pohjoiskoordinaatti <strong>8 388 608</strong> m. Näitä vastaavat <strong>Min X</strong> ja <strong>Max Y</strong> koordinaatit. Karkeamman tason koko metreinä on 2097152 * 2097152 joten:</p>
<p><strong>Max X</strong> on sitten: -548576 + 2097152 = <strong>1 548 576</strong> m</p>
<p><strong>Min Y</strong> on sitten: 8388608 – 2097152 = <strong>6 291 456</strong> m</p>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>  JHS180-mukaisen ruudukon kattavuus</strong></td>
</tr>
</tbody>
</table>
<p>+=================================================+========================================+
| Min X: -548 576 m | Max X: 1 548 576 m |
+————————————————-+—————————————-+
| Min Y: 6 291 456 m | Max Y: 8 388 608 m |
+————————————————-+—————————————-+</p>
<p>Pidä tiilen pikselikoko oletuksena, <strong>256</strong> px.</p>
<p>Samat arvot löydät suosituksen mukaisesta tiiliruudukosta.</p>
<p><img src="img/harjoitus_9/image21.png" /></p>
<p>Täytä karttatiiliruudukon tiedot yllä mainituilla arvoilla, kuitenkin siten, että et käytä välilyöntejä koordinaatteja kirjoittaessasi.</p>
<p>Määritellään seuraavaksi resoluutiotasot. <strong>Tile Matrix Set</strong> -asetuksissa voit määritellä JHS180 suosituksessa mainitut <strong>resoluutiotasot</strong>.</p>
<p>Pidä valittuna <strong>Resolutions</strong>. Aloita määrittelemällä taso 0. <img src="img/harjoitus_9/image22.png" /></p>
<p>Paina <strong>Add zoom level</strong> ja huomaa, että <strong>Pixel Size</strong> -arvoksi tulee <strong>8 192</strong> (pilkut numeroissa johtuvat englannin numeroformaatista), joka on juuri suosituksessa mainittu kuvatiilen pikselikoko tällä tasolla. Huomaa, että <strong>Scale</strong>-arvo täyttyy myös automaattisesti.</p>
<p>Kun painat uudelleen <strong>Add zoom level</strong>, uuden tason <strong>Pixel Size</strong> -arvo tulee automaattisesti puoleksi edellisen tason pikselikoosta, eli 4 096.</p>
<p>Luo loput resoluutiotasot (tasolle 15 asti) samalla tavalla.</p>
<p><strong>Tiles</strong>-kohdalta voit tarkista kuinka monta tiiliä tarvitaan jokaisen tason puolelta.</p>
<p>Paina lopulta <strong>Save</strong>, niin uusi JHS180-karttatiiliruudukko on käytettävissä palvelimessasi.<br />
<img src="img/harjoitus_9/image23.png" /></p>
</div>
<div id="suomen-openstreetmap-tiestö" class="section level2" number="10.10">
<h2><span class="header-section-number">10.10</span> <strong>Suomen OpenStreetMap-tiestö</strong></h2>
<p>Äskettäin luomamme karttatiiliruudukko soveltuu aineistoihin, jotka kattavat koko Suomen.</p>
<p>Aiemmissa harjoituksissa olet harjoitellut aineistojen käyttöönottoa GeoServerissä. Samasta jo aiemmin käytetystä <strong>gs_training</strong> PostGIS-tietokannasta löytyy Suomen OpenStreetMap-tiestöaineisto <strong>EPSG 3067</strong> -koordinaattijärjestelmässä.</p>
<p>Luo uusi taso tiestö-aineistosta. Suomen aineisto löytyy tietokannasta <strong>suomi</strong>-skeemasta nimellä <strong>osm-tiet</strong>.</p>
<div class="hint-box">
<p>Psst! Muista, että ensin luodaan store, josta luodaan viittaus edellä mainittuun skeemaan ja sen jälkeen voidaan lisätä tasoja GeoServer-palvelimelle.</p>
</div>
<p><strong>Voit katsoa ohjeita paikkatietokannat-harjoituksesta</strong>, jossa lisättiin aineistoja GeoServeriin PostGIS-paikkatietokannasta. Voit myös kysyä tarvittaessa kouluttajalta.</p>
<p>Luo workspace, anna sille nimeksi <strong>suomi</strong>.</p>
<p>Luo PostGIS-store, laita se suomi-workspaceen ja nimeä se <strong>suomi_tiesto_3067</strong>:ksi (tietokannan nimi on <strong>gs_training</strong>, skeema on <strong>suomi</strong>, käyttäjä on <strong>postgres</strong> ja salasana on <strong>gispo</strong>).</p>
<p>Kyseisestä storesta löytyy ainoastaan yksi aineisto (osm-tiet). Luo siitä uusi GeoServer-taso, nimeä se <strong>suomi_tiesto_3067</strong>:ksi (täytä myös muuta tarvittavat tiedot).</p>
<p>Tarpeen vaatiessa, voit katsoa mallia alla olevasta kuvakaappauksesta PostGIS-storen luomisesta:<br />
<img src="img/harjoitus_9/image24.png" /> <img src="img/harjoitus_9/image25.png" /></p>
</div>
<div id="oman-karttatiiliruudukon-käyttöönotto" class="section level2" number="10.11">
<h2><span class="header-section-number">10.11</span> <strong>Oman karttatiiliruudukon käyttöönotto</strong></h2>
<p>Avaa <strong>Tile Caching → Tile Layers</strong> ja paina <strong>suomi_tiesto_3067</strong> -linkkiä. Avaa vielä <strong>Tile Caching</strong> -välilehti ja selaa sivun loppuun, josta löydät karttatiiliruudukko-asetukset.</p>
<p>Valitse <strong>Available gridsets</strong> -osion alta <strong>Add grid subset</strong> -kohdasta uusi <strong>JHS180_EPSG3067</strong>-karttatiiliruudukko. Paina vielä <strong>plus</strong>-kuvaketta.</p>
<p>Tarvittaessa voit määritellä, mitkä zoomaus-tasot ovat käytettävissä tai mitkä tallentuvat välimuistiin käyttäen <strong>Published</strong>- ja <strong>Cached zoom levels -asetuksia</strong>.</p>
<p>Paina lopulta <strong>Save</strong>. <img src="img/harjoitus_9/image26.png" /></p>
<p>Esikatsele nyt <strong>suomi_tiesto_3067</strong> uudella karttatiiliruudukolla näkymästä <strong>Tile Caching → Tile Layers</strong>. Valitse tiestötason kohdalla <strong>JHS180_EPSG3067/png</strong>. </p>
<p>Esikatselussa on käytössä luomasi EPSG:3067 karttatiiliruudukko (alla huomataan, kuinka käytössä ovat karttatiilet, ja kuinka Etelä-Suomea kohti mentäessä karttatiilet eivät vielä ole ehtineet renderöitymään ruudulle näytönkaappauksen ottohetkeen mennessä):</p>
<p><img src="img/harjoitus_9/image27.png" /></p>
<p><br />
<img src="img/harjoitus_9/image28.png" /></p>
</div>
<div id="paikallisen-karttatiiliruudukon-muodostaminen" class="section level2" number="10.12">
<h2><span class="header-section-number">10.12</span> <strong>Paikallisen karttatiiliruudukon muodostaminen</strong></h2>
<p>Geoserveriin voidaan muodostaa tarpeiden mukaan hyvin monenlaisia karttatiiliruudukoita. Joissakin tapauksissa voi olla tarpeen luoda oma paikallinen karttatiiliruudukko. Paikallisen karttatiiliruudukko voi olla tarpeellinen, jos karttatiilipalvelulle on runsaasti käyttöä ja aineistoihin halutaan yhdistää paikallisessa koordinaattijärjestelmässä olevia tietoaineistoja (vektori- tai rasteriaineistoja).</p>
<p>Luodaan nyt Helsingin alueelle oma karttatiiliruudukko, joka käyttää <strong>ETRS89 / GK25FIN (EPSG:3879)</strong> -koordinaattijärjestelmää. Määritellään resoluutiotasot mittakaavan mukaan.</p>
<p>Palaa <strong>Tile Caching</strong> → <strong>Gridsets</strong>-näkymään ja paina <strong>Create a new gridset</strong> -toimintoa. Nimeä uusi karttatiiliruudukko <strong>HKI-GK25FIN</strong>-nimellä.</p>
<p>Määrittele sitten <strong>EPSG:3879</strong> koordinaattijärjestelmäksi ja paina vielä <strong>Compute from maximum extent of CRS</strong>.</p>
<p>Rastita <strong>Tile Matrix Set</strong> -osion alta <strong>Scale denominators</strong> ja lisää kymmenen karttatiilitasoa (tasot 0-9) painamalla <strong>Add zoom level</strong>. <img src="img/harjoitus_9/image29.png" /></p>
<p>Määrittele ensimmäisen tason mittakaava käsin <strong>Scale</strong>-sarakkeessa, anna arvoksi 500 000. Määrittele loput: 250 000, 100 000, 50 000, 20 000, 10 000, 5 000, 2 500, 1 000 ja 500 . <img src="img/harjoitus_9/image30.png" /></p>
<p>Paina lopussa <strong>Save</strong>.</p>
<p>Ota uusi karttatiiliruudukko käyttöön samalla tavalla kuin aiemmin.</p>
<p>Avaa <strong>Tile Caching → Tile Layers → taustakartta → Tile Caching</strong>. Ryhmätasoillekin voidaan määritellä karttaruudukkoja.</p>
<p>Selaa sivun loppuun, josta löydät tiilitysasetukset.</p>
<p>Valitse <strong>Available gridsets</strong> -osion alta <strong>Add grid subsret</strong> -kohdasta uusi <strong>HKI_GK25FIN</strong>-karttatiiliruudukko. Paina vielä <strong>plus</strong>-kuvaketta.</p>
<p>Paina lopulta <strong>Save</strong>.</p>
<p>Näkymästä <strong>Tile Caching → Tile Layers</strong>, esikatsele nyt <strong>ortokartta</strong> uudella karttatiiliruudukolla (valitse esimerkiksi <strong>HKI_GK25FIN/jpeg</strong>). Huomaa, että mittakaavatasoja on vain kymmenen ja ne vastaavat karttatiiliruudukon asetuksissa määriteltyjä mittakaavoja. <img src="img/harjoitus_9/image31.png" /></p>

</div>
</div>
<p style="text-align: center;">
<a href="08_harjoitus_8.html"><button class="btn btn-default">Previous</button></a>
<a href="10_harjoitus_10.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Johdanto GeoServerin käyttöön</h5>
<span class="footer-version">v2023-12-18</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Oy.
<span class="footer-copyright-year">© 2023</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3 krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
