<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="HARJOITUS 2.1: WFS-PALVELUT | Johdanto GeoServerin käyttöön" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Oy" />

<meta name="date" content="2024-04-24" />


<meta name="description" content="HARJOITUS 2.1: WFS-PALVELUT | Johdanto GeoServerin käyttöön">

<title>HARJOITUS 2.1: WFS-PALVELUT | Johdanto GeoServerin käyttöön</title>




<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Johdanto GeoServerin käyttöön</h1></div>
<div class="abstract-sidebar"><p>Johdantokurssi GeoServerin käyttöön.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li class="has-sub"><a href="index.html#johdanto-geoserverin-käyttöön">JOHDANTO GEOSERVERIN KÄYTTÖÖN</a>
<ul>
<li><a href="index.html#tervetuloa-geoserver-kurssille">Tervetuloa GeoServer-kurssille!</a></li>
<li><a href="index.html#geoserverin-taustaa">GeoServerin taustaa</a></li>
<li><a href="index.html#lukuohje">Lukuohje</a></li>
<li><a href="index.html#mistä-lisätietoja">Mistä lisätietoja?</a></li>
<li><a href="index.html#virheet">Virheet</a></li>
<li><a href="index.html#lisenssi-ja-oikeudet">Lisenssi ja oikeudet</a></li>
</ul></li>
<li class="has-sub"><a href="01_harjoitus_1.html#harjoitus-1.1-asennus-ja-käyttöönotto">HARJOITUS 1.1: ASENNUS JA KÄYTTÖÖNOTTO</a>
<ul>
<li><a href="01_harjoitus_1.html#valmistautuminen"><strong>Valmistautuminen</strong></a></li>
<li class="has-sub"><a href="01_harjoitus_1.html#päävalikko"><strong>Päävalikko</strong></a>
<ul>
<li><a href="01_harjoitus_1.html#about-geoserver"><strong>About GeoServer</strong></a></li>
<li><a href="01_harjoitus_1.html#layer-preview"><strong>Layer Preview</strong></a></li>
<li><a href="01_harjoitus_1.html#service-capabilities-palvelutoiminnallisuudet"><strong>Service Capabilities (palvelutoiminnallisuudet)</strong></a></li>
<li><a href="01_harjoitus_1.html#demos"><strong>Demos</strong></a></li>
<li><a href="01_harjoitus_1.html#demo-requests"><strong>Demo requests</strong></a></li>
</ul></li>
<li><a href="01_harjoitus_1.html#srs-list-ja-reprojection-console"><strong>SRS List ja Reprojection console</strong></a></li>
<li><a href="01_harjoitus_1.html#wcs-request-builder"><strong>WCS request builder</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#harjoitus-1.2-geoserverin-web-käyttöliittymä">HARJOITUS 1.2: GEOSERVERIN WEB-KÄYTTÖLIITTYMÄ</a>
<ul>
<li><a href="02_harjoitus_2.html#valmistautuminen-1"><strong>Valmistautuminen</strong></a></li>
<li><a href="02_harjoitus_2.html#ylläpitäjän-käyttöliittymä"><strong>Ylläpitäjän käyttöliittymä</strong></a></li>
<li><a href="02_harjoitus_2.html#master--ja-administrator-käyttäjät"><strong>Master- ja Administrator-käyttäjät</strong></a></li>
<li class="has-sub"><a href="02_harjoitus_2.html#about-status--asetukset"><strong>About &amp; Status -asetukset</strong></a>
<ul>
<li><a href="02_harjoitus_2.html#contact-information"><strong>Contact Information</strong></a></li>
<li><a href="02_harjoitus_2.html#server-status"><strong>Server Status</strong></a></li>
<li><a href="02_harjoitus_2.html#geoserver-logs"><strong>GeoServer Logs</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#data-valikko"><strong>Data-valikko</strong></a>
<ul>
<li><a href="02_harjoitus_2.html#layer-preview-1"><strong>Layer Preview</strong></a></li>
<li><a href="02_harjoitus_2.html#workspaces"><strong>Workspaces</strong></a></li>
<li><a href="02_harjoitus_2.html#stores"><strong>Stores</strong></a></li>
<li><a href="02_harjoitus_2.html#layers"><strong>Layers</strong></a></li>
</ul></li>
<li><a href="02_harjoitus_2.html#layer-groups"><strong>Layer Groups</strong></a></li>
<li><a href="02_harjoitus_2.html#styles"><strong>Styles</strong></a></li>
<li><a href="02_harjoitus_2.html#services-1"><strong>Services</strong></a></li>
<li><a href="02_harjoitus_2.html#settings"><strong>Settings</strong></a></li>
<li><a href="02_harjoitus_2.html#tile-caching-1"><strong>Tile Caching</strong></a></li>
<li><a href="02_harjoitus_2.html#security-1"><strong>Security</strong></a></li>
</ul></li>
<li class="has-sub"><a href="03_harjoitus_3.html#harjoitus-1.3-vektoriaineistot">Harjoitus 1.3: VEKTORIAINEISTOT</a>
<ul>
<li><a href="03_harjoitus_3.html#valmistautuminen-2"><strong>Valmistautuminen</strong></a></li>
<li><a href="03_harjoitus_3.html#vektoriaineisto-storen-luominen"><strong>Vektoriaineisto Storen luominen</strong></a></li>
<li><a href="03_harjoitus_3.html#vektoritason-julkaiseminen"><strong>Vektoritason julkaiseminen</strong></a></li>
<li class="has-sub"><a href="03_harjoitus_3.html#data-asetukset"><strong>Data asetukset</strong></a>
<ul>
<li><a href="03_harjoitus_3.html#coordinate-reference-systems"><strong>Coordinate Reference Systems</strong></a></li>
<li><a href="03_harjoitus_3.html#bounding-boxes"><strong>Bounding Boxes</strong></a></li>
<li><a href="03_harjoitus_3.html#feature-type-details"><strong>Feature Type Details</strong></a></li>
</ul></li>
<li><a href="03_harjoitus_3.html#helsingin-tiestön-lisääminen"><strong>Helsingin tiestön lisääminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="04_harjoitus_4.html#harjoitus-1.4-kuvaustekniikan-perusteet-sld">HARJOITUS 1.4: KUVAUSTEKNIIKAN PERUSTEET (SLD)</a>
<ul>
<li><a href="04_harjoitus_4.html#valmistautuminen-3"><strong>Valmistautuminen</strong></a></li>
<li><a href="04_harjoitus_4.html#geoserverin-kuvaustekniikka"><strong>GeoServerin kuvaustekniikka</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikka"><strong>SLD-kuvaustekniikka</strong></a></li>
<li><a href="04_harjoitus_4.html#uuden-tyylin-luominen"><strong>Uuden tyylin luominen</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikan-käyttöönotto"><strong>SLD-kuvaustekniikan käyttöönotto</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-cookbook"><strong>SLD Cookbook</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikan-muokkaaminen"><strong>SLD-kuvaustekniikan muokkaaminen</strong></a></li>
<li><a href="04_harjoitus_4.html#tiestön-tyylin-luominen"><strong>Tiestön tyylin luominen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="05_harjoitus_5.html#harjoitus-1.5-wms--ja-wcs-palvelut">HARJOITUS 1.5: WMS- JA WCS-PALVELUT</a>
<ul>
<li><a href="05_harjoitus_5.html#valmistautuminen-4"><strong>Valmistautuminen</strong></a></li>
<li><a href="05_harjoitus_5.html#ogc-standardit"><strong>OGC-standardit</strong></a></li>
<li><a href="05_harjoitus_5.html#yleiset-karttapalveluasetukset"><strong>Yleiset karttapalveluasetukset</strong></a></li>
<li><a href="05_harjoitus_5.html#wms"><strong>WMS</strong></a></li>
<li><a href="05_harjoitus_5.html#workspace-kohtaiset-palvelimen-asetukset"><strong>Workspace-kohtaiset palvelimen asetukset</strong></a></li>
<li><a href="05_harjoitus_5.html#wms-karttapalvelun-kuvan-dpi-resoluutio"><strong>WMS-karttapalvelun kuvan DPI-resoluutio</strong></a></li>
<li><a href="05_harjoitus_5.html#wcs"><strong>WCS</strong></a></li>
</ul></li>
<li class="has-sub"><a href="06_harjoitus_6.html#harjoitus-1.6-rasteriaineistot">HARJOITUS 1.6: RASTERIAINEISTOT</a>
<ul>
<li><a href="06_harjoitus_6.html#valmistautuminen-5"><strong>Valmistautuminen</strong></a></li>
<li><a href="06_harjoitus_6.html#rasteriaineiston-lisääminen"><strong>Rasteriaineiston lisääminen</strong></a></li>
<li><a href="06_harjoitus_6.html#ilmakuvan-lisääminen"><strong>Ilmakuvan lisääminen</strong></a></li>
<li><a href="06_harjoitus_6.html#image-mosaic"><strong>Image Mosaic</strong></a></li>
<li class="has-sub"><a href="06_harjoitus_6.html#layer-groups-1"><strong>Layer Groups</strong></a>
<ul>
<li><a href="06_harjoitus_6.html#ryhmätasojen-julkaisemisen-muoto"><strong>Ryhmätasojen julkaisemisen muoto</strong></a></li>
<li><a href="06_harjoitus_6.html#muiden-wms-palvelujen-hyödyntäminen-cascading-wms"><strong>Muiden WMS-palvelujen hyödyntäminen (cascading WMS)</strong></a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="07_harjoitus_7.html#harjoitus-1.7-paikkatietokannat">HARJOITUS 1.7: PAIKKATIETOKANNAT</a>
<ul>
<li><a href="07_harjoitus_7.html#valmistautuminen-6"><strong>Valmistautuminen</strong></a></li>
<li><a href="07_harjoitus_7.html#yhteyden-muodostaminen-paikkatietokantaan"><strong>Yhteyden muodostaminen paikkatietokantaan</strong></a></li>
<li><a href="07_harjoitus_7.html#postgis-tason-lisääminen"><strong>PostGIS-tason lisääminen</strong></a></li>
<li><a href="07_harjoitus_7.html#monikulmio--ja-viiva-tason-lisääminen-postgis-tietokannasta"><strong>Monikulmio- ja viiva-tason lisääminen PostGIS-tietokannasta</strong></a></li>
<li><a href="07_harjoitus_7.html#tasojen-oletustyylien-asettaminen"><strong>Tasojen oletustyylien asettaminen</strong></a></li>
<li><a href="07_harjoitus_7.html#sql-näkymät"><strong>SQL-näkymät</strong></a></li>
<li><a href="07_harjoitus_7.html#paikkatietotoiminnot-sql-näkymien-kautta"><strong>Paikkatietotoiminnot SQL-näkymien kautta</strong></a></li>
</ul></li>
<li class="has-sub"><a href="08_harjoitus_8.html#harjoitus-2.1-wfs-palvelut">HARJOITUS 2.1: WFS-PALVELUT</a>
<ul>
<li><a href="08_harjoitus_8.html#valmistautuminen-7"><strong>Valmistautuminen</strong></a></li>
<li><a href="08_harjoitus_8.html#ogc-standardit-1"><strong>OGC-standardit</strong></a></li>
<li><a href="08_harjoitus_8.html#wfs-asetukset"><strong>WFS-asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#tietomäärä-pyynnöissä"><strong>Tietomäärä pyynnöissä</strong></a></li>
<li><a href="08_harjoitus_8.html#useiden-koordinaattijärjestelmien-määrittäminen"><strong>Useiden koordinaattijärjestelmien määrittäminen</strong></a></li>
<li><a href="08_harjoitus_8.html#service-levels"><strong>Service Levels</strong></a></li>
<li><a href="08_harjoitus_8.html#gml-asetukset"><strong>GML-asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#workspace-kohtaiset-asetukset"><strong>Workspace kohtaiset asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#editointi-wfs-t-palvelun-kautta"><strong>Editointi WFS-T-palvelun kautta</strong></a></li>
<li><a href="08_harjoitus_8.html#muiden-wfs-palvelujen-hyödyntäminen-cascading-wfs"><strong>Muiden WFS-palvelujen hyödyntäminen (cascading WFS)</strong></a></li>
</ul></li>
<li class="has-sub"><a href="09_harjoitus_9.html#harjoitus-2.2-karttatiilipalvelut">HARJOITUS 2.2: KARTTATIILIPALVELUT</a>
<ul>
<li><a href="09_harjoitus_9.html#valmistautuminen-8"><strong>Valmistautuminen</strong></a></li>
<li><a href="09_harjoitus_9.html#tile-caching-2"><strong>Tile Caching</strong></a></li>
<li><a href="09_harjoitus_9.html#geowebcache-käyttöliittymä"><strong>GeoWebCache-käyttöliittymä</strong></a></li>
<li><a href="09_harjoitus_9.html#tasokohtaiset-asetukset"><strong>Tasokohtaiset asetukset</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiilien-esiluominen"><strong>Karttatiilien esiluominen</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiilien-kovalevyn-käyttö"><strong>Karttatiilien kovalevyn käyttö</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiiliruudukot"><strong>Karttatiiliruudukot</strong></a></li>
<li><a href="09_harjoitus_9.html#jhs180-mukainen-karttatiiliruudukko"><strong>JHS180 mukainen karttatiiliruudukko</strong></a></li>
<li><a href="09_harjoitus_9.html#uuden-karttatiiliruudukon-luominen"><strong>Uuden karttatiiliruudukon luominen</strong></a></li>
<li><a href="09_harjoitus_9.html#suomen-openstreetmap-tiestö"><strong>Suomen OpenStreetMap-tiestö</strong></a></li>
<li><a href="09_harjoitus_9.html#oman-karttatiiliruudukon-käyttöönotto"><strong>Oman karttatiiliruudukon käyttöönotto</strong></a></li>
<li><a href="09_harjoitus_9.html#paikallisen-karttatiiliruudukon-muodostaminen"><strong>Paikallisen karttatiiliruudukon muodostaminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="10_harjoitus_10.html#harjoitus-2.3-arkkitehtuuri-ja-käyttöönotto">HARJOITUS 2.3: ARKKITEHTUURI JA KÄYTTÖÖNOTTO</a>
<ul>
<li><a href="10_harjoitus_10.html#valmistautuminen-9"><strong>Valmistautuminen</strong></a></li>
<li><a href="10_harjoitus_10.html#yleistiedot-geoserverin-palvelimesta"><strong>Yleistiedot GeoServerin palvelimesta</strong></a></li>
<li><a href="10_harjoitus_10.html#image-processing--asetukset"><strong>Image Processing -asetukset</strong></a></li>
<li><a href="10_harjoitus_10.html#raster-access"><strong>Raster Access</strong></a></li>
<li><a href="10_harjoitus_10.html#geoserverin-loki"><strong>GeoServerin loki</strong></a></li>
<li><a href="10_harjoitus_10.html#rest-apin-toimintaa"><strong>REST API:n toimintaa</strong></a></li>
<li><a href="10_harjoitus_10.html#monitor-lisäosan-käyttö"><strong>Monitor-lisäosan käyttö</strong></a></li>
</ul></li>
<li class="has-sub"><a href="11_harjoitus_11.html#harjoitus-2.4-css-kuvaustekniikka">HARJOITUS 2.4: CSS-KUVAUSTEKNIIKKA</a>
<ul>
<li><a href="11_harjoitus_11.html#valmistautuminen-10"><strong>Valmistautuminen</strong></a></li>
<li><a href="11_harjoitus_11.html#css-tyylit"><strong>CSS-tyylit</strong></a></li>
<li><a href="11_harjoitus_11.html#tyylin-luominen"><strong>Tyylin luominen</strong></a></li>
<li><a href="11_harjoitus_11.html#aineiston-luokittelu"><strong>Aineiston luokittelu</strong></a></li>
<li><a href="11_harjoitus_11.html#tyylin-virittäminen"><strong>Tyylin virittäminen</strong></a></li>
<li><a href="11_harjoitus_11.html#luokkien-nimeäminen"><strong>Luokkien nimeäminen</strong></a></li>
<li><a href="11_harjoitus_11.html#mittakaavaperusteinen-näkyvyys"><strong>Mittakaavaperusteinen näkyvyys</strong></a></li>
<li><a href="11_harjoitus_11.html#tekstityksen-lisääminen"><strong>Tekstityksen lisääminen</strong></a></li>
<li><a href="11_harjoitus_11.html#kuvaustekniikan-soveltaminen"><strong>Kuvaustekniikan soveltaminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="12_harjoitus_12.html#harjoitus-2.5-pääsynhallinta">HARJOITUS 2.5: PÄÄSYNHALLINTA</a>
<ul>
<li><a href="12_harjoitus_12.html#geoserverin-yleiset-turvallisuusasetukset"><strong>GeoServerin yleiset turvallisuusasetukset</strong></a></li>
<li><a href="12_harjoitus_12.html#tunnistautuminen"><strong>Tunnistautuminen</strong></a></li>
<li><a href="12_harjoitus_12.html#uuden-roolin-ja-käyttäjän-luominen"><strong>Uuden roolin ja käyttäjän luominen</strong></a></li>
<li><a href="12_harjoitus_12.html#aineiston-käyttöoikeuksien-rajoittaminen"><strong>Aineiston käyttöoikeuksien rajoittaminen</strong></a></li>
<li><a href="12_harjoitus_12.html#aineiston-käyttäjäkohtaiset-käyttöoikeudet"><strong>Aineiston käyttäjäkohtaiset käyttöoikeudet</strong></a></li>
<li><a href="12_harjoitus_12.html#karttapalvelukohtaiset-oikeudet"><strong>Karttapalvelukohtaiset oikeudet</strong></a></li>
</ul></li>
<li class="has-sub"><a href="13_harjoitus_13.html#harjoitus-2.6-suodattimet">HARJOITUS 2.6: SUODATTIMET</a>
<ul>
<li><a href="13_harjoitus_13.html#valmistautuminen-11"><strong>Valmistautuminen</strong></a></li>
<li><a href="13_harjoitus_13.html#ominaisuustietosuodattimet"><strong>Ominaisuustietosuodattimet</strong></a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-2.1-wfs-palvelut" class="section level1">
<h1>HARJOITUS 2.1: WFS-PALVELUT</h1>
<p><strong>Harjoituksen sisältö</strong></p>
<p>Harjoituksessa tutustutaan WFS-karttapalvelujen asetuksiin ja toiminnallisuuteen.</p>
<p><strong>Harjoituksen tavoite</strong></p>
<p>Harjoituksen jälkeen opiskelija osaa muuttaa WFS-karttapalvelujen julkaisuasetukset ja käyttää WFS-T-karttapalvelua.</p>
<p><strong>Arvioitu kesto</strong></p>
<p>30 minuuttia.</p>
<div id="valmistautuminen-7" class="section level2">
<h2><strong>Valmistautuminen</strong></h2>
<p>GeoServeriin on lisätty storeja, joissa on vektoriaineistoja.</p>
</div>
<div id="ogc-standardit-1" class="section level2">
<h2><strong>OGC-standardit</strong></h2>
<p>Aiemmin tarkasteltiin Open Geospatial Consortiumin (OGC) määrittämien WMS- ja WCS-rajapintapalvelujen asetuksia. Web Feature Service (WFS) -latauspalvelu on myös OGC:n määrittelemä rajapintapalvelu, jonka kautta vektoriaineistoja ja niiden ominaisuustietoja voi ladata edelleen hyödynnettäväksi.</p>
</div>
<div id="wfs-asetukset" class="section level2">
<h2><strong>WFS-asetukset</strong></h2>
<p>WFS-palveluiden avulla voidaan käsitellä vektoriaineistoja sekä niiden geometria- ja attribuuttitietoja verkon yli.</p>
<p>Avaa <strong>Services → WFS</strong>. Heti näkymän alusta löytyy palvelun yleistiedot (<strong>Service Metadata</strong>).</p>
<p>WFS-kohtaiset asetukset löytyvät alempaa, josta määritellään, miten WFS-kohtaisia palvelupyyntöjä käsitellään ja miten niihin vastataan.</p>
</div>
<div id="tietomäärä-pyynnöissä" class="section level2">
<h2><strong>Tietomäärä pyynnöissä</strong></h2>
<p><strong>Maximum number of features</strong> ja <strong>Maximum number of features for preview</strong> estävät liian ison aineistomäärän lataamisen. Jos latauspyyntö sisältää paljon kohteita (features), niin vain osa niistä latautuu.</p>
<p>Toiminnon testaamista varten määrittele kyseisten ominaisuuksien arvoksi <strong>1</strong>.</p>
<p>Paina sitten <strong>Submit</strong>.</p>
<p>Katsele sen jälkeen <strong>tiesto</strong>-tasoa WFS-rajapinnan kautta Layer Previewin GML-esikatselun kauttatai esim. QGIS-sovelluksella.</p>
<div class="hint-box">
<p>Miten äsken määritellyt ominaisuudet ovat vaikuttaneet lopputulokseen? Miksi?</p>
</div>
<p>Esikatsele samaa <strong>tiesto</strong>-tasoa nyt käyttäen <strong>GML</strong>-linkkiä.</p>
<p><img src="img/harjoitus_8/image1.png" /></p>
<p><img src="img/harjoitus_8/image2.png" /></p>
<p>Palvelun vastaus (xml-muodossa) sisältää nyt vain yhden geometrian, kuten olimme määritelleet asetuksissa.</p>
<p>Palaa vielä <strong>Services → WFS</strong>-näkymään ja rastita <strong>Return bounding box with every feature</strong>. Esikatsele taas samaa tasoa ja vertaile sitä aiemman palvelupyynnön tulokseen. Tietyissä sovelluksissa voi olla tarpeen saada tiedot jokaisen paikkatietokohteen sijainnin rajauksesta (bounding box).</p>
<p>Tarkista tiesto-tason GML-esikatselusta, että GeoServerin lähettämä vastaus sisältää nyt myös geometrioita rajaavan suorakaiteen.</p>
<p><img src="img/harjoitus_8/image3.png" /></p>
<p>Palaa uudelleen <strong>Services → WFS</strong> -näkymään ja palauttaa oletuksiin <strong>Maximum number of features</strong>: <strong>1 000 000</strong> ja <strong>Maximum number of features for preview</strong>: <strong>50</strong>.</p>
<p>Paina <strong>Submit</strong>.</p>
<p>Voit vielä tarkistaa, että nyt GML-esikatselussa tulee vain 50:n kohteen geometriat, vaikka tiesto-tasolla on paljon enemmän paikkatietokohteita.</p>
<div class="hint-box">
<p>Psst! “Maximum number of features for preview” on tärkeä asetus, jolla saa rajattua WFS-pyyntöjen tuloksien määrää tason esikatselutilassa. Saat helposti tietokoneen jumiin, jos kaikki tason tiedot tulevat vastauksena yhtä aikaa.</p>
</div>
</div>
<div id="useiden-koordinaattijärjestelmien-määrittäminen" class="section level2">
<h2><strong>Useiden koordinaattijärjestelmien määrittäminen</strong></h2>
<p>GeoServer pystyy projisoimaan aineistoa ja palvelemaan sitä kaikissa yli 5000:ssa tuetussa koordinaattijärjestelmässä. On kuitenkin huomioitava, että palvelimessa käytössä olevat järjestelmät on määriteltävä käsin sen sijaan, että kaikki 5000+ koordinaattijärjestelmää tulisi ilmoitettua GetCapabilities-pyynnön kautta.</p>
<div class="hint-box">
<p>Psst! Tämä asetus vaikuttaa vain GetCapabilities-pyynnön sisältöön; projisointi onnistuu edelleen käyttämällä mitä tahansa client-järjestelmää (esim. paikkatieto-ohjelmistoa).</p>
</div>
<p>Määrittele <strong>Extra SRS codes for WFS capabilities generation</strong> -kentässä käytetyt koordinaattijärjestelmät pilkulla eroteltuina: <strong>4326, 3047, 3067</strong>.</p>
<div class="hint-box">
<p>Mitkä koordinaattijärjestelmät ovat kyseessä?</p>
</div>
<p>Voit tarkistaa nyt, että WFS-toiminnallisuuksien dokumentissa yllä mainitut koordinaattijärjestelmät ovat ilmoitettuna.</p>
<p>Paina <strong>GeoServer-logoa</strong> vasemmasta yläkulmasta (palaa siis web-käyttöliittymän etusivulle) ja sen jälkeen valitse sivun oikealta laidalta <strong>WFS</strong> → 1.1.0 tai <strong>2.0.0</strong>.</p>
<p>Etsimällä “<strong>EPSG</strong>” sivulta löydät EPSG-koodit WFS-palvelun dokumentaatiosta (xm-formaatissa):</p>
<p>Huomaa, ettei tämä asetus toimi WFS 1.0.0, sillä siinä ilmoitetaan EPSG-koodit vain tasokohtaisesti.</p>
<p><img src="img/harjoitus_8/image4.png" /></p>
</div>
<div id="service-levels" class="section level2">
<h2><strong>Service Levels</strong></h2>
<p>GeoServerissa voidaan julkaista vektoriaineisto editoitavaksi <strong>WFS-T (Transactional)</strong> -palvelun avulla.</p>
<p><strong>Service Level</strong> -valinnat määrittävät millaisen palvelutason WFS tarjoaa.</p>
<table>
<colgroup>
<col width="14%" />
<col width="85%" />
</colgroup>
<tbody>
<tr class="odd">
<td><h5 id="basic"><strong>Basic</strong></h5></td>
<td>Tarjoaa perustoiminnallisuuden: GetCapabilities, DescribeFeatureType ja GetFeature</td>
</tr>
<tr class="even">
<td><h5 id="transactional"><strong>Transactional</strong></h5></td>
<td>(WFS-T) perustoiminnallisuuden lisäksi transaktio-toiminto on käytettävissä</td>
</tr>
<tr class="odd">
<td><h5 id="complete"><strong>Complete</strong></h5></td>
<td>Lisää vielä LockFeature-tuen, joka estää paikkatietokohteiden (feature) muokkauksen sen jälkeen, kun toinen käyttäjä on jo aloittanut kohteiden muokkauksen</td>
</tr>
</tbody>
</table>
<p>Jätä asetus <strong>Complete</strong>-tasolle. GeoServer sallii oletuksena aineistojen muokkauksen vain admin-ryhmään kuuluville käyttäjille, eivätkä tunnistautumattomat käyttäjät pysty muokkaamaan aineistoja. <strong>Basic</strong>-tasoa voidaan käyttää, jos halutaan estää täysin aineistojen muokkaus WFS-T:n avulla.</p>
</div>
<div id="gml-asetukset" class="section level2">
<h2><strong>GML-asetukset</strong></h2>
<p><strong>GML</strong> on XML:ään perustuva kieli, jonka OGC on määrittänyt. GML käytetään mallintamaan geometriaelementtejä. GeoServer tuottaa vektoriaineistoja GML-muotoisina.</p>
<p>Erilaiset WFS-palvelun versiot palauttavat oletuksena eri GML-formaatit:</p>
<table style="width:53%;">
<colgroup>
<col width="30%" />
<col width="22%" />
</colgroup>
<tbody>
<tr class="odd">
<td><h5 id="wfs-1.0.0"><strong>WFS 1.0.0</strong></h5></td>
<td>GML 2</td>
</tr>
<tr class="even">
<td><h5 id="wfs-1.1.0"><strong>WFS 1.1.0</strong></h5></td>
<td>GML 3</td>
</tr>
<tr class="odd">
<td><h5 id="wfs-2.0.0"><strong>WFS 2.0.0</strong></h5></td>
<td>GML 3.2</td>
</tr>
</tbody>
</table>
<p>Jokaiselle GML-formaatille on mahdollista määritellä koordinaattijärjestelmäformaatti, joka tulee ottaa huomioon GML-tuloksessa. Tämä on tärkeä etenkin kun kehitetään WFS-palveluita hyödyntäviä sovelluksia.</p>
<p><strong>EPSG-KOODIT JA KOORDINAATIEN FORMAATIT GML-DOKUMENTISSA</strong></p>
<table>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>EPSG Code</strong></td>
<td><p>srsName=“EPSG:4326”</p>
<p>Koordinaatit formaatissa: longitude/latitude (x/y)</p></td>
</tr>
<tr class="even">
<td><strong>OGC HTTP URL</strong></td>
<td><p>srsName=“<a href="http://www.opengis.net/gml/srs/epsg.xml#4326%22">http://www.opengis.net/gml/srs/epsg.xml#4326”</a></p>
<p>Koordinaatit formaatissa: longitude/latitude (x/y)</p></td>
</tr>
<tr class="odd">
<td><strong>OGC Experimental URN</strong></td>
<td>srsName=“<a href="urn:x-ogc:def:crs:EPSG:4326" class="uri">urn:x-ogc:def:crs:EPSG:4326</a>”</td>
</tr>
<tr class="even">
<td><strong>OGC URN</strong></td>
<td><p>srsName=“<a href="urn:ogc:def:crs:EPSG" class="uri">urn:ogc:def:crs:EPSG</a>::4326”</p>
<p>Koordinaatit formaatissa: latitude/longitude (y/x)</p></td>
</tr>
<tr class="odd">
<td><strong>OGC HTTP URI</strong></td>
<td>srsName=“<a href="http://www.opengis.net/def/crs/EPSG/0/4326%22">http://www.opengis.net/def/crs/EPSG/0/4326”</a></td>
</tr>
</tbody>
</table>
<p>Esimerkiksi <strong>Lipas-alueet</strong>-taso GML2-esikatselusta (EPSG-koodi muodossa OGC HTTP URL):</p>
<p><img src="img/harjoitus_8/image5.png" /></p>
</div>
<div id="workspace-kohtaiset-asetukset" class="section level2">
<h2><strong>Workspace kohtaiset asetukset</strong></h2>
<p>Samalla tavalla kun WMS-palvelujen kanssa, myös WFS-asetuksia on mahdollista määrittää workspace-kohtaisesti. Esimerkiksi WFS-T toiminnallisuus voidaan sallia vain yhden workspacen kautta ja pääsynhallinnan avulla sallia vain tunnistetut käyttäjät muokkaamaan aineistoja.</p>
<p>Avaa <strong>Data → Workspaces</strong> ja valitse sitten <strong>helsinki</strong>-workspace. Rastita sitten <strong>Services → WFS</strong> ja paina sen jälkeen <strong>WFS</strong>-linkkiä.</p>
<p><img src="img/harjoitus_8/image6.png" /></p>
<p>Varmista, että <strong>Service Level</strong> asetus on <strong>Complete</strong>.</p>
<p><img src="img/harjoitus_8/image7.png" /></p>
<p>Paina sen jälkeen <strong>Submit</strong> (sivun lopussa).</p>
<p>Paina lopuksi vielä <strong>Save</strong> sivun alaosasta.</p>
<p>Workspace-kohtaisilla asetuksilla voidaan esim. rajoi</p>
<p>ttaa, missä koordinaattijärjestelmissä workspacen aineistot ovat saatavilla, tai poistaa WFS-T -palvelu tietyn workspacen aineistoista.</p>
</div>
<div id="editointi-wfs-t-palvelun-kautta" class="section level2">
<h2><strong>Editointi WFS-T-palvelun kautta</strong></h2>
<p>Yksi tärkeä ominaisuus WFS-palveluissa on mahdollisuus editoida vektoriaineistoja suoraan palvelimessa. WFS-T-palvelulle voidaan myös asettaa lukitus-mahdollisuus (<strong>Complete</strong> service-taso), joka on tarpeellinen tehdessä editointeja jaetulla aineistolla.</p>
<p>Editointia voidaan tehdä eri client-ohjelmistojen avulla, esimerkiksi QGISin tai web-sovellusten kautta.</p>
<p>Helpoiten saadaan testattua editointi-toiminnallisuutta QGIS-paikkatietojärjestelmän avulla.</p>
<p>Tarvitaan ensin WFS-palvelun osoite. Saat tämän esimerkiksi GeoServerin etusivulta, jonne pääset klikkaamalla vasemman yläkulman GeoServer-logoa. Klikkaa hiiren oikealla painikkeella etusivun <strong>Service Capabilities</strong>-paneelin WFS-kohdan alla olevaa linkkiä <strong>1.1.0</strong>.</p>
<p> Osoite on muotoa:</p>
<div class="note-box">
<p><a href="http://%3Cip.osoite%3E:8080/geoserver/ows?service=wfs&amp;version=1.1.0&amp;request=GetCapabilities" class="uri">http://%3Cip.osoite%3E:8080/geoserver/ows?service=wfs&amp;version=1.1.0&amp;request=GetCapabilities</a></p>
</div>
<p>GeoServerin oletusasetuksilla workspace-kohtaisen osoitteen saa lisäämällä osoitteeseen workspacen URI:n. Esimerkiksi helsinki-workspacen osoite olisi:</p>
<div class="note-box">
<p><a href="http://%3Cip.osoite%3E:8080/geoserver/ows?service=wfs&amp;version=1.1.0&amp;request=GetCapabilities" class="uri">http://%3Cip.osoite%3E:8080/geoserver/ows?service=wfs&amp;version=1.1.0&amp;request=GetCapabilities</a></p>
</div>
<p>Avaa QGIS työpöydän pikakuvakkeesta. Lisää uusi WFS-palvelu ja liitä URL-kenttään äsken kopioimasi osoite. Syötä myös käyttäjänimi (admin) sekä salasana (gispo).</p>
<p><img src="img/harjoitus_8/image8.png" /></p>
<p>Tarvittaessa, seuraa kouluttajan ohjeita <strong>QGISin</strong> käytössä. Yhdistä QGIS omaan WFS-karttapalveluusi, lisää karttaprojektiin <strong>lipas_kaikki_reitit</strong>-taso, jonka lisäsit aiemmin toisessa harjoituksessa. Editoi joitakin paikkatietokohteita ja tallenna muutokset.</p>
<p>Katso jälkeenpäin GeoServerin esikatselusta editoimasi kohteet ja totea, että muutokset ovat todella tallentuneet palvelimeen.</p>
</div>
<div id="muiden-wfs-palvelujen-hyödyntäminen-cascading-wfs" class="section level2">
<h2><strong>Muiden WFS-palvelujen hyödyntäminen (cascading WFS)</strong></h2>
<p>Samalla tavalla kun on mahdollista edelleen julkaista WMS-palveluja (<strong>cascading WMS</strong>), niin GeoServerin avulla voidaan myös edelleen julkaista WFS-palveluja (<strong>cascading WFS</strong>).</p>
<p>Lisää uusi store (<strong>Data → Stores → Add new Store</strong>), valitse <strong>Web Feature Server (NG)</strong> listalta.</p>
<p><img src="img/harjoitus_8/image9.png" /></p>
<p>Lisätään Lipas-WFS palvelu. Nimeä uusi vektori-store <strong>lipas_WFS</strong> ja laittaa <strong>WFS GetCapabilities URL</strong> arvoksi:</p>
<div class="note-box">
<p><a href="http://lipas.cc.jyu.fi/geoserver/lipas/ows?service=WFS&amp;REQUEST=Getcapabilities" class="uri">http://lipas.cc.jyu.fi/geoserver/lipas/ows?service=WFS&amp;REQUEST=Getcapabilities</a></p>
</div>
<p><img src="img/harjoitus_8/image10.png" /></p>
<p>Loput asetukset voit jättää oletusarvoihin. Paina sitten <strong>Save</strong>.</p>
<p>Uusi store sisältää karttatasoja, jotka on jaettu alkuperäisessä  WFS-palvelimessa:</p>
<p><img src="img/harjoitus_8/image11.png" /></p>
<p>Voit julkaista tasoja suoraan palvelusta. Julkaise esimerkiksi <strong>lipas_retkikartta_reitit</strong>. Paina oikealta <strong>Publish</strong> ja määrittele <strong>Bounding  Boxes</strong> totutulla tavalla.</p>
<p>Paina sitten <strong>Save</strong>.</p>
<p>Voit nyt esikatsella uutta tasoa (oletusnimeksi tulee <strong>retkikartta_reitit</strong>).</p>
<p><img src="img/harjoitus_8/image12.png" /></p>
<div class="hint-box">
<p>Psst! Mikäli aineisto on suuri ja maksimilatausaika on määritelty alhaiseksi, GeoServer voi tuottaa error-koodin kun aineistoa ei saada ladattua määrättyyn aikaan mennessä. Muuta tätä aikaa, mikäli aineisto on suuri.</p>
</div>

</div>
</div>
<p style="text-align: center;">
<a href="07_harjoitus_7.html"><button class="btn btn-default">Previous</button></a>
<a href="09_harjoitus_9.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Johdanto GeoServerin käyttöön</h5>
<span class="footer-version">v2024-04-24</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Oy.
<span class="footer-copyright-year">© 2024</span></h5>
<span class="footer-contact-info">Spaces Tripla
<br>Workery West
<br>Firdonkatu 2 T 63
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
