<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="HARJOITUS 1.6: RASTERIAINEISTOT | Johdanto GeoServerin käyttöön" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Oy" />

<meta name="date" content="2024-01-18" />


<meta name="description" content="HARJOITUS 1.6: RASTERIAINEISTOT | Johdanto GeoServerin käyttöön">

<title>HARJOITUS 1.6: RASTERIAINEISTOT | Johdanto GeoServerin käyttöön</title>




<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Johdanto GeoServerin käyttöön</h1></div>
<div class="abstract-sidebar"><p>Johdantokurssi GeoServerin käyttöön.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li class="has-sub"><a href="index.html#johdanto-geoserverin-käyttöön">JOHDANTO GEOSERVERIN KÄYTTÖÖN</a>
<ul>
<li><a href="index.html#tervetuloa-geoserver-kurssille">Tervetuloa GeoServer-kurssille!</a></li>
<li><a href="index.html#geoserverin-taustaa">GeoServerin taustaa</a></li>
<li><a href="index.html#lukuohje">Lukuohje</a></li>
<li><a href="index.html#mistä-lisätietoja">Mistä lisätietoja?</a></li>
<li><a href="index.html#virheet">Virheet</a></li>
<li><a href="index.html#lisenssi-ja-oikeudet">Lisenssi ja oikeudet</a></li>
</ul></li>
<li class="has-sub"><a href="01_harjoitus_1.html#harjoitus-1.1-asennus-ja-käyttöönotto">HARJOITUS 1.1: ASENNUS JA KÄYTTÖÖNOTTO</a>
<ul>
<li><a href="01_harjoitus_1.html#valmistautuminen"><strong>Valmistautuminen</strong></a></li>
<li class="has-sub"><a href="01_harjoitus_1.html#päävalikko"><strong>Päävalikko</strong></a>
<ul>
<li><a href="01_harjoitus_1.html#about-geoserver"><strong>About GeoServer</strong></a></li>
<li><a href="01_harjoitus_1.html#layer-preview"><strong>Layer Preview</strong></a></li>
<li><a href="01_harjoitus_1.html#service-capabilities-palvelutoiminnallisuudet"><strong>Service Capabilities (palvelutoiminnallisuudet)</strong></a></li>
<li><a href="01_harjoitus_1.html#demos"><strong>Demos</strong></a></li>
<li><a href="01_harjoitus_1.html#demo-requests"><strong>Demo requests</strong></a></li>
</ul></li>
<li><a href="01_harjoitus_1.html#srs-list-ja-reprojection-console"><strong>SRS List ja Reprojection console</strong></a></li>
<li><a href="01_harjoitus_1.html#wcs-request-builder"><strong>WCS request builder</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#harjoitus-1.2-geoserverin-web-käyttöliittymä">HARJOITUS 1.2: GEOSERVERIN WEB-KÄYTTÖLIITTYMÄ</a>
<ul>
<li><a href="02_harjoitus_2.html#valmistautuminen-1"><strong>Valmistautuminen</strong></a></li>
<li><a href="02_harjoitus_2.html#ylläpitäjän-käyttöliittymä"><strong>Ylläpitäjän käyttöliittymä</strong></a></li>
<li><a href="02_harjoitus_2.html#master--ja-administrator-käyttäjät"><strong>Master- ja Administrator-käyttäjät</strong></a></li>
<li class="has-sub"><a href="02_harjoitus_2.html#about-status--asetukset"><strong>About &amp; Status -asetukset</strong></a>
<ul>
<li><a href="02_harjoitus_2.html#contact-information"><strong>Contact Information</strong></a></li>
<li><a href="02_harjoitus_2.html#server-status"><strong>Server Status</strong></a></li>
<li><a href="02_harjoitus_2.html#geoserver-logs"><strong>GeoServer Logs</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#data-valikko"><strong>Data-valikko</strong></a>
<ul>
<li><a href="02_harjoitus_2.html#layer-preview-1"><strong>Layer Preview</strong></a></li>
<li><a href="02_harjoitus_2.html#workspaces"><strong>Workspaces</strong></a></li>
<li><a href="02_harjoitus_2.html#stores"><strong>Stores</strong></a></li>
<li><a href="02_harjoitus_2.html#layers"><strong>Layers</strong></a></li>
</ul></li>
<li><a href="02_harjoitus_2.html#layer-groups"><strong>Layer Groups</strong></a></li>
<li><a href="02_harjoitus_2.html#styles"><strong>Styles</strong></a></li>
<li><a href="02_harjoitus_2.html#services-1"><strong>Services</strong></a></li>
<li><a href="02_harjoitus_2.html#settings"><strong>Settings</strong></a></li>
<li><a href="02_harjoitus_2.html#tile-caching-1"><strong>Tile Caching</strong></a></li>
<li><a href="02_harjoitus_2.html#security-1"><strong>Security</strong></a></li>
</ul></li>
<li class="has-sub"><a href="03_harjoitus_3.html#harjoitus-1.3-vektoriaineistot">Harjoitus 1.3: VEKTORIAINEISTOT</a>
<ul>
<li><a href="03_harjoitus_3.html#valmistautuminen-2"><strong>Valmistautuminen</strong></a></li>
<li><a href="03_harjoitus_3.html#vektoriaineisto-storen-luominen"><strong>Vektoriaineisto Storen luominen</strong></a></li>
<li><a href="03_harjoitus_3.html#vektoritason-julkaiseminen"><strong>Vektoritason julkaiseminen</strong></a></li>
<li class="has-sub"><a href="03_harjoitus_3.html#data-asetukset"><strong>Data asetukset</strong></a>
<ul>
<li><a href="03_harjoitus_3.html#coordinate-reference-systems"><strong>Coordinate Reference Systems</strong></a></li>
<li><a href="03_harjoitus_3.html#bounding-boxes"><strong>Bounding Boxes</strong></a></li>
<li><a href="03_harjoitus_3.html#feature-type-details"><strong>Feature Type Details</strong></a></li>
</ul></li>
<li><a href="03_harjoitus_3.html#helsingin-tiestön-lisääminen"><strong>Helsingin tiestön lisääminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="04_harjoitus_4.html#harjoitus-1.4-kuvaustekniikan-perusteet-sld">HARJOITUS 1.4: KUVAUSTEKNIIKAN PERUSTEET (SLD)</a>
<ul>
<li><a href="04_harjoitus_4.html#valmistautuminen-3"><strong>Valmistautuminen</strong></a></li>
<li><a href="04_harjoitus_4.html#geoserverin-kuvaustekniikka"><strong>GeoServerin kuvaustekniikka</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikka"><strong>SLD-kuvaustekniikka</strong></a></li>
<li><a href="04_harjoitus_4.html#uuden-tyylin-luominen"><strong>Uuden tyylin luominen</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikan-käyttöönotto"><strong>SLD-kuvaustekniikan käyttöönotto</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-cookbook"><strong>SLD Cookbook</strong></a></li>
<li><a href="04_harjoitus_4.html#sld-kuvaustekniikan-muokkaaminen"><strong>SLD-kuvaustekniikan muokkaaminen</strong></a></li>
<li><a href="04_harjoitus_4.html#tiestön-tyylin-luominen"><strong>Tiestön tyylin luominen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="05_harjoitus_5.html#harjoitus-1.5-wms--ja-wcs-palvelut">HARJOITUS 1.5: WMS- JA WCS-PALVELUT</a>
<ul>
<li><a href="05_harjoitus_5.html#valmistautuminen-4"><strong>Valmistautuminen</strong></a></li>
<li><a href="05_harjoitus_5.html#ogc-standardit"><strong>OGC-standardit</strong></a></li>
<li><a href="05_harjoitus_5.html#yleiset-karttapalveluasetukset"><strong>Yleiset karttapalveluasetukset</strong></a></li>
<li><a href="05_harjoitus_5.html#wms"><strong>WMS</strong></a></li>
<li><a href="05_harjoitus_5.html#workspace-kohtaiset-palvelimen-asetukset"><strong>Workspace-kohtaiset palvelimen asetukset</strong></a></li>
<li><a href="05_harjoitus_5.html#wms-karttapalvelun-kuvan-dpi-resoluutio"><strong>WMS-karttapalvelun kuvan DPI-resoluutio</strong></a></li>
<li><a href="05_harjoitus_5.html#wcs"><strong>WCS</strong></a></li>
</ul></li>
<li class="has-sub"><a href="06_harjoitus_6.html#harjoitus-1.6-rasteriaineistot">HARJOITUS 1.6: RASTERIAINEISTOT</a>
<ul>
<li><a href="06_harjoitus_6.html#valmistautuminen-5"><strong>Valmistautuminen</strong></a></li>
<li><a href="06_harjoitus_6.html#rasteriaineiston-lisääminen"><strong>Rasteriaineiston lisääminen</strong></a></li>
<li><a href="06_harjoitus_6.html#ilmakuvan-lisääminen"><strong>Ilmakuvan lisääminen</strong></a></li>
<li><a href="06_harjoitus_6.html#image-mosaic"><strong>Image Mosaic</strong></a></li>
<li class="has-sub"><a href="06_harjoitus_6.html#layer-groups-1"><strong>Layer Groups</strong></a>
<ul>
<li><a href="06_harjoitus_6.html#ryhmätasojen-julkaisemisen-muoto"><strong>Ryhmätasojen julkaisemisen muoto</strong></a></li>
<li><a href="06_harjoitus_6.html#muiden-wms-palvelujen-hyödyntäminen-cascading-wms"><strong>Muiden WMS-palvelujen hyödyntäminen (cascading WMS)</strong></a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="07_harjoitus_7.html#harjoitus-1.7-paikkatietokannat">HARJOITUS 1.7: PAIKKATIETOKANNAT</a>
<ul>
<li><a href="07_harjoitus_7.html#valmistautuminen-6"><strong>Valmistautuminen</strong></a></li>
<li><a href="07_harjoitus_7.html#yhteyden-muodostaminen-paikkatietokantaan"><strong>Yhteyden muodostaminen paikkatietokantaan</strong></a></li>
<li><a href="07_harjoitus_7.html#postgis-tason-lisääminen"><strong>PostGIS-tason lisääminen</strong></a></li>
<li><a href="07_harjoitus_7.html#monikulmio--ja-viiva-tason-lisääminen-postgis-tietokannasta"><strong>Monikulmio- ja viiva-tason lisääminen PostGIS-tietokannasta</strong></a></li>
<li><a href="07_harjoitus_7.html#tasojen-oletustyylien-asettaminen"><strong>Tasojen oletustyylien asettaminen</strong></a></li>
<li><a href="07_harjoitus_7.html#sql-näkymät"><strong>SQL-näkymät</strong></a></li>
<li><a href="07_harjoitus_7.html#paikkatietotoiminnot-sql-näkymien-kautta"><strong>Paikkatietotoiminnot SQL-näkymien kautta</strong></a></li>
</ul></li>
<li class="has-sub"><a href="08_harjoitus_8.html#harjoitus-2.1-wfs-palvelut">HARJOITUS 2.1: WFS-PALVELUT</a>
<ul>
<li><a href="08_harjoitus_8.html#valmistautuminen-7"><strong>Valmistautuminen</strong></a></li>
<li><a href="08_harjoitus_8.html#ogc-standardit-1"><strong>OGC-standardit</strong></a></li>
<li><a href="08_harjoitus_8.html#wfs-asetukset"><strong>WFS-asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#tietomäärä-pyynnöissä"><strong>Tietomäärä pyynnöissä</strong></a></li>
<li><a href="08_harjoitus_8.html#useiden-koordinaattijärjestelmien-määrittäminen"><strong>Useiden koordinaattijärjestelmien määrittäminen</strong></a></li>
<li><a href="08_harjoitus_8.html#service-levels"><strong>Service Levels</strong></a></li>
<li><a href="08_harjoitus_8.html#gml-asetukset"><strong>GML-asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#workspace-kohtaiset-asetukset"><strong>Workspace kohtaiset asetukset</strong></a></li>
<li><a href="08_harjoitus_8.html#editointi-wfs-t-palvelun-kautta"><strong>Editointi WFS-T-palvelun kautta</strong></a></li>
<li><a href="08_harjoitus_8.html#muiden-wfs-palvelujen-hyödyntäminen-cascading-wfs"><strong>Muiden WFS-palvelujen hyödyntäminen (cascading WFS)</strong></a></li>
</ul></li>
<li class="has-sub"><a href="09_harjoitus_9.html#harjoitus-2.2-karttatiilipalvelut">HARJOITUS 2.2: KARTTATIILIPALVELUT</a>
<ul>
<li><a href="09_harjoitus_9.html#valmistautuminen-8"><strong>Valmistautuminen</strong></a></li>
<li><a href="09_harjoitus_9.html#tile-caching-2"><strong>Tile Caching</strong></a></li>
<li><a href="09_harjoitus_9.html#geowebcache-käyttöliittymä"><strong>GeoWebCache-käyttöliittymä</strong></a></li>
<li><a href="09_harjoitus_9.html#tasokohtaiset-asetukset"><strong>Tasokohtaiset asetukset</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiilien-esiluominen"><strong>Karttatiilien esiluominen</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiilien-kovalevyn-käyttö"><strong>Karttatiilien kovalevyn käyttö</strong></a></li>
<li><a href="09_harjoitus_9.html#karttatiiliruudukot"><strong>Karttatiiliruudukot</strong></a></li>
<li><a href="09_harjoitus_9.html#jhs180-mukainen-karttatiiliruudukko"><strong>JHS180 mukainen karttatiiliruudukko</strong></a></li>
<li><a href="09_harjoitus_9.html#uuden-karttatiiliruudukon-luominen"><strong>Uuden karttatiiliruudukon luominen</strong></a></li>
<li><a href="09_harjoitus_9.html#suomen-openstreetmap-tiestö"><strong>Suomen OpenStreetMap-tiestö</strong></a></li>
<li><a href="09_harjoitus_9.html#oman-karttatiiliruudukon-käyttöönotto"><strong>Oman karttatiiliruudukon käyttöönotto</strong></a></li>
<li><a href="09_harjoitus_9.html#paikallisen-karttatiiliruudukon-muodostaminen"><strong>Paikallisen karttatiiliruudukon muodostaminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="10_harjoitus_10.html#harjoitus-2.3-arkkitehtuuri-ja-käyttöönotto">HARJOITUS 2.3: ARKKITEHTUURI JA KÄYTTÖÖNOTTO</a>
<ul>
<li><a href="10_harjoitus_10.html#valmistautuminen-9"><strong>Valmistautuminen</strong></a></li>
<li><a href="10_harjoitus_10.html#yleistiedot-geoserverin-palvelimesta"><strong>Yleistiedot GeoServerin palvelimesta</strong></a></li>
<li><a href="10_harjoitus_10.html#image-processing--asetukset"><strong>Image Processing -asetukset</strong></a></li>
<li><a href="10_harjoitus_10.html#raster-access"><strong>Raster Access</strong></a></li>
<li><a href="10_harjoitus_10.html#geoserverin-loki"><strong>GeoServerin loki</strong></a></li>
<li><a href="10_harjoitus_10.html#rest-apin-toimintaa"><strong>REST API:n toimintaa</strong></a></li>
<li><a href="10_harjoitus_10.html#monitor-lisäosan-käyttö"><strong>Monitor-lisäosan käyttö</strong></a></li>
</ul></li>
<li class="has-sub"><a href="11_harjoitus_11.html#harjoitus-2.4-css-kuvaustekniikka">HARJOITUS 2.4: CSS-KUVAUSTEKNIIKKA</a>
<ul>
<li><a href="11_harjoitus_11.html#valmistautuminen-10"><strong>Valmistautuminen</strong></a></li>
<li><a href="11_harjoitus_11.html#css-tyylit"><strong>CSS-tyylit</strong></a></li>
<li><a href="11_harjoitus_11.html#tyylin-luominen"><strong>Tyylin luominen</strong></a></li>
<li><a href="11_harjoitus_11.html#aineiston-luokittelu"><strong>Aineiston luokittelu</strong></a></li>
<li><a href="11_harjoitus_11.html#tyylin-virittäminen"><strong>Tyylin virittäminen</strong></a></li>
<li><a href="11_harjoitus_11.html#luokkien-nimeäminen"><strong>Luokkien nimeäminen</strong></a></li>
<li><a href="11_harjoitus_11.html#mittakaavaperusteinen-näkyvyys"><strong>Mittakaavaperusteinen näkyvyys</strong></a></li>
<li><a href="11_harjoitus_11.html#tekstityksen-lisääminen"><strong>Tekstityksen lisääminen</strong></a></li>
<li><a href="11_harjoitus_11.html#kuvaustekniikan-soveltaminen"><strong>Kuvaustekniikan soveltaminen</strong></a></li>
</ul></li>
<li class="has-sub"><a href="12_harjoitus_12.html#harjoitus-2.5-pääsynhallinta">HARJOITUS 2.5: PÄÄSYNHALLINTA</a>
<ul>
<li><a href="12_harjoitus_12.html#geoserverin-yleiset-turvallisuusasetukset"><strong>GeoServerin yleiset turvallisuusasetukset</strong></a></li>
<li><a href="12_harjoitus_12.html#tunnistautuminen"><strong>Tunnistautuminen</strong></a></li>
<li><a href="12_harjoitus_12.html#uuden-roolin-ja-käyttäjän-luominen"><strong>Uuden roolin ja käyttäjän luominen</strong></a></li>
<li><a href="12_harjoitus_12.html#aineiston-käyttöoikeuksien-rajoittaminen"><strong>Aineiston käyttöoikeuksien rajoittaminen</strong></a></li>
<li><a href="12_harjoitus_12.html#aineiston-käyttäjäkohtaiset-käyttöoikeudet"><strong>Aineiston käyttäjäkohtaiset käyttöoikeudet</strong></a></li>
<li><a href="12_harjoitus_12.html#karttapalvelukohtaiset-oikeudet"><strong>Karttapalvelukohtaiset oikeudet</strong></a></li>
</ul></li>
<li class="has-sub"><a href="13_harjoitus_13.html#harjoitus-2.6-suodattimet">HARJOITUS 2.6: SUODATTIMET</a>
<ul>
<li><a href="13_harjoitus_13.html#valmistautuminen-11"><strong>Valmistautuminen</strong></a></li>
<li><a href="13_harjoitus_13.html#ominaisuustietosuodattimet"><strong>Ominaisuustietosuodattimet</strong></a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-1.6-rasteriaineistot" class="section level1">
<h1>HARJOITUS 1.6: RASTERIAINEISTOT</h1>
<p><strong>Harjoituksen sisältö</strong></p>
<p>Harjoituksessa lisätään rasteriaineistoja GeoServer-palvelimelle ja muokataan tason asetuksia WCS-palvelun julkistamista varten.</p>
<p><strong>Harjoituksen tavoite</strong></p>
<p>Harjoituksen jälkeen opiskelija osaa lisätä rasteriaineistoja ja tehdä välttämättömät asetukset aineiston julkaisemiseksi.</p>
<p><strong>Arvioitu kesto</strong></p>
<p>40 minuuttia.</p>
<div id="valmistautuminen-5" class="section level2">
<h2><strong>Valmistautuminen</strong></h2>
<p>Aiemmissa harjoituksissa on luotu <strong>helsinki</strong>-workspace, joihin on määritelty muun muassa vesileima näkyväksi.</p>
<p>GeoServerin palvelimen aineistohakemistoon on valmiiksi ladattu muutama rasteriaineisto: yksi korkeusmalli ja neljä ilmakuvaa Helsingin alueelta.</p>
</div>
<div id="rasteriaineiston-lisääminen" class="section level2">
<h2><strong>Rasteriaineiston lisääminen</strong></h2>
<p>Rasteriaineiston lisääminen GeoServeriin tapahtuu melko samalla tavalla kun aiemmissa harjoituksissa vektoriaineistojen kanssa. Ladataan nyt GeoServeriin käytettäväksi rasteriaineisto, jonka alkuperäinen formaatti on <strong>ArcGrid</strong> (ASCII-pohjainen rasteriformaatti). Rasteriaineisto on Maanmittauslaitoksen korkeusmalli Helsingin alueelta (ruutukoolla 2 m x 2 m).</p>
<p>Ensin meidän pitää luoda viitereferenssi aineistoon, jotta GeoServer tietäisi, missä aineisto sijaitsee fyysisesti. Muista, että tämä tapahtuu luomalla storeja.</p>
<p>Luo uusi store valitsemalla <strong>Stores → Add new Store</strong>. Paina sitten <strong>ArcGrid</strong> storen formaatiksi.</p>
<p>Valitse taas <strong>helsinki</strong>-workspace ja nimeä uusi store: <strong>hki_korkeusmalli_L4133A</strong>.</p>
<p>Selaa sitten kansioon <strong>/koulutus/korkeusmalli_2m/</strong> ja valitse tiedosto <strong>L4133A.asc</strong>.<br />
<img src="img/harjoitus_6/image1.png" /></p>
<p>Paina sitten <strong>Save</strong> ja sen jälkeen <strong>Publish</strong>.</p>
<p>Kuten aiemmin vektoriaineistojen luomisen yhteydessä, pääset nyt tason editointinäkymään. Tarkista yleisasetukset niin, että sekä <strong>Enabled</strong> että <strong>Advertised</strong> ovat valittuna.</p>
<p>Laita nimeksi <strong>korkeusmalli</strong> ja otsikoksi <strong>Helsingin korkeusmalli</strong> ja lisätiedoksi <strong>Korkeusmalli 2m – Maanmittauslaitos.</strong>
<img src="img/harjoitus_6/image2.png" /></p>
<p>Huomaa, että <strong>Coordinate Reference Systems</strong> -kohdassa, koordinaattijärjestelmä on määritelty väärin. Aineiston oikea järjestelmä on <strong>ETRS89 / ETRS-TM35FIN</strong> (<strong>EPSG:3067</strong>). Korjaa sitä käsin <strong>Declared SRS</strong> -kentässä ja valitse <strong>SRS handling</strong> kentästä <strong>Force declared</strong>. Käytä sen jälkeen pikalinkkejä määrittääksesi aineiston laajuuden.
<img src="img/harjoitus_6/image3.png" /></p>
<p>Paina sitten <strong>Save.</strong></p>
<p>Tarkista, että taso on <strong>Data → Layers</strong>-taulussa. Voit esikatsella uutta rasteritasoa <strong>Data → Layer Preview</strong> -ikkunan kautta.<br />
<img src="img/harjoitus_6/image4.png" /></p>
</div>
<div id="ilmakuvan-lisääminen" class="section level2">
<h2><strong>Ilmakuvan lisääminen</strong></h2>
<p>Samalla tavalla kun lisäsit edellisessä kohdassa ArcGrid-tiedoston voit lisätä GeoTIFF-aineistoja. </p>
<p>Seuraa edellisen kohdan ohjeita ja lisää samalta alueelta ilmakuva. GeoTIFF-tiedosto löytyy täältä: <strong>/koulutus/ilmakuvat_geotiff/L4133A.tif</strong>.</p>
<p>Nimeä seuraavasti:<br />
store: <strong>hki_ilmakuva<br />
</strong> taso: <strong>ilmakuva</strong></p>
<p>Ilmakuva esikatselussa:
<img src="img/harjoitus_6/image5.png" /></p>
</div>
<div id="image-mosaic" class="section level2">
<h2><strong>Image Mosaic</strong></h2>
<p>GeoServerin avulla voi julkaista useita rasteriaineistoja (esim. GeoTIFF-tiedostoja) yhtenä WMS-palveluna käyttämällä <strong>Image mosaic</strong> -formaattia.</p>
<p>Mosaiikin muodostaminen vaatii, että kaikki aineistot ovat samassa kansiossa ja tiedostoformaatissa sekä samassa koordinaattijärjestelmässä. Rasteriformaatti tulee olla tuettuna GeoServerissä, esim. GeoTIFF tai ArcGrid.</p>
<p>Tämä storen tyyppi on tarkoitettu käytettäväksi samantyyppisten rasteriaineistojen kanssa. Esimerkiksi useita ilmakuvia, jotka muodostavat mosaiikin suositellaan julkaistavaksi kyseisellä tavalla välttäen tasokohtaista julkaisemista.</p>
<p>Edellisen ilmakuvan kansiossa on muutamia ilmakuvia Helsingistä. Aineisto on ladattu Maanmittauslaitoksen aineistopalvelusta. Ne ovat <strong>GeoTIFF-</strong>formaatissa ja <strong>TM35FIN</strong>-<strong>koordinaattijärjestelmässä</strong> (<strong>EPSG:3067</strong>). Kuten nähdään kyseinen aineisto täyttää kaikki mosaiikin muodostamiseen vaatimukset.</p>
<p>Luo uusi store <strong>helsinki</strong> workspaceen. Valitse formaatiksi <strong>ImageMosaic - Image mosaicking plugin</strong>.</p>
<p>Selaa kansioon <strong>/koulutus/ilmakuvat_geotiff/</strong> ja paina <strong>OK</strong>. Täten, kaikki kuvat kansiossa yhdistetään yhteen ja mosaiikkia käsitellään sen jälkeen yhtenä tasona.</p>
<p>Anna nimi ja selitys esimerkiksi seuraavan kuvan mukaisella tavalla:
<img src="img/harjoitus_6/image6.png" /></p>
<p>Paina sitten <strong>Save</strong> ja sen jälkeen julkista taso painamalla <strong>Publish</strong>.</p>
<p>Laita tason nimeksi <strong>ilmakuvat_keskusta</strong> ja otsikoksi <strong>Helsingin keskustan ilmakuvat</strong>. Lisätiedoksi voit kirjoittaa esimerkiksi <strong>Helsingin ilmakuvat - Maanmittauslaitos 2014</strong>. Tarkista tason editointinäkymästä, että <strong>Enabled</strong> ja <strong>Advertised</strong> ovat rastitettuna.
<img src="img/harjoitus_6/image7.png" /></p>
<p>Huomaa, että GeoTIFF-tiedoston koordinaattijärjestelmän tiedot (EPSG:3067) ja aineiston laajuus on tässä määrittynyt oikein automaattisesti (oletusarvojen mukaisesti).
<img src="img/harjoitus_6/image8.png" /></p>
<div class="hint-box">
<p>Psst! Kuten aiemmin mainittiin, GeoServer pyrkii tulkitsemaan alkuperäisen aineiston koordinaattijärjestelmän alkuperäisistä tiedoista, joka tässä tapauksessa oli EPSG-muodossa.</p>
</div>
<p>Paina lopuksi <strong>Save</strong>.</p>
<p>Tarkista, että uusi taso löytyy <strong>Data → Layers</strong> -näkymältä. Voit myös esikatsella sitä tuttuun tapaan käyttäen <strong>Data → Layers Preview</strong>.
<img src="img/harjoitus_6/image9.png" /></p>
</div>
<div id="layer-groups-1" class="section level2">
<h2><strong>Layer Groups</strong></h2>
<p>GeoServerin tasoja ja/tai aiemmin luotuja tasoryhmiä voidaan ryhmittää. Tasoryhmissä voi yhdistää eri vektori- ja rasteriformaatteja. Yksi selkeä käyttötapaus on taustakartan julkaiseminen yhtenä WMS-tasopalveluna. </p>
<p>Luodaan nyt tasoryhmä käyttäen aiemmin palvelimelle lisättyjä <strong>ilmakuvat_keskusta-</strong>, <strong>rakennukset-</strong> ja <strong>tiesto</strong>-tasoja.</p>
<p>Valitse päävalikosta <strong>Data → Layer Groups</strong> ja sitten <strong>Add new layer group</strong>.</p>
<p>Laita ryhmätason nimeksi <strong>taustakartta</strong> ja otsikoksi <strong>Helsingin taustakartta</strong>. Lisää <strong>Abstract</strong> kentälle "Helsingin keskustan taustakartta".</p>
<div class="hint-box">
<p>Psst! Joissain selaimissa ääkkösten käyttö ei välttämättä onnistu. Vältä ääkkösten käyttöä tasojen nimissä ja otsikoissa.</p>
</div>
<p>Valitse <strong>helsinki</strong> workspace:ksi.</p>
<p>Selaa sivua alaspäin, paina <strong>Add Layer…</strong> ja lisää <strong>ilmakuvat_keskusta</strong>-taso. Taso on nyt lisätty <strong>Layers</strong>-listalle.</p>
<p>Paina <strong>Generate Bounds</strong> ja huomaa, kuinka tason alkuperäinen koordinaatistojärjestelmä ja laajuus on nyt määritettynä niille kuuluvissa kentissä. Pidetään ryhmätason järjestelmänä <strong>ETRS89 / TM35FIN</strong>.
<img src="img/harjoitus_6/image10.png" /></p>
<p>Lisää samalla tavalla Helsingin <strong>rakennukset</strong>- ja <strong>tiesto</strong>-tasot.</p>
<p>Huomaa, että voit järjestää tasot käyttämällä <strong>Drawing order</strong> -nuolia. Ylempänä oleva (sija 1) piirretään ensimmäiseksi; sen päälle piirretään seuraava taso, ja niin edelleen. Järjestele tasot tämän kuvan mukaan:</p>
<p>Varmista, että <strong>Default Style</strong> ovat rastittuina.</p>
<p>Paina lopulta uudelleen <strong>Generate Bounds</strong> päivittämään ryhmätason laajuustiedot, jotta myös uudet aineistot otetaan huomioon laajuustietojen määrittämisessä. Aina kun lisäät uutta aineistoa tasoryhmään tulisi painaa uudelleen <strong>Generate Bounds</strong> päivittääksesi ryhmätason laajuustiedot.</p>
<p>Paina vielä <strong>Save</strong>.</p>
<p>Voit esikatsella ryhmätasoa samalla tavalla kuin muitakin tasoja:
<img src="img/harjoitus_6/image11.png" />
<img src="img/harjoitus_6/image12.png" /></p>
<div id="ryhmätasojen-julkaisemisen-muoto" class="section level3">
<h3><strong>Ryhmätasojen julkaisemisen muoto</strong></h3>
<p>Palaa ryhmätason asetuksiin (<strong>Data → Layer Groups → taustakartta</strong>). Selaa alaspäin <strong>Mode</strong>-kohdalle asti. Tässä kohdassa voit valita erilaisia muotoja ryhmätason tasoille:</p>
<ul>
<li><p><strong>Single</strong>-ryhmätaso on nähtävissä yhtenä tasona, lähtötasoja ei voi erotella toisistaan</p></li>
<li><p><strong>Named Tree</strong> -ryhmätaso on nähtävissä ryhmänä ja yksittäisinä tasoina</p></li>
<li><p><strong>Container Tree</strong> -ryhmätaso on nähtävissä ainoastaan yksittäisinä tasoina</p></li>
<li><p><strong>Earth Observation Tree</strong> -ryhmätaso on tarkoitettu Earth Observation -aineistoa varten ja se on nähtävissä vain ryhmätason esikatselunäkymässä</p></li>
</ul>
<p>Pidä oletus <strong>Single</strong> valittuna. Se asettaa WMS-tasot näkyville yhtenä tasona.</p>
<p>Pidä loput asetukset oletuksina ja paina lopuksi <strong>Save</strong>. Ryhmätasoja voidaan esikatsella samalla tavalla kuin muita tasoja. Mene <strong>Layer Preview</strong> -näkymään ja avaa uuden ryhmätason esikatselutila OpenLayers-linkin avulla. Huomaa, että oletuskuvaustekniikka on käytössä. Tämän ryhmätason kuvaustekniikkaa parannetaan vielä myöhemmin.</p>
<p>Kun olet saanut ryhmätason valmiiksi, voit palata ryhmätason asetuksiin ja kokeilla muita <strong>Mode</strong>-asetuksia. Seuraavat esimerkkikuvat ovat QGISin WMS-palvelun työkalusta. .</p>
<p><strong>Mode → Single</strong> näyttää tältä:
<img src="img/harjoitus_6/image13.png" /></p>
<p>Tässä muodossa koko ryhmätaso on aina ladattavissa yhtenä pakettina, eikä sen alitasoista ole saatavilla tietoa erikseen tai niitä voida ladata erikseen.</p>
<p>Kun taas <strong>Mode →  Named Tree</strong> näyttää tältä:
<img src="img/harjoitus_6/image14.png" /></p>
<p>Tässä muodossa on mahdollista ladata tasoja yksitellen.</p>
</div>
<div id="muiden-wms-palvelujen-hyödyntäminen-cascading-wms" class="section level3">
<h3><strong>Muiden WMS-palvelujen hyödyntäminen (cascading WMS)</strong></h3>
<p>Rasteriaineisto voi olla peräisin myös muista WMS-palveluista. Tätä kutsutaan englanniksi <strong>cascading-</strong>tyyppiseksi ratkaisuksi. Käytännössä voidaan ketjuttaa WMS-tasoja toisista palveluista siten, että loppukäyttäjä ei huomaa eroa. Ketjuttaminen mahdollistaa esimerkiksi muiden paikkatietopalvelujen käytön GeoServeristämme. Heikkona puolena on se, että pitkistä ketjutuksista voi syntyä tilanne, jossa palvelun käytettävyys (vasteaika ja saatavuus) huononee oleellisesti.</p>
<p>Lisää uusi store (<strong>Data → Stores → Add new Store</strong>), valitse <strong>WMS</strong>-listalta.
<img src="img/harjoitus_6/image15.png" /></p>
<p>Lisätään Helsingin kaupungin avoimet paikkatietopalvelut GeoServeriimme uudeksi WMS-yhteydeksi (remote WMS connection). Kyseinen Helsingin kaupungin palvelu löytyy osoitteesta: </p>
<div class="note-box">
<p> <a href="https://kartta.hel.fi/ws/geoserver/avoindata/wms?REQUEST=Getcapabilities"><strong>https://kartta.hel.fi/ws/geoserver/avoindata/wms?REQUEST=Getcapabilities</strong></a>.</p>
</div>
<p>Täytä tiedot seuraavan kuvan mukaisesti, laita yllä oleva osoite <strong>Capabilities URL</strong> -kenttään:
<img src="img/harjoitus_6/image16.png" /></p>
<p>Loput asetukset voit jättää oletuksiin. Paina sitten <strong>Save</strong>.</p>
<p>Seuraavasti voit julkaista tasoja suoraan siitä palvelusta. Julkaise esimerkiksi <strong>Ajantasa_asemakaava</strong>.
<img src="img/harjoitus_6/image17.png" /></p>
<p>Uuden tason oletusasetukset ovat oikein. Selaa sivun loppuun ja paina <strong>Save</strong>.</p>
<p>Voit nyt esikatsella uutta tasoa samalla tavalla kuin aiemmin:
<img src="img/harjoitus_6/image18.png" /></p>
<div class="hint-box">
<p>Psst! Huomaa, että WMS-cascade-tasojen tyyliin tai sisältöön ei voida vaikuttaa, sillä ne ovat Helsingin kaupungin omassa palvelimessa.
Helsingin kaupungin paikkatietopalvelujen metatietoihin voit tutustua tässä: <a href="http://ptp.hel.fi/avoindata/aineistot/Aineistolista_wms_avoindata_ulkoverkko.html" class="uri">http://ptp.hel.fi/avoindata/aineistot/Aineistolista_wms_avoindata_ulkoverkko.html</a>.</p>
</div>

</div>
</div>
</div>
<p style="text-align: center;">
<a href="05_harjoitus_5.html"><button class="btn btn-default">Previous</button></a>
<a href="07_harjoitus_7.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Johdanto GeoServerin käyttöön</h5>
<span class="footer-version">v2024-01-18</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Oy.
<span class="footer-copyright-year">© 2023</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3 krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
