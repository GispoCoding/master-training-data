<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="8 Harjoitus 7: Paikkatietoanalyysit | Johdanto QGISin käyttöön - Harjoitukset" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Ltd." />

<meta name="date" content="2023-12-18" />


<meta name="description" content="8 Harjoitus 7: Paikkatietoanalyysit | Johdanto QGISin käyttöön - Harjoitukset">

<title>8 Harjoitus 7: Paikkatietoanalyysit | Johdanto QGISin käyttöön - Harjoitukset</title>




<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Johdanto QGISin käyttöön - Harjoitukset</h1></div>
<div class="abstract-sidebar"><p>Peruskurssi QGIS-ohjelmiston perusteisiin</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li><a href="index.html#johdanto-qgisin-käyttöön"><span class="toc-section-number">1</span> Johdanto QGISin käyttöön</a></li>
<li class="has-sub"><a href="01_harjoitus_1.html#harjoitus-1-qgisin-käyttöliittymä"><span class="toc-section-number">2</span> Harjoitus 1: QGISin käyttöliittymä</a>
<ul>
<li><a href="01_harjoitus_1.html#kurssimateriaalien-lataus"><span class="toc-section-number">2.1</span> Kurssimateriaalien lataus</a></li>
<li><a href="01_harjoitus_1.html#qgisin-käyttöliittymä"><span class="toc-section-number">2.2</span> QGISin käyttöliittymä</a></li>
<li><a href="01_harjoitus_1.html#qgis-käyttöliittymän-osat"><span class="toc-section-number">2.3</span> QGIS-käyttöliittymän osat</a></li>
<li class="has-sub"><a href="01_harjoitus_1.html#kokeile-itse"><span class="toc-section-number">2.4</span> Kokeile itse</a>
<ul>
<li><a href="01_harjoitus_1.html#attribuuttitaulu"><span class="toc-section-number">2.4.1</span> Attribuuttitaulu</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#harjoitus-2-paikkatietoaineistot-ja--palvelut"><span class="toc-section-number">3</span> Harjoitus 2: Paikkatietoaineistot ja -palvelut</a>
<ul>
<li><a href="02_harjoitus_2.html#harjoituksen-sisältö"><span class="toc-section-number">3.1</span> Harjoituksen sisältö</a></li>
<li><a href="02_harjoitus_2.html#harjoituksen-tavoite"><span class="toc-section-number">3.2</span> Harjoituksen tavoite</a></li>
<li><a href="02_harjoitus_2.html#valmistautuminen"><span class="toc-section-number">3.3</span> Valmistautuminen</a></li>
<li><a href="02_harjoitus_2.html#wms-palvelun-lisääminen"><span class="toc-section-number">3.4</span> WMS-palvelun lisääminen</a></li>
<li><a href="02_harjoitus_2.html#wfs-palvelun-lisääminen"><span class="toc-section-number">3.5</span> WFS-palvelun lisääminen</a></li>
<li><a href="02_harjoitus_2.html#lisätehtävä-wfs-rajapintapalvelun-kysely-ja-suodatus-sql-lausekkeella"><span class="toc-section-number">3.6</span> Lisätehtävä: WFS-rajapintapalvelun kysely ja suodatus SQL-lausekkeella</a></li>
</ul></li>
<li class="has-sub"><a href="03_harjoitus_3.html#harjoitus-3-paikkatietoaineiston-visualisointi"><span class="toc-section-number">4</span> Harjoitus 3: Paikkatietoaineiston visualisointi</a>
<ul>
<li><a href="03_harjoitus_3.html#harjoituksen-sisältö-1"><span class="toc-section-number">4.1</span> Harjoituksen sisältö</a></li>
<li><a href="03_harjoitus_3.html#harjoituksen-tavoite-1"><span class="toc-section-number">4.2</span> Harjoituksen tavoite</a></li>
<li><a href="03_harjoitus_3.html#valmistautuminen-1"><span class="toc-section-number">4.3</span> Valmistautuminen</a></li>
<li><a href="03_harjoitus_3.html#vektoriaineistojen-visualisointi"><span class="toc-section-number">4.4</span> Vektoriaineistojen visualisointi</a></li>
<li><a href="03_harjoitus_3.html#viiva--ja-monikulmioaineiston-visualisointi"><span class="toc-section-number">4.5</span> Viiva- ja monikulmioaineiston visualisointi</a></li>
<li><a href="03_harjoitus_3.html#lisätehtävä-monikulmioaineiston-edistynyt-visualisointi"><span class="toc-section-number">4.6</span> Lisätehtävä: Monikulmioaineiston edistynyt visualisointi</a></li>
</ul></li>
<li class="has-sub"><a href="04_harjoitus_4.html#harjoitus-4-paikkatietoaineiston-nimiöinti-ja-luokittelu"><span class="toc-section-number">5</span> Harjoitus 4: Paikkatietoaineiston nimiöinti ja luokittelu</a>
<ul>
<li><a href="04_harjoitus_4.html#harjoituksen-sisältö-2"><span class="toc-section-number">5.1</span> Harjoituksen sisältö</a></li>
<li><a href="04_harjoitus_4.html#harjoituksen-tavoite-2"><span class="toc-section-number">5.2</span> Harjoituksen tavoite</a></li>
<li><a href="04_harjoitus_4.html#valmistautuminen-2"><span class="toc-section-number">5.3</span> Valmistautuminen</a></li>
<li><a href="04_harjoitus_4.html#nimiöt"><span class="toc-section-number">5.4</span> Nimiöt</a></li>
<li><a href="04_harjoitus_4.html#nimiöiden-tyyli--ja-yleisasetukset"><span class="toc-section-number">5.5</span> Nimiöiden tyyli- ja yleisasetukset</a></li>
<li><a href="04_harjoitus_4.html#nimiön-tekstityyli"><span class="toc-section-number">5.6</span> Nimiön tekstityyli</a></li>
<li><a href="04_harjoitus_4.html#nimiöinnit-viivatasoilla"><span class="toc-section-number">5.7</span> Nimiöinnit viivatasoilla</a></li>
<li><a href="04_harjoitus_4.html#vektoriaineiston-luokittelut"><span class="toc-section-number">5.8</span> Vektoriaineiston luokittelut</a></li>
<li><a href="04_harjoitus_4.html#lisätehtävä-nimiöiden-piirtäminen"><span class="toc-section-number">5.9</span> Lisätehtävä: nimiöiden piirtäminen</a></li>
</ul></li>
<li class="has-sub"><a href="05_harjoitus_5.html#harjoitus-5-karttatuloste"><span class="toc-section-number">6</span> Harjoitus 5: Karttatuloste</a>
<ul>
<li><a href="05_harjoitus_5.html#harjoituksen-sisältö-3"><span class="toc-section-number">6.1</span> Harjoituksen sisältö</a></li>
<li><a href="05_harjoitus_5.html#harjoituksen-tavoite-3"><span class="toc-section-number">6.2</span> Harjoituksen tavoite</a></li>
<li><a href="05_harjoitus_5.html#valmistautuminen-3"><span class="toc-section-number">6.3</span> Valmistautuminen</a></li>
<li><a href="05_harjoitus_5.html#karttatuloste"><span class="toc-section-number">6.4</span> Karttatuloste</a></li>
<li><a href="05_harjoitus_5.html#lisätehtävä-kartta-atlas"><span class="toc-section-number">6.5</span> Lisätehtävä: kartta-atlas</a></li>
</ul></li>
<li class="has-sub"><a href="06_harjoitus_6.html#harjoitus-6-paikkatietoaineiston-editointi"><span class="toc-section-number">7</span> Harjoitus 6: Paikkatietoaineiston editointi</a>
<ul>
<li><a href="06_harjoitus_6.html#harjoituksen-sisältö-4"><span class="toc-section-number">7.1</span> Harjoituksen sisältö</a></li>
<li><a href="06_harjoitus_6.html#harjoituksen-tavoite-4"><span class="toc-section-number">7.2</span> Harjoituksen tavoite</a></li>
<li><a href="06_harjoitus_6.html#valmistautuminen-4"><span class="toc-section-number">7.3</span> Valmistautuminen</a></li>
<li><a href="06_harjoitus_6.html#vektoriaineiston-geopackage-luominen"><span class="toc-section-number">7.4</span> Vektoriaineiston (GeoPackage) luominen</a></li>
<li><a href="06_harjoitus_6.html#pohjakartan-lisääminen"><span class="toc-section-number">7.5</span> Pohjakartan lisääminen</a></li>
<li><a href="06_harjoitus_6.html#digitoinnin-aloittaminen"><span class="toc-section-number">7.6</span> Digitoinnin aloittaminen</a></li>
<li><a href="06_harjoitus_6.html#lisätehtävä-cad-digitointi"><span class="toc-section-number">7.7</span> Lisätehtävä: CAD-digitointi</a></li>
<li><a href="06_harjoitus_6.html#lisätehtävä-ominaisuustietojen-lisääminen"><span class="toc-section-number">7.8</span> Lisätehtävä: ominaisuustietojen lisääminen</a></li>
</ul></li>
<li class="has-sub"><a href="07_harjoitus_7.html#harjoitus-7-paikkatietoanalyysit"><span class="toc-section-number">8</span> Harjoitus 7: Paikkatietoanalyysit</a>
<ul>
<li><a href="07_harjoitus_7.html#harjoituksen-sisältö-5"><span class="toc-section-number">8.1</span> Harjoituksen sisältö</a></li>
<li><a href="07_harjoitus_7.html#harjoituksen-tavoite-5"><span class="toc-section-number">8.2</span> Harjoituksen tavoite</a></li>
<li><a href="07_harjoitus_7.html#valmistautuminen-5"><span class="toc-section-number">8.3</span> Valmistautuminen</a></li>
<li><a href="07_harjoitus_7.html#vektorianalyysit"><span class="toc-section-number">8.4</span> Vektorianalyysit</a></li>
</ul></li>
<li class="has-sub"><a href="08_harjoitus_8.html#harjoitus-8-qgisin-lisäosat"><span class="toc-section-number">9</span> Harjoitus 8: QGISin lisäosat</a>
<ul>
<li><a href="08_harjoitus_8.html#harjoituksen-sisältö-6"><span class="toc-section-number">9.1</span> Harjoituksen sisältö</a></li>
<li><a href="08_harjoitus_8.html#harjoituksen-tavoite-6"><span class="toc-section-number">9.2</span> Harjoituksen tavoite</a></li>
<li><a href="08_harjoitus_8.html#valmistautuminen-6"><span class="toc-section-number">9.3</span> Valmistautuminen</a></li>
<li><a href="08_harjoitus_8.html#lisäosien-hallinta"><span class="toc-section-number">9.4</span> Lisäosien hallinta</a></li>
<li><a href="08_harjoitus_8.html#quickmapservices"><span class="toc-section-number">9.5</span> QuickMapServices</a></li>
<li><a href="08_harjoitus_8.html#quickosm"><span class="toc-section-number">9.6</span> QuickOSM</a></li>
<li><a href="08_harjoitus_8.html#lisätehtävä-qgis2threejs"><span class="toc-section-number">9.7</span> Lisätehtävä: Qgis2threejs</a></li>
<li><a href="08_harjoitus_8.html#lisätehtävä-qgis2web"><span class="toc-section-number">9.8</span> Lisätehtävä: Qgis2web</a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-7-paikkatietoanalyysit" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Harjoitus 7: Paikkatietoanalyysit</h1>
<div id="harjoituksen-sisältö-5" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Harjoituksen sisältö</h2>
<p>Harjoituksessa tutustutaan QGISin erilaisiin paikkatietoanalyyseihin.</p>
</div>
<div id="harjoituksen-tavoite-5" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Harjoituksen tavoite</h2>
<p>Koulutettava oppii käyttämään eri aineistoille tarkoitettuja paikkatietoanalyysejä tarkoituksenmukaisesti.</p>
</div>
<div id="valmistautuminen-5" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Valmistautuminen</h2>
<p>Luo uusi QGIS-projekti ja tallenna se nimellä (<strong>Projekti → Tallenna nimellä…) “QGIS_harjoitus_7”</strong>.
Lisää projektiin seuraavat tasot:</p>
<ul>
<li><p><strong>…/Harjoitus 7/HallintoAlue.shp</strong></p></li>
<li><p><strong>…/Harjoitus 7/NaturaKohde.shp</strong></p></li>
</ul>
<p>Voit asettaa HallintoAlue-monikulmion täytevärin pois ja saada siten NaturaKohde-aineiston paremmin näkyviin:</p>
<p><img src="img/harjoitus_7/image22.gif" /></p>
<p>Karttanäkymä näyttää nyt kunkin väriasetuksia lukuunottamatta tältä:</p>
<p><img src="img/harjoitus_7/image18.png" /></p>
<p>Tarkista projektisi koordinaattijärjestelmän asetukset <strong>Projekti → Ominaisuudet → Koordinaattijärjestelmä</strong> -välilehdessä tai klikkaamalla QGISin oikeasta alareunasta, jossa on kirjaimet EPSG ja nelinumeroinen koodi.</p>
<p><img src="img/harjoitus_7/image2.png" /></p>
<p>Molemmilla tavoilla saat auki projektin koordinaattijärjestelmän määrityslomakkeen.
Tarkista, että järjestelmä on ETRS89 / ETRS-TM35FIN.
Muista, että voit lisätä ongelmitta projektiisi aineistoja eri karttaprojektioissa.
Voit tarkistaa myös tasojesi koordinaattijärjestelmän valitsemalla avaamalla tason ominaisuudet ja valitsemalla <strong>Informaatio</strong> tai <strong>Lähde</strong> välilehden.
Kummastakin löydät aineiston koordinaattijärjestelmän.
Monet analyysityökalut eivät toimi jos analyysin lähtöaineistot eivät ole samassa koordinaattijärjestelmässä.</p>
<div class="hint-box">
<p>Huomautus GK-koordinaatiston EPSG-koodeista!</p>
<p>Suomalaiset koordinaattijärjestelmät (vanhat ja uudet) ovat pääosin hyvin tuettuina QGIS-ohjelmistossa.
On kuitenkin huomautettava, että EPSG-määrittelyissä on lievää epäjohdonmukaisuutta.
Esimerkiksi tarkemmat GK-koordinaattijärjestelmän koodit löytyvät EPSG:n luettelosta kahteen kertaan: EPSG:3126 – EPSG:3138 koodeilla löytyvät koordinaattijärjestelmät ETRS-GK19FIN - ETRS-GK31FIN.
Nämä ovat kuitenkin “virheellisiä”, keskimeridiaanin koordinaatti on aina 500 000.</p>
<p>OIKEAT EPSG-koodit: EPSG:3873 - EPSG:3885</p>
<p>VIRHEELLISET EPSG-koodit: EPSG:3126 - EPSG:3138</p>
</div>
</div>
<div id="vektorianalyysit" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Vektorianalyysit</h2>
<p>Tässä harjoituksessa selvitetään Natura-alueiden pinta-ala kunnittain.
Lyhyesti harjoituksen kulku on:</p>
<p>- Tehdään spatiaalinen analyysi kunta- ja Natura-aineiston kanssa, jossa leikataan Natura-alueet kunnittain, jotta Natura-alueisiin saadaan kunta-aineiston sisältämät tiedot</p>
<p>- Yhdistetään Natura-alueet kunnittain ja lasketaan niiden pinta-ala</p>
<p>Seuraavaksi lähdemme käsittelemään aineistoja <strong>Vektori</strong>-ylämenusta, josta löytyvät ensisijaiset työkalut vektorianalyysien toteuttamiseen:</p>
<p><img src="img/harjoitus_7/image10.png" /></p>
<p>Käynnistä <strong>Ristiinleikkaus (intersection…)</strong>-työkalu <strong>Geoprosessointi</strong>-valikosta.
Määrittele syötetasoksi NaturaKohde ja leikkaavaksi tasoksi HallintoAlue-aineisto. Aineistossa voi olla geometriavirheitä, joten suodatetaan ne pois analyysista. Paina syötetason vierestä Asetukset <img src="img/harjoitus_7/image23.png" /> ja valitse <strong>Invalid feature filtering</strong> asetukseksi “Skip (Ignore) features with invalid geometries.Näin analyysi ei lopu, vaikka aineistossa on virheellisiä kohteita.
Teemme tälle aineistolle vielä toisen analyysin, joten voit luoda tilapäisen tason:</p>
<p><img src="img/harjoitus_7/image15.png" /></p>
<p>Suorita analyysi painamalla Suorita ja paina sen jälkeen <strong>Sulje</strong>.
Analyysi luo uuden väliaikaisen tulostason nimeltä <strong>Ristiinleikkaus (intersection)</strong>.
Karttaikkunassa aineisto näyttää samalta kuin alkuperäinen aineisto.</p>
<p>Vertaile tasojen (<strong>NaturaKohde</strong> ja <strong>Ristiinleikkaus (intersection)</strong>) ominaisuustietoja.
Mitä huomaat?
Voit aktivoida myös <strong>Näytä kohteiden lukumäärä</strong> -toiminnon (paina hiiren oikealla näppäimellä tason nimen päällä Tasoluettelossa) katsoaksesi onko aineiston lukumäärä sama.</p>
<p>Analyysin tuloksena ristiinleikatussa aineistossa tulisi olla enemmän kohteita ja ominaisuustietotaulukossa HallintoAlue-aineiston sarakkeet lisänä.</p>
<p><img src="img/harjoitus_7/image24.gif" /></p>
<p>Koska saman kunnan alueella voi olla usempia eri Natura-alueita, seuraavaksi siis yhdistämme eri kuntien alueella olevat alueet <strong>Sulauta</strong>-työkalun avulla.
Valitse työkalu <strong>Vektori → Geoprosessointi → Sulauta</strong>.</p>
<p>Valitse syötetasoksi aiemmin tehty Ristiinleikkaus-taso ja valitse sulautuksen perusteena oleva sarake painamalla Dissolve fields kohdasta <img src="img/harjoitus_7/image21.png" />.
Valitse ja laita täppä <strong>Kunta</strong> sarakkeeseen ja paina oikealta <strong>OK</strong>.
Sarakkeen pitäisi tulla harmaana Dissolve fields valinnaksi.</p>
<p><img src="img/harjoitus_7/image16.png" /></p>
<p>Paina <strong>Suorita</strong> ja sitten <strong>Sulje</strong>.
Tarkista taas kuinka paljon aineistossa on kohteita.
Voit myös visualisoida aineiston esimerkiksi maakunnittain avaamalla <strong>kuvaustekniikan</strong> ja valitsemalla symbolin tyypiksi <strong>Luokiteltu</strong>, vaihda arvokenttään <strong>“Maaku_ni1”</strong> ja paina alareunasta <strong>Luokittele</strong> ja <strong>OK</strong>.</p>
<p><img src="img/harjoitus_7/image19.png" /></p>
<p>Lopuksi voimme laskea, kuinka monta neliömetriä kullakin kunnalla on suojeltu Natura-alueena.
Avaa sulautetun tason ominaisuustietotaulukko ja laita taso editoitavaksi.
Avaa <strong>Kentän arvojen laskin</strong>-työkalua.
Luo uusi kenttä, jossa on kunnan Natura-alueiden pinta-ala neliökilometreinä <strong>$area</strong> funktion avulla.Voit antaa kentän tyypiksi desimaalinumero (reaali).
Voit laskea pinta-alan neliökilometreinä jakolaskun avulla jakamalla funktion 1 000 000.</p>
<p>Missä kunnassa tai maakunnassa on eniten suojeltuja alueita?</p>
<p><img src="img/harjoitus_7/image20.png" /></p>
<div class="note-box">
<p><strong>Psst! Muista tallentaa QGIS-projekti harjoituksen lopuksi.</strong></p>
</div>

</div>
</div>
<p style="text-align: center;">
<a href="06_harjoitus_6.html"><button class="btn btn-default">Previous</button></a>
<a href="08_harjoitus_8.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Johdanto QGISin käyttöön - Harjoitukset</h5>
<span class="footer-version">v2023-12-18</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Oy.
<span class="footer-copyright-year">© 2023</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3 krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
