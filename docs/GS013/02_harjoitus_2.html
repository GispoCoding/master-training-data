<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Harjoitus 2: Taulukosta kartalle | Tilastot ja analyysit QGISillä" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Oy." />

<meta name="date" content="2024-04-24" />


<meta name="description" content="Harjoitus 2: Taulukosta kartalle | Tilastot ja analyysit QGISillä">

<title>Harjoitus 2: Taulukosta kartalle | Tilastot ja analyysit QGISillä</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Tilastot ja analyysit QGISillä</h1></div>
<div class="abstract-sidebar"><p>Jatkokurssi QGISin käytöstä.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li class="has-sub"><a href="index.html#tilastot-ja-analyysit-qgisillä">Tilastot ja analyysit QGISillä</a>
<ul>
<li><a href="index.html#tervetuloa-qgis-jatkokurssille">Tervetuloa QGIS-jatkokurssille!</a></li>
<li><a href="index.html#kurssimateriaalien-lataaminen">Kurssimateriaalien lataaminen</a></li>
<li><a href="index.html#lukuohje">Lukuohje</a></li>
<li><a href="index.html#mistä-lisätietoja">Mistä lisätietoja?</a></li>
<li><a href="index.html#virheet">Virheet</a></li>
<li><a href="index.html#lisenssi-ja-oikeudet">Lisenssi ja oikeudet</a></li>
</ul></li>
<li class="has-sub"><a href="01_harjoitus_1.html#harjoitus-1-qgis-käyttöliittymän-konfigurointi">Harjoitus 1: QGIS-käyttöliittymän konfigurointi</a>
<ul>
<li><a href="01_harjoitus_1.html#valmistautuminen">Valmistautuminen</a></li>
<li><a href="01_harjoitus_1.html#käyttöliittymän-räätälöinti">Käyttöliittymän räätälöinti</a></li>
<li><a href="01_harjoitus_1.html#muokkauksen-yleisasetukset">Muokkauksen yleisasetukset</a></li>
<li><a href="01_harjoitus_1.html#käyttäjäprofiilit">Käyttäjäprofiilit</a></li>
<li><a href="01_harjoitus_1.html#pikanäppäimet">Pikanäppäimet</a></li>
<li><a href="01_harjoitus_1.html#taustakarttoja-lisäosien-avulla">Taustakarttoja lisäosien avulla</a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#harjoitus-2-taulukosta-kartalle">Harjoitus 2: Taulukosta kartalle</a>
<ul>
<li><a href="02_harjoitus_2.html#valmistautuminen-1">Valmistautuminen</a></li>
<li><a href="02_harjoitus_2.html#pisteet-tekstitiedostosta-kartalle">Pisteet tekstitiedostosta kartalle</a></li>
<li><a href="02_harjoitus_2.html#ilman-geometriaa-olevan-taulukon-tuominen">Ilman geometriaa olevan taulukon tuominen</a></li>
<li><a href="02_harjoitus_2.html#taulukon-kenttien-tyypin-muokkaaminen">Taulukon kenttien tyypin muokkaaminen</a></li>
<li><a href="02_harjoitus_2.html#taulukkotiedon-liittäminen-geometriaan">Taulukkotiedon liittäminen geometriaan</a></li>
</ul></li>
<li class="has-sub"><a href="03_harjoitus_3.html#harjoitus-3-vektorianalyysi">Harjoitus 3: Vektorianalyysi</a>
<ul>
<li><a href="03_harjoitus_3.html#valmistautuminen-2">Valmistautuminen</a></li>
<li><a href="03_harjoitus_3.html#vektorianalyysi">Vektorianalyysi</a></li>
<li><a href="03_harjoitus_3.html#tilastot">Tilastot</a></li>
<li><a href="03_harjoitus_3.html#alueellisten-summien-laskeminen-ja-aggregointi">Alueellisten summien laskeminen ja aggregointi</a></li>
<li><a href="03_harjoitus_3.html#vaaralliset-tieristeykset">Vaaralliset tieristeykset</a></li>
<li><a href="03_harjoitus_3.html#etsi-omia-analyysityökaluja">Etsi omia analyysityökaluja</a></li>
</ul></li>
<li class="has-sub"><a href="04_harjoitus_4.html#harjoitus-4-graafinen-mallintaja">Harjoitus 4: Graafinen mallintaja</a>
<ul>
<li><a href="04_harjoitus_4.html#valmistautuminen-3">Valmistautuminen</a></li>
<li><a href="04_harjoitus_4.html#graafisen-mallintajan-toiminnot">Graafisen mallintajan toiminnot</a></li>
<li><a href="04_harjoitus_4.html#prosessin-laatiminen-ja-testaus">Prosessin laatiminen ja testaus</a></li>
<li><a href="04_harjoitus_4.html#tallennetun-prosessin-käyttöönotto">Tallennetun prosessin käyttöönotto</a></li>
</ul></li>
<li class="has-sub"><a href="05_harjoitus_5.html#harjoitus-5-luokittelu-heatmap-ja-diagrammit">Harjoitus 5: Luokittelu, heatmap ja diagrammit</a>
<ul>
<li><a href="05_harjoitus_5.html#valmistautuminen-4">Valmistautuminen</a></li>
<li><a href="05_harjoitus_5.html#pistemäisen-aineiston-luokittelu">Pistemäisen aineiston luokittelu</a></li>
<li><a href="05_harjoitus_5.html#heatmap">Heatmap</a></li>
<li><a href="05_harjoitus_5.html#diagrammit">Diagrammit</a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-2-taulukosta-kartalle" class="section level1">
<h1>Harjoitus 2: Taulukosta kartalle</h1>
<p><strong>Harjoituksen sisältö</strong></p>
<p>Harjoituksessa tuodaan koordinaatteja sisältävä CSV-tekstitiedosto kartalle, muokataan kenttien tyyppiä ja liitetään taulukkomuotoista dataa olemassa olevaan paikkatietoaineistoon.</p>
<p><strong>Harjoituksen tavoite</strong></p>
<p>Koulutettava oppii tuomaan sekä geometrian sisältäviä että puhtaita attribuuttitaulukoita QGISiin sekä käsittelemään yleisimpiä ongelmia taulukoiden tuonnissa.</p>
<p><strong>Arvioitu kesto</strong></p>
<p>30 minuuttia.</p>
<div id="valmistautuminen-1" class="section level2">
<h2>Valmistautuminen</h2>
<p>Avaa uusi QGIS-projekti (<strong>Projekti &gt; Uusi</strong>) ja tallenna se nimellä “<strong>QGIS-harjoitus 2</strong>”. Tässä harjoituksessa avataan tekstimuotoisena tallennettu paikkatietoaineisto ja liitetään taulukkomuotoista tilastotietoa paikkatietoaineistoon. </p>
</div>
<div id="pisteet-tekstitiedostosta-kartalle" class="section level2">
<h2>Pisteet tekstitiedostosta kartalle</h2>
<p>Lisää projektiisi kurssihakemiston aineisto <strong>Tuulivoima_sopivat_paikat.csv</strong>. Tämä aineisto on Helsingin kaupungin karttapohjaisella kyselyllä keräämä aineisto tuulivoiman hyväksyttävyydestä Helsingissä. Tiedosto sisältää lähes 8000 pistemäistä sijaintia, jotka ovat kyselyyn vastanneiden mielestä sopivia paikkoja tuulivoimalle. Lisää aineisto valitsemalla ylävalikosta <strong>Tasot &gt;  Lisää taso &gt; Lisää erotinmerkkejä sisältävä tekstitiedosto</strong>. Ota mallia seuraavan kuvan asetuksista:</p>
<p><img src="img/harjoitus_2/image1.png" /></p>
<p>Paina sitten <strong>OK</strong>.</p>
<p>Koska aineiston koordinaatit on tallennettu asteina WGS84-koordinaattijärjestelmässä, Helsinki näyttää hieman litistyneeltä. Vaihda projektin koordinaattijärjestelmäksi <strong>ETRS89/TM35FIN (EPSG:3067)</strong>. Nyt kartan muoto on tutumpi, ja karttayksiköt ovat metrejä asteiden sijaan.</p>
</div>
<div id="ilman-geometriaa-olevan-taulukon-tuominen" class="section level2">
<h2>Ilman geometriaa olevan taulukon tuominen</h2>
<p>Tuo kurssihakemistosta projektiisi aluemainen shapefile-taso Helsingin kaupunginosista vuoden 1899 aluejaon mukaan (<strong>Helsingin kaupunginosat 1899.shp</strong>). Lisää myös erotinmerkkejä sisältävä taulukkotiedosto <strong>Hki_1900_asunnot_tulisijat.csv</strong> <img src="img/harjoitus_2/image3.png" />. <strong>Tietolähteiden hallinta -ikkunassa</strong> voit määritellä, mikä merkki toimii taulukossasi kenttien erottimena. Alareunan esimerkki-ikkunassa voit esikatsella, millä asetuksilla QGIS lukee taulukkoa oikein. Aseta koodaukseksi <strong>windows-1252</strong> ja erotinmerkiksi <strong>;-merkki</strong>. Tämä tiedosto ei sisällä geometriaa lainkaan, vaan tietää tilastotiedoista vain kaupunginosan nimen ja numeron. Valitse siis <strong>Ei geometriaa (ainoastaan ominaisuustietojen taulu)</strong>. Klikkaa lopuksi <strong>Lisää</strong>.</p>
<p><img src="img/harjoitus_2/image4.png" /></p>
<p>Koska taulukko ei sisällä geometriaa, sitä ei voida kuvata karttanäkymässä, mutta se tulee Tasot -listaukseen. </p>
</div>
<div id="taulukon-kenttien-tyypin-muokkaaminen" class="section level2">
<h2>Taulukon kenttien tyypin muokkaaminen</h2>
<p>Kun tuot taulukon QGISiin, et voi vaikuttaa siihen, minkä tyyppisiksi QGIS tunnistaa taulukkosi kentät. Jos vaikkapa numeerisessa kentässä on yksikin tekstiksi tulkittava solu (esim. tyhjää merkitsevä viiva tai  N/A- tai NULL-teksti), koko kenttä tulkitaan tekstiksi. Tällöin et voi käyttää kentän tietoja numeerisiin analyyseihin kuten koropleettikartan laatimiseen.</p>
<p>Avaa tulisijat-tason <strong>ominaisuudet</strong> ja tarkastele <strong>Tietokentät</strong> -välilehteä. Yksi kenttä on sisältänyt muita kuin numeroita, ja siksi siitä on tullut String- eli tekstikenttä.</p>
<p><img src="img/harjoitus_2/image5.png" /></p>
<p>Kentän tyypin muuttaminen jälkikäteen on työlästä, mutta voit luoda uuden kentän, jolle asetat halutun tyypin ja johon muunnat olemassa olevan kentän arvot.</p>
<p>Avaa <strong>Kentän arvojen laskin</strong> ja luo uusi kenttä, jonka nimi on ilman tulisijaa num ja tyyppi kokonaisluku. Käytä funktiota to_int muuntaaksesi Ilman tulisijaa -kentän tiedot numeerisiksi.</p>
<p><img src="img/harjoitus_2/image6.png" /></p>
<p>Vastaavasti funktio to_string muuntaa numeerisesta kentästä luetut numerot tekstiksi. Jos aineistossa on rivejä, joille muunnosta ei voi tehdä, muunnosfunktio jättää ne solut tyhjiksi.</p>
<p>Kentän arvojen laskin -työkalun ja lausekkeenmuodostustyökalun funktioissa on ryhmä <strong>Muunnokset</strong>, josta voit tutkia mitkä kaikki muunnokset ovat mahdollisia. Muunnosfunktiota voit käyttää myös osana pidempää lauseketta.</p>
</div>
<div id="taulukkotiedon-liittäminen-geometriaan" class="section level2">
<h2>Taulukkotiedon liittäminen geometriaan</h2>
<p>Saat taulukon tiedot käyttöön paikkatietona, kun luot liitoksen shapefile-tiedostosi ja taulukon välille. Klikkaa hiiren oikealla napilla <strong>Helsingin kaupunginosat 1899-tasoa</strong>, valitse <strong>Ominaisuudet</strong> ja vasemman reunan valikosta <strong>Liitokset</strong>. </p>
<p>Luo uusi liitos <img src="img/harjoitus_2/image7.png" />. Valitse pudotusvalikosta liitettäväksi tasoksi csv-taulukkosi, liitoskentäksi Kaupunginosan numero ja kohdekentäksi shp-tason kenttä <strong>k_osa_nro</strong>. Paina lopuksi <strong>OK</strong>.</p>
<p><img src="img/harjoitus_2/image8.png" /></p>
<p>Tarkastele nyt <strong>Helsingin kaupunginosat 1899 -tason</strong> attribuuttitaulua. Csv-taulukko on lisätty shp-tason ominaisuuksien perään uusiksi sarakkeiksi. Jos liitettävä taulukkosi sisältää kohteita, joille ei löydy vastinetta toisessa aineistossa, ne putoavat automaattisesti pois liitosta tehtäessä.</p>
<p>Uusien kenttien nimet muodostuvat automaattisesti liitettävän taulukon nimestä ja alkuperäisestä kentän nimestä. Jos haluat muokata niitä helpommin luettavaksi, voit säätää liitoksen asetuksia joko liitosta tehdessäsi tai myöhemmin. Voit myös valita, liitätkö kaikki taulun kentät vaan vain osan. </p>
<p>Luotu liitos on olemassa vain nykyisessä QGIS-projektissasi. Jos haluat tallentaa liitetyn tiedon muuta käyttöä varten, tallenna taso uudestaan klikkaamalla hiiren oikealla ja valitsemalla <strong>Vie &gt; Tallenna kohteet nimellä</strong>.</p>
<p>Liitettyjä kenttiä voi käyttää aineiston visualisointiin ja valintatyökaluihin kuten tason alkuperäisiäkin attribuuttikenttiä. Niitä ei sen sijaan voi käyttää esimerkiksi datan suodattamiseen näkymästä. Suodattamista varten voit luoda väliaikaisen virtuaalitason tai tallentaa tason uutena aineistona.</p>
<p>Kun olet valmis, tallenna projektitiedosto kurssihakemistoon pikanäppäimellä <strong>CTRL + T</strong> tai päävalikosta <strong>Projekti &gt; Tallenna</strong>.</p>
<div class="hint-box">
<p>Psst! Koulutuksen jälkeen saat henkilökohtaista tukea Gispon tukipalvelusta. Lähetä kysymyksesi tai kommenttisi osoitteeseen koulutustuki@gispo.fi!</p>
</div>

</div>
</div>
<p style="text-align: center;">
<a href="01_harjoitus_1.html"><button class="btn btn-default">Previous</button></a>
<a href="03_harjoitus_3.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Tilastot ja analyysit QGISillä</h5>
<span class="footer-version">v2024-04-24</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Oy.
<span class="footer-copyright-year">© 2024</span></h5>
<span class="footer-contact-info">Firdonkatu 2 T 63
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
