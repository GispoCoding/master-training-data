<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Harjoitus 1: Geometry generator, tyylitiedostot ja sääntöpohjainen visualisointi | Visualisoinnin mestariksi QGISillä" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Oy" />

<meta name="date" content="2024-02-27" />


<meta name="description" content="Harjoitus 1: Geometry generator, tyylitiedostot ja sääntöpohjainen visualisointi | Visualisoinnin mestariksi QGISillä">

<title>Harjoitus 1: Geometry generator, tyylitiedostot ja sääntöpohjainen visualisointi | Visualisoinnin mestariksi QGISillä</title>




<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Visualisoinnin mestariksi QGISillä</h1></div>
<div class="abstract-sidebar"><p>Jatkokurssi QGISin visualisointitekniikoista.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li class="has-sub"><a href="index.html#visualisoinnin-mestariksi-qgisillä">Visualisoinnin mestariksi QGISillä</a>
<ul>
<li><a href="index.html#tervetuloa-kurssille">Tervetuloa kurssille!</a></li>
<li><a href="index.html#lukuohje">Lukuohje</a></li>
<li><a href="index.html#mistä-lisätietoja">Mistä lisätietoja?</a></li>
<li><a href="index.html#virheet">Virheet</a></li>
<li><a href="index.html#lisenssi-ja-oikeudet">Lisenssi ja oikeudet</a></li>
</ul></li>
<li class="has-sub"><a href="01_harjoitus_1.html#harjoitus-1-geometry-generator-tyylitiedostot-ja-sääntöpohjainen-visualisointi">Harjoitus 1: Geometry generator, tyylitiedostot ja sääntöpohjainen visualisointi</a>
<ul>
<li><a href="01_harjoitus_1.html#valmistautuminen"><strong>Valmistautuminen</strong></a></li>
<li class="has-sub"><a href="01_harjoitus_1.html#polygonin-käyttö-maskina"><strong>Polygonin käyttö maskina</strong></a>
<ul>
<li><a href="01_harjoitus_1.html#geometry-generator"><strong>Geometry generator</strong></a></li>
</ul></li>
<li><a href="01_harjoitus_1.html#tyylin-tallentaminen-tiedostoon"><strong>Tyylin tallentaminen tiedostoon</strong></a></li>
<li><a href="01_harjoitus_1.html#sääntöpohjainen-visualisointi"><strong>Sääntöpohjainen visualisointi</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_harjoitus_2.html#harjoitus-2-luokittelu-heatmap-ja-diagrammit">Harjoitus 2: Luokittelu, heatmap ja diagrammit</a>
<ul>
<li><a href="02_harjoitus_2.html#valmistautuminen-1"><strong>Valmistautuminen</strong></a></li>
<li><a href="02_harjoitus_2.html#pistemäisen-aineiston-luokittelu"><strong>Pistemäisen aineiston luokittelu</strong></a></li>
<li><a href="02_harjoitus_2.html#heatmap"><strong>Heatmap</strong></a></li>
<li><a href="02_harjoitus_2.html#diagrammit"><strong>Diagrammit</strong></a></li>
</ul></li>
<li class="has-sub"><a href="03_harjoitus_3.html#harjoitus-3-3d-visualisointi">Harjoitus 3: 3D-visualisointi</a>
<ul>
<li><a href="03_harjoitus_3.html#valmistautuminen-2"><strong>Valmistautuminen</strong></a></li>
<li><a href="03_harjoitus_3.html#d-pylväsdiagrammi-tilastoaineistosta"><strong>3D-pylväsdiagrammi tilastoaineistosta</strong></a></li>
<li><a href="03_harjoitus_3.html#maastomalli-korkeusaineistosta"><strong>Maastomalli korkeusaineistosta</strong></a></li>
<li><a href="03_harjoitus_3.html#d-karttanäkymä"><strong>3D-karttanäkymä</strong></a></li>
<li><a href="03_harjoitus_3.html#lisätehtävä"><strong>Lisätehtävä</strong></a></li>
<li><a href="03_harjoitus_3.html#rakennusten-ja-muiden-objektien-3d-visualisointi"><strong>Rakennusten ja muiden objektien 3D-visualisointi</strong></a></li>
<li><a href="03_harjoitus_3.html#karttatuloste"><strong>Karttatuloste</strong></a></li>
</ul></li>
<li class="has-sub"><a href="04_harjoitus_4.html#harjoitus-4-animaatiot">Harjoitus 4: Animaatiot</a>
<ul>
<li><a href="04_harjoitus_4.html#valmistautuminen-3"><strong>Valmistautuminen</strong></a></li>
<li><a href="04_harjoitus_4.html#temporal-controller"><strong>Temporal controller</strong></a></li>
<li><a href="04_harjoitus_4.html#datan-esikäsittely"><strong>Datan esikäsittely</strong></a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-1-geometry-generator-tyylitiedostot-ja-sääntöpohjainen-visualisointi" class="section level1">
<h1>Harjoitus 1: Geometry generator, tyylitiedostot ja sääntöpohjainen visualisointi</h1>
<p><strong>Harjoituksen sisältö</strong></p>
<p>Harjoituksessa tutustutaan Geometry generator -työkaluun, laaditaan vertaileva teemakartta sekä tallennetaan ja otetaan käyttöön tyylitiedosto.</p>
<p><strong>Harjoituksen tavoite</strong></p>
<p>Koulutettava oppii laatimaan teemakarttoja attribuuttitietoihin perustuen sekä ymmärretään tehtyjen visualisointivalintojen merkityksen valmiissa kartassa. Lisäksi koulutettava oppii hyödyntämään tyylitiedostoja ja johtamaan aineiston geometrioista uusia geometrioita.</p>
<p><strong>Arvioitu kesto</strong></p>
<p>45 minuuttia.</p>
<div id="valmistautuminen" class="section level2">
<h2><strong>Valmistautuminen</strong></h2>
<p>Avaa uusi QGIS-projekti (<strong>Projekti &gt; Uusi</strong>) ja tallenna se nimellä “<strong>QGIS-harjoitus 1</strong>”. Lisää projektiin seuraavat aineistot:</p>
<ul>
<li><p><strong>..kurssihakemisto/kuntien ikärakenne 2019.gpkg (taso: “kuntien ikärakenne 2019”)</strong></p></li>
<li><p><strong>OpenStreetMap (XYZ Tiles -valikosta) taustakartaksi</strong></p></li>
</ul>
</div>
<div id="polygonin-käyttö-maskina" class="section level2">
<h2><strong>Polygonin käyttö maskina</strong></h2>
<p>Polygoneja voidaan käyttää tietyn alueen rajaavan maskin luomiseen. Suodata <strong>kuntien ikärakenne 2019 -tasoa</strong> siten että näkyviin jää vain kotikuntasi:</p>
<p><img src="img/harjoitus_1/image1.png" /></p>
<p>Muuta nyt polygonitason kuvaustekniikka <strong>Inverted polygons -tyyliseksi</strong> ja vaihda sen väri mustaksi ja peittävyys 50%:iin. Maskina toimiva taso häivyttää kaiken sen alle jäävän ja korostaa kotikuntaasi kirkkaampana. Huomaa, että jos alla olevissa tasoissa on käytössä nimiöitä, ne eivät jää maskitason alle vaan pomppaavat aina ylimmäiseksi! Maskitaso toimiikin parhaiten, kun sen avulla halutaan korostaa jotain rasteritason aluetta, kuten kaavan aluetta tai vaikkapa suojelualuetta.</p>
<p><img src="img/harjoitus_1/image2.png" /></p>
<p>Poista lopuksi tason suodatus ja vaihda kuvaustekniikka takaisin normaaliksi. Tai <strong>monista kuntien ikärakenne 2019 -taso</strong> ja työskentele jatkossa uudella kopiolla.</p>
<div id="geometry-generator" class="section level3">
<h3><strong>Geometry generator</strong></h3>
<p>Tällä työkalulla voidaan muuntaa vektorimuotoisia aineistoja geometriatyypistä toiseen visualisointitarkoituksessa. Aineiston todellinen geometria ei siis muutu. Avaa <strong>kuntien ikärakenne 2019 -tason</strong> <strong>Kuvaustekniikka</strong> ja valitse <strong>Symbolitason tyyppi</strong> -pudotusvalikosta <strong>Geometry Generator</strong>.</p>
<p><img src="img/harjoitus_1/image3.png" /></p>
<p>Vaihda geometriatyypiksi <strong>point/multipoint</strong> ja anna lauseke, jonka perusteella pisteiden sijainnit muodostetaan. Yksinkertaisin lauseke etsii <strong>kunta-polygonien</strong> painopisteen:</p>
<div class="code-box">
<p>centroid($geometry)</p>
</div>
<p>Paina <strong>Käytä</strong>. Huomaa, että voit monistaa <strong>Simple fill -tason</strong> <img src="img/harjoitus_1/image4.png" /><strong>-painikkeella</strong> ja luoda keskipisteiden alle toisen tason, jossa näkyvät alkuperäiset polygonit.</p>
<p><img src="img/harjoitus_1/image5.png" /></p>
<p>Kuvassa näkyvän Hämeenlinnan painopiste on melkein sen ulkopuolella. Joskus onkin parempi käyttää esimerkiksi komentoa <strong>pole of inaccessibility</strong>, joka etsii reunaviivoista mahdollisimman kaukana olevan pisteen. Se tarvitsee lisäksi parametriksi toleranssin eli tarkkuuden jolla pisteen sijainti lasketaan:</p>
<div class="code-box">
<p>pole_of_inaccessibility($geometry,100)</p>
</div>
<p>Lisää hyödyllisiä geometrianmuodostuslausekkeita voit etsiä tuttuun tapaan <strong>Lausekkeen muokkaus -ikkunassa</strong> joka löytyy <img src="img/harjoitus_1/image6.png" />-painikkeen takaa:</p>
<p><img src="img/harjoitus_1/image7.png" /></p>
</div>
</div>
<div id="tyylin-tallentaminen-tiedostoon" class="section level2">
<h2><strong>Tyylin tallentaminen tiedostoon</strong></h2>
<p>Alueiden keskipiste-visualisointia (pole of inaccessibility) voidaan hyödyntää muillekin aineistoille. Tallennetaan siis tämä geometry generatorilla luotu tyyli. Klikkaa kuvaustekniikka-ikkunan alalaidasta <strong>Tyyli</strong>-painiketta ja valitse <strong>Tallenna tyyli...</strong>. Tallenna tyyli QML-muodossa, anna sille kuvaava nimi (vaikkapa “keskipisteet” ja valitse tiedostolle sijainti.</p>
<p><img src="img/harjoitus_1/image8.png" /></p>
<p>Tätä qml-tiedostoa voi nyt käyttää mille tahansa polygonimaiselle vektoriaineistolle, kun haluat esittää niiden keskipisteet sekä alkuperäiset alueet yhdessä. Huomaa, että qml-tiedosto toimii vain QGISissä.</p>
<p>Avaa jokin toinen polygoniaineisto ja käytä sille tallentamaasi tyyliä. Voit ottaa tyylin käyttöön samasta <strong>Tyyli-painikkeesta</strong> valitsemalla <strong>Lataa tyyli</strong>.</p>
</div>
<div id="sääntöpohjainen-visualisointi" class="section level2">
<h2><strong>Sääntöpohjainen visualisointi</strong></h2>
<p>Sääntöpohjaisella visualisoinnilla voidaan luoda useampaan attribuuttitietoon perustuvia, monimutkaisempia tyylejä. Tehdään sen avulla teemakartta, joka esittää kuntien huoltosuhteen eli työikäisen väestön suhteen lapsiin ja vanhuksiin.</p>
<p>Valitse kuntien ikärakenne 2019-tason kuvaustekniikaksi <strong>Sääntöpohjainen</strong> ja muodosta ensimmäisen säännön lauseke tulpaklikkaamalla säännön riviä. Anna säännölle nimi ja syötä lauseke <img src="img/harjoitus_1/image9.png" />-painikkeesta. Valitse sitten tyyli ja väri, jolla haluat nämä kunnat visualisoida.</p>
<p><img src="img/harjoitus_1/image10.png" /></p>
<p>Luo myös toinen sääntö <img src="img/harjoitus_1/image11.png" />-painikkeella ja anna sille suodatinlauseke, jossa työikäisiä on vähemmän kuin muita ikäryhmiä. Valitse sillekin kuvaava väri.</p>
<p>Entä jos jossain kunnassa huoltosuhde on täsmälleen 1:1? Silloin tuo kunta jää näillä sääntöasetuksilla näkymättömäksi. Sisällytä se siis jompaankumpaan sääntöön käyttämällä “pienempi tai yhtäsuuri kuin” -ehtoa.</p>
<p>Kun olet valmis, tallenna projektitiedosto kurssihakemistoon pikanäppäimellä <strong>CTRL + T</strong> tai päävalikosta <strong>Projekti &gt; Tallenna</strong>.</p>
<div class="hint-box">
<p>Psst! Koulutuksen jälkeen saat henkilökohtaista tukea Gispon tukipalvelusta. Lähetä kysymyksesi tai kommenttisi osoitteeseen tuki@gispo.fi!</p>
</div>

</div>
</div>
<p style="text-align: center;">
<a href="index.html"><button class="btn btn-default">Previous</button></a>
<a href="02_harjoitus_2.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Visualisoinnin mestariksi QGISillä</h5>
<span class="footer-version">v2024-02-27</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Oy.
<span class="footer-copyright-year">© 2024</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3 krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
