<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<link rel="icon" href="/master-training-data/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/master-training-data/favicon.ico" type="image/x-icon">

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta name="robots" content="noindex, nofollow" />
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="EXERCISE 2.4: CSS-STYLING | Introduction to GeoServer" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Oy" />

<meta name="date" content="2024-01-18" />


<meta name="description" content="EXERCISE 2.4: CSS-STYLING | Introduction to GeoServer">

<title>EXERCISE 2.4: CSS-STYLING | Introduction to GeoServer</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Introduction to GeoServer</h1></div>
<div class="abstract-sidebar"><p>A course covering basic GeoServer topics.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li class="has-sub"><a href="index.html#introduction-to-geoserver">INTRODUCTION TO GEOSERVER</a>
<ul>
<li><a href="index.html#welcome-to-this-geoserver-course">Welcome to this GeoServer Course!</a></li>
<li><a href="index.html#background-of-geoserver">Background of GeoServer</a></li>
<li><a href="index.html#how-to-read">How to read</a></li>
<li><a href="index.html#additional-information">Additional information</a></li>
<li><a href="index.html#mistakes">Mistakes</a></li>
<li><a href="index.html#license-and-permissions">License and permissions</a></li>
</ul></li>
<li class="has-sub"><a href="01_exercise_1.html#exercise-1.1-installation-and-commissioning">EXERCISE 1.1: INSTALLATION AND COMMISSIONING</a>
<ul>
<li><a href="01_exercise_1.html#preparation"><strong>Preparation</strong></a></li>
<li class="has-sub"><a href="01_exercise_1.html#main-menu"><strong>Main menu</strong></a>
<ul>
<li><a href="01_exercise_1.html#about-geoserver"><strong>About GeoServer</strong></a></li>
<li><a href="01_exercise_1.html#layer-preview"><strong>Layer Preview</strong></a></li>
<li><a href="01_exercise_1.html#service-capabilities"><strong>Service Capabilities</strong></a></li>
<li><a href="01_exercise_1.html#demos"><strong>Demos</strong></a></li>
<li><a href="01_exercise_1.html#demo-requests"><strong>Demo requests</strong></a></li>
</ul></li>
<li><a href="01_exercise_1.html#srs-list-ja-reprojection-console"><strong>SRS List ja Reprojection console</strong></a></li>
<li><a href="01_exercise_1.html#wcs-request-builder"><strong>WCS request builder</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_exercise_2.html#exercise-1.2-geoserver-web-interface">EXERCISE 1.2: GEOSERVER WEB INTERFACE</a>
<ul>
<li><a href="02_exercise_2.html#preparation-1"><strong>Preparation</strong></a></li>
<li><a href="02_exercise_2.html#administrators-interface"><strong>Administrator’s interface</strong></a></li>
<li><a href="02_exercise_2.html#master-and-administrator-users"><strong>Master and Administrator users</strong></a></li>
<li class="has-sub"><a href="02_exercise_2.html#about-status-settings"><strong>About &amp; Status settings</strong></a>
<ul>
<li><a href="02_exercise_2.html#contact-information"><strong>Contact Information</strong></a></li>
<li><a href="02_exercise_2.html#server-status"><strong>Server Status</strong></a></li>
<li><a href="02_exercise_2.html#geoserver-logs"><strong>GeoServer Logs</strong></a></li>
</ul></li>
<li class="has-sub"><a href="02_exercise_2.html#data-menu"><strong>Data menu</strong></a>
<ul>
<li><a href="02_exercise_2.html#layer-preview-1"><strong>Layer Preview</strong></a></li>
<li><a href="02_exercise_2.html#workspaces"><strong>Workspaces</strong></a></li>
<li><a href="02_exercise_2.html#stores"><strong>Stores</strong></a></li>
<li><a href="02_exercise_2.html#layers"><strong>Layers</strong></a></li>
</ul></li>
<li><a href="02_exercise_2.html#layer-groups"><strong>Layer Groups</strong></a></li>
<li><a href="02_exercise_2.html#styles"><strong>Styles</strong></a></li>
<li><a href="02_exercise_2.html#settings"><strong>Settings</strong></a></li>
<li><a href="02_exercise_2.html#tile-caching-1"><strong>Tile Caching</strong></a></li>
<li><a href="02_exercise_2.html#security-1"><strong>Security</strong></a></li>
</ul></li>
<li class="has-sub"><a href="03_exercise_3.html#exercise-1.3-vector-data">Exercise 1.3: VECTOR DATA</a>
<ul>
<li><a href="03_exercise_3.html#preparation-2"><strong>Preparation</strong></a></li>
<li><a href="03_exercise_3.html#creating-vector-data-store"><strong>Creating vector data store</strong></a></li>
<li><a href="03_exercise_3.html#publishing-vector-layer"><strong>Publishing vector layer</strong></a></li>
<li class="has-sub"><a href="03_exercise_3.html#data-settings"><strong>Data settings</strong></a>
<ul>
<li><a href="03_exercise_3.html#coordinate-reference-systems"><strong>Coordinate Reference Systems</strong></a></li>
<li><a href="03_exercise_3.html#bounding-boxes"><strong>Bounding Boxes</strong></a></li>
<li><a href="03_exercise_3.html#feature-type-details"><strong>Feature Type Details</strong></a></li>
</ul></li>
<li><a href="03_exercise_3.html#add-helsinki-road-network"><strong>Add Helsinki road network</strong></a></li>
</ul></li>
<li class="has-sub"><a href="04_exercise_4.html#exercise-1.4-basics-of-styling-sld">EXERCISE 1.4: BASICS OF STYLING (SLD)</a>
<ul>
<li><a href="04_exercise_4.html#preparation-3"><strong>Preparation</strong></a></li>
<li><a href="04_exercise_4.html#geoserverin-styling-technique"><strong>GeoServerin styling technique</strong></a></li>
<li><a href="04_exercise_4.html#sld-styling"><strong>SLD-styling</strong></a></li>
<li><a href="04_exercise_4.html#creating-a-new-style"><strong>Creating a new style</strong></a></li>
<li><a href="04_exercise_4.html#deployment-of-sld-styling-technique"><strong>Deployment of SLD styling technique</strong></a></li>
<li><a href="04_exercise_4.html#sld-cookbook"><strong>SLD Cookbook</strong></a></li>
<li><a href="04_exercise_4.html#editing-sld-styling-technique"><strong>Editing SLD styling technique</strong></a></li>
<li><a href="04_exercise_4.html#create-a-road-style"><strong>Create a road style</strong></a></li>
</ul></li>
<li class="has-sub"><a href="05_exercise_5.html#exercise-1.5-wms-and-wcs-services">EXERCISE 1.5: WMS AND WCS SERVICES</a>
<ul>
<li><a href="05_exercise_5.html#preparation-4"><strong>Preparation</strong></a></li>
<li><a href="05_exercise_5.html#ogc-standards"><strong>OGC-standards</strong></a></li>
<li><a href="05_exercise_5.html#general-map-service-settings"><strong>General map service settings</strong></a></li>
<li><a href="05_exercise_5.html#wms"><strong>WMS</strong></a></li>
<li><a href="05_exercise_5.html#workspace-specific-server-settings"><strong>Workspace-specific server settings</strong></a></li>
<li><a href="05_exercise_5.html#dpi-resolution-of-the-wms-map-service-image"><strong>DPI resolution of the WMS map service image</strong></a></li>
<li><a href="05_exercise_5.html#wcs"><strong>WCS</strong></a></li>
</ul></li>
<li class="has-sub"><a href="06_exercise_6.html#exercise-1.6-raster-data">EXERCISE 1.6: RASTER DATA</a>
<ul>
<li><a href="06_exercise_6.html#preparation-5"><strong>Preparation</strong></a></li>
<li><a href="06_exercise_6.html#adding-raster-data"><strong>Adding raster data</strong></a></li>
<li><a href="06_exercise_6.html#adding-an-aerial-image"><strong>Adding an aerial image</strong></a></li>
<li><a href="06_exercise_6.html#image-mosaic"><strong>Image Mosaic</strong></a></li>
<li class="has-sub"><a href="06_exercise_6.html#layer-groups-1"><strong>Layer Groups</strong></a>
<ul>
<li><a href="06_exercise_6.html#form-of-publication-of-group-layers"><strong>Form of publication of group layers</strong></a></li>
<li><a href="06_exercise_6.html#use-of-external-wms-services-cascading-wms"><strong>Use of external WMS services (cascading WMS)</strong></a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="07_exercise_7.html#exercise-1.7-spatial-databases">EXERCISE 1.7: SPATIAL DATABASES</a>
<ul>
<li><a href="07_exercise_7.html#preparation-6"><strong>Preparation</strong></a></li>
<li><a href="07_exercise_7.html#connecting-to-the-geodatabase"><strong>Connecting to the geodatabase</strong></a></li>
<li><a href="07_exercise_7.html#adding-a-postgis-layer"><strong>Adding a PostGIS layer</strong></a></li>
<li><a href="07_exercise_7.html#adding-a-polygon-and-line-layer-from-postgis-database"><strong>Adding a polygon and line layer from PostGIS database</strong></a></li>
<li><a href="07_exercise_7.html#setting-default-styles-for-layers"><strong>Setting default styles for layers</strong></a></li>
<li><a href="07_exercise_7.html#sql-views"><strong>SQL views</strong></a></li>
<li><a href="07_exercise_7.html#geographical-data-functions-via-sql-views"><strong>Geographical data functions via SQL views</strong></a></li>
</ul></li>
<li class="has-sub"><a href="08_exercise_8.html#exercise-2.1-wfs-services">EXERCISE 2.1: WFS SERVICES</a>
<ul>
<li><a href="08_exercise_8.html#preparation-7"><strong>Preparation</strong></a></li>
<li><a href="08_exercise_8.html#ogc-standards-1"><strong>OGC-standards</strong></a></li>
<li><a href="08_exercise_8.html#wfs-settings"><strong>WFS settings</strong></a></li>
<li><a href="08_exercise_8.html#number-of-data-requested"><strong>Number of data requested</strong></a></li>
<li><a href="08_exercise_8.html#specifying-several-coordinate-systems"><strong>Specifying several coordinate systems</strong></a></li>
<li><a href="08_exercise_8.html#service-levels"><strong>Service Levels</strong></a></li>
<li><a href="08_exercise_8.html#gml-settings"><strong>GML settings</strong></a></li>
<li><a href="08_exercise_8.html#workspace-specific-settings"><strong>Workspace specific settings</strong></a></li>
<li><a href="08_exercise_8.html#editing-via-wfs-t-service"><strong>Editing via WFS-T service</strong></a></li>
</ul></li>
<li class="has-sub"><a href="09_exercise_9.html#exercise-2.2-map-tile-services">EXERCISE 2.2: MAP TILE SERVICES</a>
<ul>
<li><a href="09_exercise_9.html#preparation-8"><strong>Preparation</strong></a></li>
<li><a href="09_exercise_9.html#tile-caching-2"><strong>Tile Caching</strong></a></li>
<li><a href="09_exercise_9.html#geowebcache-user-interface"><strong>GeoWebCache user interface</strong></a></li>
<li><a href="09_exercise_9.html#layer-specific-settings"><strong>Layer-specific settings</strong></a></li>
<li><a href="09_exercise_9.html#pre-creation-of-map-tiles"><strong>Pre-creation of map tiles</strong></a></li>
<li><a href="09_exercise_9.html#using-the-hard-disk-of-the-map-tiles"><strong>Using the hard disk of the map tiles</strong></a></li>
<li><a href="09_exercise_9.html#map-tile-grids"><strong>Map tile grids</strong></a></li>
<li><a href="09_exercise_9.html#map-tile-grid-according-to-jhs180"><strong>Map tile grid according to JHS180</strong></a></li>
<li><a href="09_exercise_9.html#creating-a-new-gridset"><strong>Creating a new gridset</strong></a></li>
<li><a href="09_exercise_9.html#finlands-openstreetmap-road-network"><strong>Finland’s OpenStreetMap road network</strong></a></li>
<li><a href="09_exercise_9.html#using-your-own-map-tile-grid"><strong>Using your own map tile grid</strong></a></li>
<li><a href="09_exercise_9.html#create-a-local-map-tile-grid"><strong>Create a local map tile grid</strong></a></li>
</ul></li>
<li class="has-sub"><a href="10_exercise_10.html#exercise-2.3-architecture-and-deployment">EXERCISE 2.3: ARCHITECTURE AND DEPLOYMENT</a>
<ul>
<li><a href="10_exercise_10.html#preparation-9"><strong>Preparation</strong></a></li>
<li><a href="10_exercise_10.html#general-information-about-the-geoserver-server"><strong>General information about the GeoServer server</strong></a></li>
<li><a href="10_exercise_10.html#image-processing-settings"><strong>Image Processing Settings</strong></a></li>
<li><a href="10_exercise_10.html#raster-access"><strong>Raster Access</strong></a></li>
<li><a href="10_exercise_10.html#geoservers-log"><strong>GeoServer’s log</strong></a></li>
<li><a href="10_exercise_10.html#rest-api-functionality"><strong>REST API functionality</strong></a></li>
<li><a href="10_exercise_10.html#using-the-monitor-plugin-tarkista-nämä-vielä"><strong>Using the Monitor plugin (tarkista nämä vielä)</strong></a></li>
</ul></li>
<li class="has-sub"><a href="11_exercise_11.html#exercise-2.4-css-styling">EXERCISE 2.4: CSS-STYLING</a>
<ul>
<li><a href="11_exercise_11.html#preparation-10"><strong>Preparation</strong></a></li>
<li><a href="11_exercise_11.html#css-styles"><strong>CSS-styles</strong></a></li>
<li><a href="11_exercise_11.html#creating-a-style"><strong>Creating a style</strong></a></li>
<li><a href="11_exercise_11.html#classification-of-data"><strong>Classification of data</strong></a></li>
<li><a href="11_exercise_11.html#tuning-the-style"><strong>Tuning the style</strong></a></li>
<li><a href="11_exercise_11.html#category-naming"><strong>Category naming</strong></a></li>
<li><a href="11_exercise_11.html#multi-scale-visibility"><strong>Multi-scale visibility</strong></a></li>
<li><a href="11_exercise_11.html#adding-subtitles"><strong>Adding subtitles</strong></a></li>
<li><a href="11_exercise_11.html#application-of-styling-technology"><strong>Application of styling technology</strong></a></li>
</ul></li>
<li class="has-sub"><a href="12_exercise_12.html#exercise-2.5-access-control">EXERCISE 2.5: ACCESS CONTROL</a>
<ul>
<li><a href="12_exercise_12.html#geoserver-general-security-settings"><strong>GeoServer general security settings</strong></a></li>
<li><a href="12_exercise_12.html#identification"><strong>Identification</strong></a></li>
<li><a href="12_exercise_12.html#create-a-new-role-and-user"><strong>Create a new role and user</strong></a></li>
<li><a href="12_exercise_12.html#limiting-access-rights-to-the-data"><strong>Limiting access rights to the data</strong></a></li>
<li><a href="12_exercise_12.html#user-specific-access-rights-for-the-data"><strong>User-specific access rights for the data</strong></a></li>
</ul></li>
<li class="has-sub"><a href="13_exercise_13.html#exercise-2.6-filtering">EXERCISE 2.6: FILTERING</a>
<ul>
<li><a href="13_exercise_13.html#filtering-with-attributes">Filtering with attributes</a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="exercise-2.4-css-styling" class="section level1">
<h1>EXERCISE 2.4: CSS-STYLING</h1>
<p><strong>Content of the exercise</strong></p>
<p>The exercise will cover styling techniques applicable to different data and make use of CSS styles for visualising maps.</p>
<p><strong>Aim of the exercise</strong></p>
<p>After the exercise, the student will be able to use basic styling techniques on GeoServer to visualise different data using the CSS language.</p>
<p><strong>Estimated duration</strong></p>
<p>40 minutes.</p>
<div id="preparation-10" class="section level2">
<h2><strong>Preparation</strong></h2>
<p>Various data are uploaded to the GeoServer server. The CSS plugin is installed on GeoServer.</p>
</div>
<div id="css-styles" class="section level2">
<h2><strong>CSS-styles</strong></h2>
<p>Once the CSS plugin is installed, you can write styles in CSS, which is a more user-friendly way to customize your styles than SLD.</p>
<p>The plugin works by automatically translating code written in CSS into SLD.</p>
</div>
<div id="creating-a-style" class="section level2">
<h2><strong>Creating a style</strong></h2>
<p>Let’s create a new style for the <strong>roads</strong> layer.</p>
<p>Open the main menu <strong>Styles</strong> and press <strong>Add a new style</strong>.</p>
<p>Specify <strong>roads_css</strong> as the name of the new style and leave the workspace field empty.</p>
<p>In the <strong>Style Content</strong> menu, select <strong>Line</strong> as the geometry type and press <strong>Generate</strong>.</p>
<p>The <strong>Style Editor</strong> box now contains text like the following:</p>
<div class="code-box">
<p>/* @title red line */<br />
* {<br />
    stroke: #ff3300;<br />
}<br />
</p>
</div>
<p>Press <strong>Submit</strong>. From the <strong>Styles</strong> menu, open the style you just created and select the <strong>Layer Preview</strong> tab. Select a road layer as the layer to preview.</p>
<p>Zoom in on the map so that the roads start to show up properly.</p>
<p>You can also edit the CSS code in the <strong>Layer Preview</strong> tab. Note the “<strong>*</strong>” character. It means that the rule applies to all items (just like the * character in a file listing on the command line, for example).  <img src="img/harjoitus_11/image1.2.png" /></p>
<p>Now change the <strong>stroke</strong> command to <strong>blue</strong>.</p>
<div class="code-box">
<p>* { stroke: blue;</p>
</div>
<p>Press <strong>Apply</strong> and preview the map. The roads will now appear blue on the map. <img src="img/harjoitus_11/image2.2.png" /></p>
</div>
<div id="classification-of-data" class="section level2">
<h2><strong>Classification of data</strong></h2>
<p>Let’s now classify the roads into two categories: <strong>main roads</strong> and <strong>other</strong>. Each category can have its own style.</p>
<p>The main roads are classified by replacing the character “<strong>*</strong>” with the following code (note that the <strong>type</strong> field is used for delimitation):</p>
<div class="code-box">
<p>[type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]<br />
{ stroke: red;}</p>
</div>
<p>Press <strong>Apply</strong>. Now only the main roads are visible.</p>
<p>Now create a style for the other roads.<img src="img/harjoitus_11/image3.2.png" /></p>
<p>Further modify the CSS style as follows:</p>
<p>Copy the classification code for the endpoints and put it at the end of the code box.</p>
<p>Replace the “<strong>=</strong>” character “<strong>less than</strong>” with “<strong>&lt;&gt;</strong>” to specify roads that do not belong to the previous classification, i.e. smaller roads.</p>
<p>Change the “<strong>or</strong>” command to “<strong>and</strong>”.</p>
<p>Then copy the code snippet from the previous CSS style (the braces and the code inside them) and paste the copied code after the classification section for the other roads.</p>
<p>Change the style of the other roads so that the line colour is black.</p>
<p>The styles of the main roads and other roads now look like this:</p>
<div class="code-box">
<p>[type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]<br />
{ stroke: red;}<br />
[type &lt;&gt; ‘motorway’ and type &lt;&gt; ‘primary’ and type &lt;&gt; ‘secondary’ and type &lt;&gt; ‘trunk’]<br />
{ stroke: black;}<br />
</p>
</div>
<p>Now preview the result by pressing <strong>Apply</strong>. <img src="img/harjoitus_11/image4.2.png" /></p>
</div>
<div id="tuning-the-style" class="section level2">
<h2><strong>Tuning the style</strong></h2>
<p>Roads are still difficult to distinguish. Now let’s make a few tweaks to the style. Set the stroke width of the main roads to 0.5 with the command “<strong>stroke-width</strong>”. Add a new line after “<strong>stroke: red;</strong>” with “<strong>stroke-width: 0.5;</strong>”.</p>
<p>In the same way, define a line thickness of <strong>0.1</strong> for the other roads:</p>
<div class="code-box">
<p>[type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]<br />
{ stroke: red;<br />
stroke-width: 0.5;}<br />
[type &lt;&gt; ‘motorway’ and type &lt;&gt; ‘primary’ and type &lt;&gt; ‘secondary’ and type &lt;&gt; ‘trunk’]<br />
{ stroke: black;<br />
stroke-width: 0.1;}<br />
</p>
</div>
<p>Then press <strong>Apply</strong> and the preview will be updated: main roads and smaller roads will be more visible.</p>
<p>Next, try adding the following CSS code to create a clearer visualisation style for <strong>main roads</strong>.</p>
<p>Remove the old “<strong>stroke</strong>” definition first. The idea is to visualize the main paths with a yellow and a black line, so that the yellow line is narrower and stays on top of the black line. Ask the trainer for help if needed and replace the style of the suffixes with the following code in the CSS styles editing mode:</p>
<div class="code-box">
<p>stroke: black, yellow;<br />
stroke-width: 5px, 3px;<br />
z-index: 0, 3;</p>
</div>
<p>Note that in this way you define overlapping styles for the main paths, which form more complex visualisations.</p>
<p>Press <strong>Submit</strong> and visualize the result: <img src="img/harjoitus_11/image5.2.png" /></p>
<p>The <strong>Z-index</strong> command defines the order in which the different styles are drawn. An index value of 0 refers to a black line with a thickness of five pixels. An index value of three refers to a yellow line with a thickness of three pixels. Note how the lower values of the Z-index are drawn first and the higher values are drawn later.</p>
<div class="hint-box">
<p>Psst! Please note that the preview explanation does not understand these complex styles correctly. The tool needs development, but for a quick preview the map is good enough.</p>
</div>
<p>Try changing the order, colours and thickness of the symbols.</p>
<p>Your code would look like this at this point:</p>
<div class="code-box">
<p> [type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]<br />
     { stroke: black, yellow;<br />
     stroke-width: 5px, 3px;<br />
     z-index: 0, 3;}<br />
<br />
 [type &lt;&gt; ‘motorway’ and type &lt;&gt; ‘primary’ and type &lt;&gt; ‘secondary’ and type &lt;&gt; ‘trunk’]<br />
     { stroke: black;<br />
     stroke-width: 0.1;}<br />
</p>
</div>
</div>
<div id="category-naming" class="section level2">
<h2><strong>Category naming</strong></h2>
<p>As an additional task, you can edit the legend texts in CSS. The legend text for the different levels is defined with the “<strong>/* @title</strong>” and “<strong>*/</strong>” closing commands, and placed before the level definitions inside the square brackets as follows. This allows the names to be displayed in the legend of the preview map, and at the same time makes it easier to read the code.</p>
<p>Put <strong>/* @title Main roads */</strong> in front of the definition of main roads:</p>
<div class="code-box">
<p> /* @title Paatiet */<br />
 [type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]<br />
     {stroke: black, yellow;<br />
     stroke-width: 5px, 3px;<br />
     z-index: 0, 3;}<br />
</p>
</div>
<p>Also put <strong>/* @title Sidepaths */</strong>: in front of the sidepath definition in the same way.</p>
<p>Add the following code at the end of the code: </p>
<div class="code-box">
<p>/* @title Roads */ * { font-family: Helvetica; }</p>
</div>
<p>The above and last level/code defines by the “<strong>*</strong>” tag global CSS style rules, where here the “<strong>Tiesto</strong>” prefix for symbology texts and the <strong>Helvetica</strong> style for map text are defined.</p>
<p>Now press <strong>Apply</strong> to update the map. <img src="img/harjoitus_11/image6.2.png" /></p>
<p>Your code at this point should look something like this:</p>
<div class="code-box">
<p> /* @title Paatiet */<br />
 [type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]<br />
     { stroke: black, yellow;<br />
     stroke-width: 5px, 3px;<br />
     z-index: 0, 3;}<br />
<br />
 /* @title Sivutiet */<br />
 [type &lt;&gt; ‘motorway’ and type &lt;&gt; ‘primary’ and type &lt;&gt; ‘secondary’ and type &lt;&gt; ‘trunk’]<br />
     { stroke: black;<br />
     stroke-width: 0.1;}<br />
<br />
 /* @title Roads */<br />
  * { font-family: Helvetica;}<br />
</p>
</div>
</div>
<div id="multi-scale-visibility" class="section level2">
<h2><strong>Multi-scale visibility</strong></h2>
<p>Let’s add a snippet of code to assign scale-based cropping to other roads so that they don’t show up at all zoom levels:</p>
<p>Put smaller roads in front of the style:</p>
<div class="code-box">
<p>[@scale &lt; 50000]</p>
</div>
<p>Press <strong>Apply</strong>.</p>
<p>Now other roads will only be shown if the <strong>zoom</strong> level is more accurate than <strong>1:50 000</strong>. And when you zoom out, only the main roads are shown on the map: <img src="img/harjoitus_11/image7.2.png" /></p>
<p>Your code at this point should look something like this:</p>
<div class="code-box">
<p> /* @title Paatiet */</p>
<p> [type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]</p>
<p>     { stroke: black, yellow;</p>
<p>     stroke-width: 5px, 3px;</p>
<p>     z-index: 0, 3;}</p>
<p><br />
</p>
<p> /* @title Sivutiet */</p>
<p> [@scale &lt; 50000]</p>
<p> [type &lt;&gt; ‘motorway’ and type &lt;&gt; ‘primary’ and type &lt;&gt; ‘secondary’ and type &lt;&gt; ‘trunk’]</p>
<p>     { stroke: black;</p>
<p>     stroke-width: 0.1;}</p>
<p><br />
</p>
<p> /* @title Roads */ </p>
<p> * { font-family: Helvetica;}</p>
</div>
</div>
<div id="adding-subtitles" class="section level2">
<h2><strong>Adding subtitles</strong></h2>
<p>We will now add the texts for you.</p>
<p>Open the <strong>Layer Attributes</strong> tab and check that the <strong>name</strong> column, among others, is in the list. Enable it by adding the <strong>label</strong> command to the header code:</p>
<div class="code-box">
<p>label: [name];</p>
</div>
<p>Change the letters in the texts:</p>
<div class="code-box">
<p>font-weight: bold; font-fill: black; font-size: 12;</p>
</div>
<p>Press <strong>Apply</strong> to preview the results.</p>
<p>The result is not good yet, a few special commands for texts are needed:</p>
<div class="code-box">
<p>-gt-label-follow-line: true; -gt-label-max-angle-delta: 90; -gt-label-max-displacement: 400; -gt-label-repeat: 150;</p>
</div>
<p><strong>-gt-label-*</strong> tells you how to draw the texts or labels. Try changing the values of the previous commands.<img src="img/harjoitus_11/image8.2.png" /></p>
<p>Add a buffer for texts:</p>
<div class="code-box">
<p>halo-color: white; halo-radius: 1;</p>
</div>
<p>You can also define names for smaller roads in the same way as we just did for main roads. <img src="img/harjoitus_11/image9.2.png" /></p>
<p>Here is a sample code with all the previously mentioned styles in use:</p>
<div class="code-box">
<p>/* @title Paatiet */</p>
<p>[type = ‘motorway’ or type = ‘primary’ or type = ‘secondary’ or type = ‘trunk’]</p>
<p>{ stroke: black, yellow;</p>
<p>stroke-width: 5px, 3px;</p>
<p>z-index: 0, 3;</p>
<p>label: [name];</p>
<p>font-weight: bold;</p>
<p>font-fill: black;</p>
<p>font-size: 12;</p>
<p>-gt-label-follow-line: true;</p>
<p>-gt-label-max-angle-delta: 90;</p>
<p>-gt-label-max-displacement: 400;</p>
<p>-gt-label-repeat: 150;</p>
<p>halo-color: white;</p>
<p>halo-radius: 1;}</p>
<p><br />
</p>
<p>/* @title Sivutiet */</p>
<p>[@scale &lt; 50000]</p>
<p>[type &lt;&gt; ‘motorway’ and type &lt;&gt; ‘primary’ and type &lt;&gt; ‘secondary’ and type &lt;&gt; ‘trunk’]</p>
<p>{ stroke: black;</p>
<p>stroke-width: 0.1;</p>
<p>label: [name];</p>
<p>font-fill: black;</p>
<p>font-size: 9;</p>
<p>-gt-label-follow-line: true;</p>
<p>-gt-label-max-angle-delta: 90;</p>
<p>-gt-label-max-displacement: 400;</p>
<p>-gt-label-repeat: 150;</p>
<p>halo-color: white;</p>
<p>halo-radius: 1;}</p>
<p><br />
</p>
<p>/* @title Tiesto */ </p>
<p>* { font-family: Helvetica;}</p>
</div>
<p>A preview of this style looks like this on the map: <img src="img/harjoitus_11/image10.2.png" /></p>
<p>You can still try different commands to tune your map beyond the style. The GeoServer CSS plugin website has instructions and examples: <a href="http://docs.geoserver.org/stable/en/user/extensions/css/index.html" class="uri">http://docs.geoserver.org/stable/en/user/extensions/css/index.html</a>.</p>
</div>
<div id="application-of-styling-technology" class="section level2">
<h2><strong>Application of styling technology</strong></h2>
<p>Open the <strong>Publishing</strong> tab and check the <strong>Default</strong> column for the road layer. Press <strong>Apply</strong> to set the style you created as the default style for the road layer. On the <strong>Data → Layers → layer → Publishing</strong> page, check that the default style for this layer is now <strong>roads_css</strong>.</p>
<p>You can still make style updates to the <strong>background map</strong> layer. Open <strong>Data → Layer Groups → Background Map</strong>, and make sure that <strong>Default Style</strong> is checked for all layers in the <strong>Layers</strong> table. Finally, press <strong>Save</strong>.</p>
<p>Preview the <strong>background map</strong> layer. The final result will look like this:</p>
<p><img src="img/harjoitus_11/image11.png" /></p>

</div>
</div>
<p style="text-align: center;">
<a href="10_exercise_10.html"><button class="btn btn-default">Previous</button></a>
<a href="12_exercise_12.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Introduction to GeoServer</h5>
<span class="footer-version">v2024-01-18</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Ltd.
<span class="footer-copyright-year">© 2024</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3 krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>

</body>
</html>
