# Harjoitus 7: Edistyneet digitointiominaisuudet

**Harjoituksen sis√§lt√∂**

Harjoituksessa tehd√§√§n edistyneit√§ digitoinnin operaatioita QGISill√§.

**Harjoituksen tavoite**

Harjoituksen j√§lkeen opiskelija osaa hy√∂dynt√§√§ monipuolisemmin QGISin editoinnin ominaisuuksia.

**Arvioitu kesto**

45 minuuttia.

## Valmistautuminen

Voit jatkaa samalla projektilla, jonka teit edellisess√§ harjoituksessa.

## Kohteisiin tarttuminen (snapping) ja rakennustila (construction mode)

T√§ss√§ harjoitukksessa teemme rakennuksia rakennuspaikoille. Luo **Aluesuunnitelma-GeoPackageen** uusi taso rakennuksia varten seuraavasti:

Aloita valitsemalla ty√∂kalupalkista j√§lleen **Uusi GeoPackage-taso**. T√§ll√§ kertaa kuitenkin valitsemme **Tietokanta**-kentt√§√§n kohteeksi aiemmin luodun Aluesuunnitelma-Geopackagen, jolloin uusi taso tulee lis√§tyiksi siihen. Kun olet valinnut Aluesuunnitelma.gpkg:n tietokannaksi, anna tason nimeksi "Rakennukset" ja t√§yt√§ tason tiedot kuten alla olevassa kuvassa:

![](img/harjoitus_7/image9.png)

Tallennettaessa QGIS kysyy, korvataanko aiemmin luotu GeoPackage vai lis√§t√§√§nk√∂ uusi taso siihen. Valitse **Lis√§√§ uusi taso**.

![](img/harjoitus_7/image10.png)

Seuraavaksi laita **Tarttuminen** ![](img/harjoitus_7/image11.png), **Seuraaminen** ![](img/harjoitus_7/image12.png) **ja Self-snapping ![](img/harjoitus_7/image13.png)**p√§√§lle **Tarttumisen ty√∂kalut -paneelista**. Aseta muut tarttumisasetukset seuraavan kuvan mukaisiksi:

![](img/harjoitus_7/image14.png)

Valinnat j√§rjestyksess√§ vasemmalta oikealle:

-   Tarttuminen

-   Kaikki tasot (klikkaa kuvaketta ja voit valita asetuksen pudotusvalikosta)

-   Taitepiste (klikkaa kuvaketta ja voit valita asetuksen pudotusvalikosta)

-   10

-   px (pikseli√§)

-   Ei k√§yt√∂ss√§

-   Ei k√§yt√∂ss√§

-   Ei k√§yt√∂ss√§

-   Ota seuraaminen k√§ytt√∂√∂n

-   Self snapping (tarttuminen ty√∂n alla olevaan digitoitavaan kohteeseen)

## Rakentamistila

Jos piirt√§misen apuna tarvitaan et√§isyytt√§ tietyst√§ pisteest√§ tai tietty√§ kulmaa johonkin olemassa olevaan linjaan, rakentamistilan avulla saa n√§kyville apuviivoja piirt√§misen tueksi. Rakentamistilan ollessa aktiivisena ei voi piirt√§√§, mutta sen avulla voidaan hakea n√§kyviin tarvittavia apuviivoja esim. et√§isyyden tai kulman suhteen. Rakentamistilan voi aktivoida ennen tai kesken piirt√§misen.

Rakentamistila aktivoidaan *Digitoinnin lis√§ty√∂kalut-paneelista* l√∂ytyv√§st√§ ![](img/harjoitus_7/image17.png)![]()-nappulasta. Sen saa p√§√§lle/pois p√§√§lt√§ my√∂s pikakomennolla **C**. Digitoinnin lis√§ty√∂kalut-paneelin saa tarvittaessa auki klikkaamalla hiiren oikealla QGIS-projektissa ty√∂kalujen valintanauhasta tyhj√§√§ kohtaa ja rastittamalla Paneelit --> Digitoinnin lis√§ty√∂kalut -paneeli.

**Huom!** Rakentamistilassa ollessa ei piirret√§ mit√§√§n. Kun olet saanut rakentamistilassa toivotut apuviivat n√§kyville ja haluat aloittaa varsinaisen piirt√§misen, rakentamistila tulee sulkea joko painamalla hiirell√§ ![](img/harjoitus_7/image19.png) tai **C**-n√§pp√§imell√§. Apuviivat j√§√§v√§t n√§kyviin ja voit piirt√§√§ niiden avulla pisteen haluamaasi paikkaan.

## Rakennuksen piirto apuviivojen avulla

Lis√§ty√∂kalujen avulla voi saada n√§kyville apuviivat ja tarttumisasetukset tiettyihin kulmiin, esimerkiksi 45 tai 90 asteen v√§lein. Toiminnon saa p√§√§lle Digitoinnin lis√§ty√∂kalut-paneelista (ikkunan vasemmassa laidassa) ![](img/harjoitus_7/snap_common_angles.png)-nappulasta. Oletuksena nollakulma on vaakatasossa piirtoalueen suhteen, mutta piirt√§misen alettua kulma lasketaan viimeisen piirretyn viivan mukaan ja n√§kyviin tulee tukiviivoja haluttujen kulmien kohdalle.


### Sitten vain harjoittelemaan....

Aseta **Rakennukset-tason** editointi p√§√§lle kyn√§kuvakkeesta. Kun valitset **Lis√§√§ monikulmiokohde -ty√∂kalun**, **Ota digitoinnin lis√§ty√∂kalut k√§ytt√∂√∂n -painike** aktivoituu ![](img/harjoitus_7/image15.png). Klikkaa kuvaketta niin saat **Digitoinnin lis√§ty√∂kalut -hallintapaneeliin** QGISiin.

![](img/harjoitus_7/image16.png)

Laita viel√§ **Snap to common angles/tartu yleismpiin kulmiin --\> 90.0, 180.0, 270.0, 360.0** p√§√§lle![](img/harjoitus_7/snap_common_angles.png)

Aloita nyt **Rakennukset-tason** editointi.

1.  Harjoittele ensin rakennuksien piirt√§mist√§ apuviivojen avulla alla olevan kuvan mukaisesti

    ![](img/harjoitus_7/tarttumisen_apuviivat.gif)

2.  Seuraavaksi harjoitellaan alueen reunaviivan suuntaisesti rakennuksen piirt√§mist√§. Toimi seuraavasti:

-   Varmista, ett√§ **Ota digitoinnin lis√§ty√∂kalut k√§ytt√∂√∂n-painike** ![](img/harjoitus_7/image15.png)![]() on p√§√§ll√§.

-   Piirr√§ piste kartalle haluamaasi kohtaan. Laajennetun digitoinnin valikossa aktivoituvat kohtisuoruusty√∂kalu ![](img/harjoitus_7/image18.png) ja yhdensuuntaisuusty√∂kalu ![](img/harjoitus_7/yhdensuuntaisuus_tyokalu.png). Huom! Jos **tarttuminen** ei ole p√§√§ll√§, n√§m√§ ty√∂kalut eiv√§t aktivoidu.

-   Valitse haluamasi ty√∂kalu (kohtisuoruus tai yhdensuuntaisuus):

    -   

        a)  painamalla sen nappia hiirell√§, tai

    -   

        b)  paina **P** yhdest√§ kolmeen kertaa aktivoidaksesi ty√∂kaluja j√§rjestyksess√§: kohtisuoruus -\> yhdensuuntaisuus -\> vapaapiirto.

-   Kun jompi kumpi ty√∂kalu on valittuna, klikkaa viivaa, jonka suhteen haluat yhdensuuntaisuutta tai kohtisuoruutta. Huom! t√§m√§ klikkaus ei piirr√§ pistett√§, vaan valitsee ty√∂kalulle peilauskohteen. N√§kyviin tulee valitusta ty√∂kalusta riippuen joko yhdensuuntainen tai kohtisuora apuviiva.

-   Klikkaa toinen piste kartalle apuviivan avulla haluamaasi kohtaan. Jos haluat, voit m√§√§ritt√§√§ et√§isyyden painamalla **D** (fokus et√§isyyden sy√∂tt√∂kentt√§√§n), sy√∂tt√§m√§ll√§ et√§isyyden metrein√§ ja painamalla **enter**.

-   Jatka piirt√§mist√§ haluamallasi tavalla. Kohtisuoruutta ja yhdensuuntaisuutta voi k√§ytt√§√§ piirt√§misen aikana toistamalla askelia

## Suorakulmaisen polygonin piirt√§minen

1.  Laita tarttumisen ty√∂kalu (ty√∂tilan yl√§osassa) p√§√§lle **self-snapping** ![](img/harjoitus_7/image13.png).

2.  Laita asteen mukaiset tukiviivat ja tarttuminen p√§√§lle laajennetun digitoinnin paneelista ![](img/harjoitus_7/snap_common_angles.png). Riitt√§v√§ tarkkuus on t√§ss√§ *"90, 180, 270, 360 astetta"*.

3.  Aloita piirt√§minen piirt√§m√§ll√§ ensimm√§iset kaksi pistett√§ haluttuihin kohtiin.

4.  Kolmannen pisteen piirt√§mist√§ helpottamaan n√§kyville tulee apuviiva kohtisuoraan jo piirrettyyn viivaan. Piirr√§ t√§m√§n avulla kolmas piste haluttuun kohtaan.

5.  Hae seuraava kohtisuora apuviiva n√§kyviin liikuttamalla hiirt√§ kohti nelj√§tt√§ pistett√§, mutta √ÑL√Ñ paina hiiren nappulaa. Kun apuviiva on n√§kyviss√§ ja laajennetun digitoinnin paneelissa n√§kyy kulman arvona 90 astetta paina **CTRL+ A** lukitaksesi kulman arvo. √ÑL√Ñ klikkaa nelj√§tt√§ pistett√§ kartalle.

6.  Vie hiiri suorakulmion aloituspisteeseen ja kun osoitin tarttuu pisteeseen, **klikkaa sit√§ hiirell√§**.¬†

7.  Saadaksesi piirt√§misen p√§√§t√∂kseen, **klikkaa viel√§ hiiren oikealla** **n√§pp√§imell√§.** Suorakulmio on valmis.

![](img/harjoitus_7/Suorakulmaisen_polygonin_piirtaminen.gif)

## Rakennustilan hy√∂dynt√§minen rakennuksen piirt√§misess√§

Piirret√§√§n uusi kohde tietylle et√§isyydelle ja tietyss√§ kulmassa halutusta pisteest√§ tai linjasta. Esimerkiksi, jos halutaan piirt√§√§ 15 metrin et√§isyydelle tontin reunasta suorakulmainen rakennus, jonka kukin sivu on 35 metri√§, sen voi tehd√§ laajennetun digitoinnin ty√∂kaluja hy√∂dynt√§en mm. seuraavasti:

1.  Valitse **Rakennukset**-taso aktiiviseksi.

2.  Laita **editointi** p√§√§lle ![](img/harjoitus_7/toggle_editing.png) **Rakennukset**-tasolle,¬† **monikulmiokohteen piirt√§minen p√§√§lle** ![](img/harjoitus_7/monikulmio_kohde.png) sek√§ paina **Ota digitoinnin lis√§ty√∂kalut k√§ytt√∂√∂n-painike** aktiiviseksi ![](img/harjoitus_7/image15.png).

3.  Laita **digitoinnin lis√§ty√∂kalujen** paneelista (vasen reuna) **rakentamistila** p√§√§lle ![](img/harjoitus_7/image19.png) (tai painamalla **C**).

4.  Aseta halutun kiinteist√∂nrajan nollakulma valitsemalla rajalta kaksi pistett√§.

5.  Valitse haluttu tukikulma 90 astetta painamalla **A** (kerran tai kahdesti, niin ett√§ fokus siirtyy laajennetun digitointipaneelin kohtaan a(ngle)) ja sy√∂tt√§m√§ll√§ luku 90. Paina **enter**. K√§ytt√∂√∂n tulee apuviiva kohtisuorasti kiinteist√∂nrajaan. Huom! Jos kulma-asteiden apuviivat ovat k√§yt√∂ss√§ (![](img/harjoitus_7/snap_common_angles.png)-valikosta), saat automaattisesti apuviivoja piirt√§misen avuksi eik√§ kulman arvoa tarvitse sy√∂tt√§√§ erikseen.

6.  Valitse haluttu et√§isyys 15 metri√§ painamalla **D** (fokus siirtyy kohtaan d(istance)). Sy√∂tet√§√§n **luku 15**. Painetaan **enter**. K√§ytt√∂√∂n tulee s√§de 15 metrin et√§isyydelle kiinteist√∂nrajaan piirretyn j√§lkimm√§isen apupisteen mukaan. HUOM! Mit√§√§n ei ole viel√§ piirretty.

7.  Aloita piirt√§minen poistamalla **rakentamistila** k√§yt√∂st√§. ![](img/harjoitus_7/image19.png) (tai painamalla **C**).

8. Klikkaa karttatasolle piste *15 m* kohdalle, eli kohtaan josta haluat aloittaa rakennuksen ensimm√§isen sein√§n piirt√§misen.

9. Suorakulma pysyy valittuna, mutta et√§isyys halutaan muuttaa 35 metriin (rakennuksen 1. sein√§n mitta). Paina **D**, sy√∂t√§ arvoksi 35 ja paina **enter**. Apus√§de muuttuu 35 metriin. Piirr√§ rakennuksen seuraava nurkka.

10. Vaihda et√§isyydeksi 45 painamalla j√§lleen **D**, sy√∂tt√§m√§ll√§ arvo ja painamalla **enter**. Ympyr√§ kasvaa ja piirt√§minen voidaan tehd√§ sen ja kohtisuoran apuviivan avulla. Et√§isyys ja kulma pysyv√§t samana: piirr√§ kolmas nurkkapiste.

11. Toista kohdat 9 ja 10.

12. Paina lopuksi hiiren oikeaa n√§pp√§int√§, jolloin alue sulkeutuu. Rakennus on valmis.

![*Rakennuksen piirt√§minen k√§ytt√§m√§ll√§ aluksi rakennustilaa apuna et√§isyyden m√§√§ritt√§miseen alueen rajasta. T√§m√§n j√§lkeen rakennuksen mitat annetaan painamalla D ja antamalla sein√§n mitta, jolloin piirt√§misen avuksi tulee ympyr√§ annetun et√§isyyden s√§teell√§.*](img/harjoitus_7/Rakennus_tontin_rajan_suuntaisesti.gif)

T√§m√§n j√§lkeen digitoi aineistoon rakennuksia v√§hint√§√§n kolme kappaletta hy√∂dynt√§en laajennetun digitoinnin ominaisuuksia. Koita my√∂s k√§√§nt√§√§ rakennuksia 45 astetta hy√∂dynt√§en **Kierr√§ kohteita -ty√∂kalua** ![](img/harjoitus_7/image21.png). **CTRL+hiiren klikkaus** asettaa k√§√§nn√∂kselle kulmapisteen, jonka mukaan k√§√§nt√∂ suoritetaan.

Voit my√∂s testata pienent√§√§ tai suurentaa tekemi√§si polygoneja. T√§t√§ varten voit kopioida jo tekem√§si rakennuspolygonin. Valitse haluamasi polygoni **valintaty√∂kalulla** ![]()![](img/harjoitus_7/valintatyokalu.png) ja kopioi se n√§pp√§inkomennolla **CTRL+C** tai painamalla hiirell√§ valikosta **Kopioi kohteet** ![](img/harjoitus_7/kopioi_kohteet.png). Liit√§ haluamallesi tasolle **CTRL+V** tai **Liit√§ kohteet** ![](img/harjoitus_7/liita_kohteet.png). Valitse Advanced Digitizing -valikosta **"Tee yhdensuuntaissiirtym√§"** -ty√∂kalu (Offset curve) ![](img/harjoitus_7/offset_curve.png). Klikkaa kerran johonkin polygonin pisteeseen. Ruudun oikeaan yl√§kulmaan ilmestyy **Siirtym√§**-asetusvalikko (Offset), johon voi sy√∂tt√§√§ halutun et√§isyyden alkuper√§isen polygonin viivasta (esim. -5 tekee tuo polygonin reunoja 5 metri√§ sis√§√§np√§in aluper√§isest√§). Valikossa voi valita my√∂s kulmien muodot ![](img/harjoitus_7/kulmien_muodot_asetus.png)-nappia painamalla.

![Pienennetyn tai suurennetun polygonin kulmien muotoa voi muokata valikosta.](img/harjoitus_7/Polygonin_kulma-asetukset.png)

Ota lopuksi tason editointi pois p√§√§lt√§ ja tallenna tasoon tehdyt muutokset.

Ja sitten ei kun harjoittelemaan k√§ytt√∂√§! Esitellyt ty√∂kalut voivat tuntua hankalilta ensialkuun, mutta jo pienell√§kin harjoituksella ja toistoilla k√§yt√§nn√∂t tulevat tutuksi ja ty√∂skentely jouhevoituu.

Olemme julkaisseet blogin my√∂s liittyen [CAD-aineistojen k√§sittelyyn QGISiss√§](https://gispo.fi/blogi/cad-aineistot-ja-qgis/).

## Lis√§teht√§v√§: Lis√§√§ Rakennukset-tasolle funktio, jonka avulla pinta-alatieto p√§ivittyy automaattisesti

1.  Avaa **Rakennukset-tason ominaisuudet**. Mene kohtaan **Attribuuttilomake**.

2.  Valitse kentist√§ **Pinta-ala** ja selaa kohtaan **Oletusarvot**.

3.  Avaa oikean reunan funktio-painikkeesta auki **lausekkeen muokkaus -ikkuna**.

4.  Valitse Geometrian alta `$area`. Funktion voi kirjoittaa my√∂s itse suoraan oletusarvot -kentt√§√§n.

5.  Jos haluat viel√§ py√∂rist√§√§ arvoa niin, ett√§ kaikki desimaalit eiv√§t n√§y, k√§yt√§ round-funktiota. Jos esimerkiksi haluat py√∂rist√§√§ pinta-alan kahden desimaalin tarkkuudella lauseke on `round($area,2)`

6.  **Lopuksi muista laittaa t√§pp√§ kohtaan "K√§yt√§ oletusarvoa p√§ivityksess√§"**, niin QGIS laskee uudelle polygonille automaattisesti pinta-alan! üéâ

    ![](img/harjoitus_7/Attribuuttilomake.png)![](img/harjoitus_7/Lauseke.png){width="519"}

## Lopuksi

Avaa **Kuvaustekniikka-paneeli** tai mene tason ominaisuuksien kautta **Kuvaustekniikka-v√§lilehdelle** ja muokkaa editoitujen kohteiden v√§rit vastaamaan taustakartan v√§rej√§ **V√§rin valitsin -ty√∂kalua** hy√∂dynt√§en.

Kun olet valmis, tallenna projektitiedosto kurssihakemistoon pikan√§pp√§imell√§ **CTRL + T** (englanninkielisess√§ QGISiss√§ **CTRL + S**) tai p√§√§valikosta **Projekti \> Tallenna**.

::: hint-box
**Psst!** Muista tukipalvelu! Koulutuksen j√§lkeen saat henkil√∂kohtaista tukea Gispon tukipalvelun kautta l√§hett√§m√§ll√§ yksinkertaisesti koulutustuki\@gispo.fi-s√§hk√∂postiosoitteeseen kysymyksen tai kommentin jostakin sinua mietitytt√§v√§st√§ asiasta. Gispon tiimi auttaa sinua toimiesi √§√§rell√§. Kysymykset k√§sitell√§√§n henkil√∂kohtaisesti.
:::

