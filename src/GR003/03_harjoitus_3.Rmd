# Harjoitus 2: Digitointi

**Harjoituksen sis√§lt√∂**

Harjoituksessa tehd√§√§n digitoinnin operaatioita QGISill√§.

**Harjoituksen tavoite**

Harjoituksen j√§lkeen opiskelija osaa hy√∂dynt√§√§ monipuolisemmin digitoinnin ja editoinnin ominaisuuksia.


## Valmistautuminen

Avaa uusi QGIS-projekti (**Projekti \> Uusi**) ja tallenna se nimell√§ "**QGIS-harjoitus 3**".

Lis√§√§ projektiin kurssihakemistosta seuraavat ortokuvat Maanmittauslaitokselta:

-   L4321G

-   L4321H

## Uusi taso ja digitoinnin perusty√∂kalut

T√§ss√§ harjoituksessa teemme rakennuksia rakennuspaikoille. 

Aloita valitsemalla ty√∂kalupalkista **Uusi GeoPackage-taso**. T√§ll√§ kertaa valitsemme **Tietokanta**-kentt√§√§n kohteeksi aiemmin luodun "Porvoo_koulutus"-Geopackagetiedoston, jolloin uusi taso tulee lis√§tyiksi siihen. Kun olet valinnut Porvoo_koulutus.gpkg:n tietokannaksi, anna tason nimeksi "Rakennukset" ja valitse geometriaksi "monikulmio". Koordinaattij√§rjestelm√§ pit√§isi olla EPSG:3880.Lis√§√§ kaksi uutta kentt√§√§. Nimeksi ensim√§iselle "K√§ytt√∂tarkoitus" ja Tyyppi "Teksti". Toiselle nimi "Pohjan_ala" ja Tyyppi "Desimaaliluku".
![](img/harjoitus_2/image1.png)

Tallennettaessa QGIS kysyy, korvataanko aiemmin luotu GeoPackage vai lis√§t√§√§nk√∂ uusi taso siihen. Valitse Lis√§√§ uusi taso.

![](img/harjoitus_2/image2.png)

Tarkista, ett√§ sinulla on esill√§ **Digitoinnin ty√∂kalupalkki** sek√§ **Tarttumisen ty√∂kalut**. T√§m√§n voit tehd√§ N√§yt√§-yl√§valikon kautta (Ty√∂kalut)

![](img/harjoitus_2/image37.png)
Laita Rakennusket-tason muokkaustila p√§√§lle ![](img/harjoitus_1/image9.png)

Nyt voit piirt√§√§ uusia kohteita Rakennus-tasolle painamalla ensin "Lis√§√§ monikulmiokohde" ![](img/harjoitus_1/image6.png) 

Sen j√§lkeen voit vapaasti piirt√§√§ rakennuksen taustakartan mukaan. Kokeile piirt√§√§ yksi rakennus ja kun olet valmis niin painat hiiren oikealla n√§pp√§imell√§. Nyt voit lis√§t√§ rakennuksen k√§ytt√∂tarkoituksen (voit keksi√§ itse). Pinta-alaa ei laiteta, koska sit√§ lasketaan geometrian mukaan my√∂hemmin.

## Tarttuminen

QGISill√§ on monta hy√∂dyllist√§ ty√∂kalua, jotka helpottavat digitointia. Voit seuraavaksi laittaa "Tarttuminen" p√§√§lle magneettisymbolista ![](img/harjoitus_1/image3.png)
Tarttuminen tarkoittaa, ett√§ kun olet piirt√§m√§ss√§ uutta kohdetta, niin voit helposti tarttua kiinnni olemassa oleviin kohteisiin, jotta ei tule p√§√§llekk√§isyyksi√§.

![](img/harjoitus_2/image38.gif)
Etsi nyt kartalta rakennus joka on kiinni toisessa rakennuksessa. Piirr√§ ensin yksi rakennus ja tarkista, ett√§ sinulla on Tarttuminen p√§√§ll√§. Piirr√§ sitten se toinen rakennus niin, ett√§ se "tarttuu kiinni" ensimm√§iseen rakennukseen. Voit katsoa esimerkin yll√§ olevasta kuvasta.

## Lis√§ty√∂kalut apuun

Kun ollaan piirt√§m√§ss√§ rakennuksia niin voisi olla hyv√§ saada 90 asteen kulmia rakennuksiin. Mene **N√§yt√§**-yl√§valikon kautta **Paneelit**-valikkoon ja tarkista, ett√§ **Digitoinnin lis√§ty√∂kalut**-paneeli on n√§kyviss√§. Ota sitten digitoinnin lis√§ty√∂kalut k√§ytt√∂√∂n painamalla ![](img/harjoitus_2/image14.png).

Lis√§ty√∂kalujen avulla voi saada n√§kyville apuviivat ja tarttumisasetukset tiettyihin kulmiin, esimerkiksi 45 tai 90 asteen v√§lein. Toiminnon saa p√§√§lle laajennetun digitoinnin paneelista (ikkunan vasemmassa laidassa). Laita  **tartu yleismpiin kulmiin --\> 90.0, 180.0, 270.0, 360.0** p√§√§lle ![](img/harjoitus_2/image9.png)-nappulasta

Oletuksena nollakulma on vaakatasossa piirtoalueen suhteen, mutta piirt√§misen alettua kulma lasketaan viimeisen piirretyn viivan mukaan ja n√§kyviin tulee tukiviivoja haluttujen kulmien kohdalle.

Kokeile nyt piirt√§√§ muutama muu rakennus 90 asteen kulmilla. Muista tallentaa tason muutoksia tasaisin v√§liajoin. 


## Rakentamistila

Jos piirt√§misen apuna tarvitaan et√§isyytt√§ tietyst√§ pisteest√§ tai tietty√§ kulmaa johonkin olemassa olevaan linjaan, rakentamistilan avulla saa n√§kyville apuviivoja piirt√§misen tueksi. Rakentamistilan ollessa aktiivisena ei voi piirt√§√§, mutta sen avulla voidaan hakea n√§kyviin tarvittavia apuviivoja esim. et√§isyyden tai kulman suhteen. Rakentamistilaa voi k√§ytt√§√§ ennen tai kesken piirt√§misen.

Rakentamistila aktivoidaan laajennetun digitoinnin paneelista l√∂ytyv√§st√§ ![](img/harjoitus_2/image7.png)-nappulasta. Sen saa p√§√§lle/pois p√§√§lt√§ my√∂s pikakomennolla **C**.

Huom! Rakentamistilassa ollessa ei piirret√§ mit√§√§n. Kun olet saanut rakentamistilassa toivotut apuviivat n√§kyville ja haluat aloittaa varsinaisen piirt√§misen, rakentamistila tulee sulkea joko painamalla hiirell√§ ![](img/harjoitus_2/image8.png) tai **C**-n√§pp√§imell√§. Apuviivat j√§√§v√§t n√§kyviin ja voit piirt√§√§ niiden avulla pisteen haluamaasi paikkaan.


### Sitten vain harjoittelemaan....

Aseta **Rakennukset-tason** editointi p√§√§lle kyn√§kuvakkeesta. Kun valitset **Lis√§√§ polygonikohde -ty√∂kalun**, **Laajennettu digitointi -kuvake** aktivoituu ![](img/harjoitus_2/image10.png). Klikkaa kuvaketta niin saat **Laajennettu digitointi -hallintapaneeliin** QGISiin.

![](img/harjoitus_2/image11.png)

Laita viel√§ **Snap to common angles/tartu yleismpiin kulmiin --\> 90.0, 180.0, 270.0, 360.0** p√§√§lle![](img/harjoitus_2/image9.png)

Aloita nyt **Rakennukset-tason** editointi.

1.  Harjoittele ensin rakennuksien piirt√§mist√§ apuviivojen avulla alla olevan kuvan mukaisesti

    ![](img/harjoitus_2/image13.gif)

2.  Seuraavaksi harjoitellaan alueen reunaviivan suuntaisesti rakennuksen piirt√§mist√§. Toimi seuraavasti:

-   Varmista, ett√§ laajennettu digitointi ![](img/harjoitus_2/image10.png){width="26" height="25"} on p√§√§ll√§.

-   Piirr√§ piste kartalle haluamaasi kohtaan. Laajennetun digitoinnin valikossa aktivoituvat kohtisuoruusty√∂kalu ![](img/harjoitus_2/image15.png) ja rinnakkainenty√∂kalu ![](img/harjoitus_2/image16.png).

-   Valitse haluamasi ty√∂kalu (kohtisuoruus tai rinnakkainen):

    -   

        a)  painamalla sen nappia hiirell√§, tai

    -   

        b)  paina **P** yhdest√§ kolmeen kertaa aktivoidaksesi ty√∂kaluja j√§rjestyksess√§: kohtisuoruus -\> yhdensuuntaisuus -\> vapaapiirto.

-   Kun jompi kumpi ty√∂kalu on valittuna, klikkaa viivaa, jonka suhteen haluat yhdensuuntaisuutta tai kohtisuoruutta. Huom! t√§m√§ klikkaus ei piirr√§ pistett√§, vaan valitsee ty√∂kalulle peilauskohteen. N√§kyviin tulee valitusta ty√∂kalusta riippuen joko yhdensuuntainen tai kohtisuora apuviiva.

-   Klikkaa toinen piste kartalle apuviivan avulla haluamaasi kohtaan. Jos haluat, voit m√§√§ritt√§√§ et√§isyyden painamalla **D** (fokus et√§isyyden sy√∂tt√∂kentt√§√§n), sy√∂tt√§m√§ll√§ et√§isyyden metrein√§ ja painamalla **enter**.

-   Jatka piirt√§mist√§ haluamallasi tavalla. Kohtisuoruutta ja yhdensuuntaisuutta voi k√§ytt√§√§ piirt√§misen aikana toistamalla askelia

## Suorakulmaisen polygonin piirt√§minen

1.  Laita tarttumisen ty√∂kalu (ty√∂tilan yl√§osassa) p√§√§lle **self-snapping** ![](img/harjoitus_2/image5.png).

2.  Laita asteen mukaiset tukiviivat ja tarttuminen p√§√§lle laajennetun digitoinnin paneelista ![](img/harjoitus_2/image9.png). Riitt√§v√§ tarkkuus on t√§ss√§ *"90, 180, 270, 360 astetta"*.

3.  Aloita piirt√§minen piirt√§m√§ll√§ ensimm√§iset kaksi pistett√§ haluttuihin kohtiin.

4.  Kolmannen pisteen piirt√§mist√§ helpottamaan n√§kyville tulee apuviiva kohtisuoraan jo piirrettyyn viivaan. Piirr√§ t√§m√§n avulla kolmas piste haluttuun kohtaan.

5.  Hae seuraava kohtisuora apuviiva n√§kyviin liikuttamalla hiirt√§ kohti nelj√§tt√§ pistett√§, mutta √ÑL√Ñ paina hiiren nappulaa. Kun apuviiva on n√§kyviss√§ ja laajennetun digitoinnin paneelissa n√§kyy kulman arvona 90 astetta paina **CTRL+ A** lukitaksesi kulman arvo. √ÑL√Ñ klikkaa nelj√§tt√§ pistett√§ kartalle.

6.  Vie hiiri suorakulmion aloituspisteeseen ja kun osoitin tarttuu pisteeseen, **klikkaa sit√§ hiirell√§**.¬†

7.  Saadaksesi piirt√§misen p√§√§t√∂kseen, **klikkaa viel√§ hiiren oikealla** **n√§pp√§imell√§.** Suorakulmio on valmis.

![](img/harjoitus_2/image19.gif)

## Teht√§v√§: "Rakennus 35√ó40 m tontin rajan suuntaisesti, et√§isyys rajaan 15 m"

Piirret√§√§n uusi kohde tietylle et√§isyydelle ja tietyss√§ kulmassa halutusta pisteest√§ tai linjasta. Esimerkiksi jos halutaan piirt√§√§ 15 metrin et√§isyydelle tontin reunasta suorakulmainen rakennus, jonka kukin sivu on 30 metri√§, sen voi tehd√§ laajennetun digitoinnin ty√∂kaluja hy√∂dynt√§en mm. seuraavasti:

1.  Lis√§√§ kurssihakemistostasi kiinteist√∂rajat sis√§lt√§v√§ vektoritaso **MML_kiinteistorekisterikartta_05-2023.gpkg**

2.  Valitse **Rakennukset** taso aktiiviseksi.

3.  Laita **editointi** p√§√§lle ![](img/harjoitus_2/image20.png){width="26" height="24"} **Rakennukset**- tasolle,¬† **monikulmiokohteen piirt√§minen p√§√§lle** ![](img/harjoitus_2/image21.png) sek√§ l**aajennetun digitoinnin ty√∂kalut** aktiivisiksi ![](img/harjoitus_2/image10.png){width="26" height="24"}.

4.  **Laita laajennetun digitoinnin** paneelista (vasen reuna) **rakentamistila** p√§√§lle ![](img/harjoitus_2/image8.png) (tai painamalla **C**).

5.  Aseta halutun kiinteist√∂nraja nollakulmaksi valitsemalla rajalta kaksi pistett√§.

6.  Valitse haluttu tukikulma 90 astetta painamalla **A** (kerran tai kahdesti, niin ett√§ fokus siirtyy laajennetun digitointipaneelin kohtaan a(ngle)) ja sy√∂tet√§√§n luku 90. Painetaan **enter**. K√§ytt√∂√∂n tulee apuviiva kohtisuorasti kiinteist√∂nrajaan. Huom! Jos kulma-asteiden apuviivat ovat k√§yt√∂ss√§ (![](img/harjoitus_2/image9.png)-valikosta), saat automaattisesti apuviivoja piirt√§misen avuksi eik√§ kulman arvoa tarvitse sy√∂tt√§√§ erikseen.

7.  Valitse haluttu et√§isyys 15 metri√§ painamalla **D** (fokus siirtyy kohtaan d(istance)). Sy√∂tet√§√§n **luku 15**. Painetaan **enter**. K√§ytt√∂√∂n tulee s√§de 15 m et√§isyydelle kiinteist√∂nrajaan piirretyn j√§lkimm√§isen apupisteen mukaan. HUOM! Mit√§√§n ei ole viel√§ piirretty.

8.  Aloita piirt√§minen poistamalla **rakentamistila** k√§yt√∂st√§ ![](img/harjoitus_2/image8.png) (tai painamalla **C**).

9.  **Piirr√§** ensimm√§inen piste kohtisuoraa apuviivaa ja -s√§dett√§ hy√∂dynt√§en.

10. Suora kulma pysyy valittuna, mutta et√§isyys halutaan muuttaa 35 metriin (rakennuksen 1. sein√§n mitta). Paina **D**, sy√∂t√§ arvoksi 35 ja paina **enter**. Apus√§de muuttuu 35 metriin. Piirr√§ rakennuksen seuraava nurkka.

11. Vaihda et√§isyydeksi 45 painamalla j√§lleen, sy√∂tt√§m√§ll√§ arvo ja painamalla **enter**. Ympyr√§ kasvaa ja piirt√§minen voidaan tehd√§ sen ja kohtisuoran apuviivan avulla. Et√§isyys ja kulma pysyv√§t samana: piirr√§ kolmas nurkkapiste.

12. Toista kohta 9.

13. Paina lopuksi hiiren oikeaa n√§pp√§int√§, jolloin alue sulkeutuu. N√§in rakennus on valmis.

![*Rakennuksen piirt√§minen k√§ytt√§m√§ll√§ aluksi rakennustilaa apuna et√§isyyden m√§√§ritt√§miseen alueen rajasta. T√§m√§n j√§lkeen rakennuksen mitat annetaan painamalla D ja antamalla sein√§n mitta, jolloin piirt√§misen avuksi tulee ympyr√§ annetun et√§isyyden s√§teell√§.*](img/harjoitus_2/image26.gif)

T√§m√§n j√§lkeen digitoi aineistoon rakennuksia v√§hint√§√§n kolme kappaletta hy√∂dynt√§en laajennetun digitoinnin ominaisuuksia. Koita my√∂s k√§√§nt√§√§ rakennuksia 45 astetta hy√∂dynt√§en **Kierr√§ kohteita -ty√∂kalua** ![](img/harjoitus_2/image27.png). **CTRL+hiiren klikkaus** asettaa k√§√§nn√∂kselle kulmapisteen, jonka mukaan k√§√§nt√∂ suoritetaan.

Ota lopuksi tason editointi pois p√§√§lt√§ ja tallenna tasoon tehdyt muutokset.

## Case rakennusala tontille: polygonin kopiointi toiseksi itse√§√§n pienemm√§ksi

1.  Lis√§√§ **MML_kiinteistorekisterikartta_05-2023.gpkg** taso (jatkossa "l√§ht√∂taso").

2.  Valitse polygoni/palsta, jonka haluat kopioida **valintaty√∂kalulla** ![](img/harjoitus_2/image28.png).

3.  Kopioi polygoni leikep√∂yd√§lle n√§pp√§inkomennolla **CTRL+C** tai (tai painamalla hiirell√§ valikosta **Kopioi kohteet** ![](img/harjoitus_2/image29.png)).

4.  Jos haluat luoda kopion eri tasolle kuin mill√§ alkuper√§inen polygoni on, valitse kohdetaso tasopaneelista ja laita se **editointitilaan** ![](img/harjoitus_2/image20.png).

5.  Liit√§ kopio tasolle painamalla **CTRL+V** tai valikosta **Liit√§ kohteet** ![](img/harjoitus_2/image31.png).

6.  Huomaa, ett√§ jos kohdetaso sijaitsee l√§hdetason alapuolella, liitetty polygoni j√§√§ alkuper√§isen polygonin alle. Saat sen n√§kyviin joko vaihtamalla tasojen j√§rjestyst√§ (raahaamalla niit√§ tasot-paneelissa hiiren avulla) tai ottamalla p√§√§ll√§ olevan tason pois n√§kyvist√§ tasopaneelissa.

7.  Jos uutta polygonia tarvitsee muokata (esim. pienent√§√§), palaa kohdetasolle ja valitse polygoni.

8.  Valitse Advanced Digitizing -valikosta **"Tee yhdensuuntaissiirtym√§"** -ty√∂kalu (Offset curve) ![](img/harjoitus_2/image32.png).

9.  Klikkaa kerran johonkin polygonin pisteeseen. Ruudun oikeaan yl√§kulmaan ilmestyy **Siirtym√§**-asetusvalikko (Offset), johon voi sy√∂tt√§√§ halutun et√§isyyden alkuper√§isen polygonin viivasta (esim. -5 tekee tuo polygonin reunoja 5 metri√§ sis√§√§np√§in aluper√§isest√§). Valikossa voi valita my√∂s kulmien muodot ![](img/harjoitus_2/image33.png)-nappia painamalla.

![*Pienennetyn tai suurennetun polygonin kulmien muotoa voi muokata valikosta*.](img/harjoitus_2/image34.png)

![](img/harjoitus_2/image35.gif)Ja sitten ei kun harjoittelemaan k√§ytt√∂√§! Esitellyt ty√∂kalut voivat tuntua hankalilta ensialkuun, mutta jo pienell√§kin harjoituksella ja toistoilla k√§yt√§nn√∂t tulevat tutuksi ja ty√∂skentely jouhevoituu.

Olemme julkaisseet blogin my√∂s liittyen [CAD-aineistojen k√§sittelyyn QGISiss√§](https://gispo.fi/blogi/cad-aineistot-ja-qgis/).

## Lis√§teht√§v√§: Lis√§√§ Rakennukset tasolle funktio, jolla pinta-ala tieto p√§ivittyy automaattisesti

1.  Avaa Rakennukset-tason ominaisuudet. Mene kohtaan Attribuuttilomake

2.  Valitse kentist√§ Pinta-ala ja selaa kohtaan Oletusarvot.

3.  Avaa oikean reunan funktio-painikkeesta auki lausekkeen muokkaus -ikkuna.

4.  Valitse Geometrian alta `$area`. Funktion voi my√∂s itse kirjoittaa suoraan oletusarvot -kentt√§√§n.

5.  Jos haluat viel√§ py√∂rist√§√§ arvoa niin, ettei kaikki desimaalit n√§y niin k√§yt√§ round-funktiota. Jos esimerkiksi haluat py√∂rist√§√§ pinta-alan kahden desimaalin tarkkuudella lauseke on `round($area,2)`

6.  **Lopuksi muista laittaa t√§pp√§ tuohon "K√§yt√§ oletusarvoa p√§ivityksess√§" kohtaan**, niin QGIS laskee uudelle polygonille automaattisesti pinta-alan! üéâ

    ![](img/harjoitus_2/image36.png)![](img/harjoitus_2/image37.png){width="519"}

## Lopuksi

Avaa **Kuvaustekniikka-paneeli** tai mene tason ominaisuuksien kautta **Kuvaustekniikka-v√§lilehdelle** ja muokkaa editoitujen kohteiden v√§rit vastaamaan taustakartan v√§rej√§ **V√§rin valitsin -ty√∂kalua** hy√∂dynt√§en.

Voit viel√§ hy√∂dynt√§√§ alueen reunaa k√§ytt√§en **Seuraaminen-ominaisuutta**:

¬†<https://docs.qgis.org/3.22/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html#automatic-tracing>

Kun olet valmis, tallenna projektitiedosto kurssihakemistoon pikan√§pp√§imell√§ **CTRL + T** (englanninkielisess√§ QGISiss√§ **CTRL + S**) tai p√§√§valikosta **Projekti \> Tallenna**.

::: hint-box
Psst! Muista tukipalvelu! Koulutuksen j√§lkeen saat henkil√∂kohtaista tukea Gispon tukipalvelun kautta l√§hett√§m√§ll√§ yksinkertaisesti koulutustuki\@gispo.fi -s√§hk√∂postiosoitteeseen kysymyksen tai kommentin jostakin sinua mietitytt√§v√§st√§ asiasta. Gispon tiimi auttaa sinua toimiesi √§√§rell√§. Kysymykset k√§sitell√§√§n henkil√∂kohtaisesti.
:::

