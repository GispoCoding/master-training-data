# Harjoitus 3: Digitointi

**Harjoituksen sis√§lt√∂**

Harjoituksessa tehd√§√§n digitoinnin operaatioita QGISill√§.

**Harjoituksen tavoite**

Harjoituksen j√§lkeen opiskelija osaa hy√∂dynt√§√§ monipuolisemmin digitoinnin ja editoinnin ominaisuuksia.


## Valmistautuminen

Avaa uusi QGIS-projekti (**Projekti \> Uusi**) ja tallenna se nimell√§ "**QGIS-harjoitus 3**".

Lis√§√§ projektiin kurssihakemistosta seuraavat ortokuvat Maanmittauslaitokselta:

-   L4321G

-   L4321H

## Uusi taso ja digitoinnin perusty√∂kalut

T√§ss√§ harjoituksessa teemme rakennuksia rakennuspaikoille. 

Aloita valitsemalla ty√∂kalupalkista **Uusi GeoPackage-taso**. T√§ll√§ kertaa valitsemme **Tietokanta**-kentt√§√§n kohteeksi aiemmin luodun "Porvoo_koulutus"-Geopackagetiedoston, jolloin uusi taso tulee lis√§tyiksi siihen. Kun olet valinnut Porvoo_koulutus.gpkg:n tietokannaksi, anna tason nimeksi "Rakennukset" ja valitse geometriaksi "monikulmio". Koordinaattij√§rjestelm√§ pit√§isi olla EPSG:3880.Lis√§√§ kaksi uutta kentt√§√§. Nimeksi ensim√§iselle "K√§ytt√∂tarkoitus" ja Tyyppi "Teksti". Toiselle nimi "Pohjan_ala" ja Tyyppi "Desimaaliluku".
![](img/harjoitus_3/image1.png)

Tallennettaessa QGIS kysyy, korvataanko aiemmin luotu GeoPackage vai lis√§t√§√§nk√∂ uusi taso siihen. Valitse Lis√§√§ uusi taso.

![](img/harjoitus_3/image2.png)

Tarkista, ett√§ sinulla on esill√§ **Digitoinnin ty√∂kalupalkki** sek√§ **Tarttumisen ty√∂kalut**. T√§m√§n voit tehd√§ N√§yt√§-yl√§valikon kautta (Ty√∂kalut)

![](img/harjoitus_3/image37.png)
Laita Rakennukset-tason muokkaustila p√§√§lle ![](img/harjoitus_3/image9.png)

Nyt voit piirt√§√§ uusia kohteita Rakennus-tasolle painamalla ensin "Lis√§√§ monikulmiokohde" ![](img/harjoitus_3/image6.png) 

Sen j√§lkeen voit vapaasti piirt√§√§ rakennuksen taustakartan mukaan. Kokeile piirt√§√§ yksi rakennus ja kun olet valmis niin painat hiiren oikealla n√§pp√§imell√§. Nyt voit lis√§t√§ rakennuksen k√§ytt√∂tarkoituksen (voit keksi√§ itse). Pinta-alaa ei laiteta, koska sit√§ lasketaan geometrian mukaan my√∂hemmin.

## Tarttuminen

QGISill√§ on monta hy√∂dyllist√§ ty√∂kalua, jotka helpottavat digitointia. Voit seuraavaksi laittaa "Tarttuminen" p√§√§lle magneettisymbolista ![](img/harjoitus_3/image3.png)
Tarttuminen tarkoittaa, ett√§ kun olet piirt√§m√§ss√§ uutta kohdetta, niin voit helposti tarttua kiinnni olemassa oleviin kohteisiin, jotta ei tule p√§√§llekk√§isyyksi√§.

![](img/harjoitus_3/image38.gif)
Etsi nyt kartalta rakennus joka on kiinni toisessa rakennuksessa. Piirr√§ ensin yksi rakennus ja tarkista, ett√§ sinulla on Tarttuminen p√§√§ll√§. Piirr√§ sitten se toinen rakennus niin, ett√§ se "tarttuu kiinni" ensimm√§iseen rakennukseen. Voit katsoa esimerkin yll√§ olevasta kuvasta.

## Lis√§ty√∂kalut apuun

Kun ollaan piirt√§m√§ss√§ rakennuksia niin voisi olla hyv√§ saada 90 asteen kulmia rakennuksiin. Mene **N√§yt√§**-yl√§valikon kautta **Paneelit**-valikkoon ja tarkista, ett√§ **Digitoinnin lis√§ty√∂kalut**-paneeli on n√§kyviss√§. Ota sitten digitoinnin lis√§ty√∂kalut k√§ytt√∂√∂n painamalla ![](img/harjoitus_3/image14.png).

Lis√§ty√∂kalujen avulla voi saada n√§kyville apuviivat ja tarttumisasetukset tiettyihin kulmiin, esimerkiksi 45 tai 90 asteen v√§lein. Toiminnon saa p√§√§lle laajennetun digitoinnin paneelista (ikkunan vasemmassa laidassa). Laita  **tartu yleismpiin kulmiin --\> 90.0, 180.0, 270.0, 360.0** p√§√§lle ![](img/harjoitus_3/image9.png)-nappulasta

Oletuksena nollakulma on vaakatasossa piirtoalueen suhteen, mutta piirt√§misen alettua kulma lasketaan viimeisen piirretyn viivan mukaan ja n√§kyviin tulee tukiviivoja haluttujen kulmien kohdalle.

Kokeile nyt piirt√§√§ muutama muu rakennus 90 asteen kulmilla. Muista tallentaa tason muutoksia tasaisin v√§liajoin. 

## Lis√§teht√§v√§ 1: Kokeile ty√∂kaluja rohkeast
Voit kokeilla my√∂s CAD-pohjaista digitointia, joka on kehittynyt verrattain paljon QGISin uudessa versiossa. Ty√∂kalut sait siis esiin lis√§√§m√§ll√§ **Digitoinnin lis√§ty√∂kalut** -yl√§menusta **N√§yt√§ ‚Üí Ty√∂kalut ‚Üí Digitoinnin lis√§ty√∂kalut**. 
Kokeile erilaisia ty√∂kaluja, esimerkiksi **T√§yt√§ piiri** -ty√∂kalua. T√§t√§ voit hy√∂dynt√§√§ esimerkiksi rakennuksen sis√§pihan piirt√§misess√§. Eli voidaan niin sanotusti tehd√§ reik√§ rakennuksen keskelle.


## Lis√§teht√§v√§ 2: Testaa rakentamistila

Jos piirt√§misen apuna tarvitaan et√§isyytt√§ tietyst√§ pisteest√§ tai tietty√§ kulmaa johonkin olemassa olevaan linjaan, rakentamistilan avulla saa n√§kyville apuviivoja piirt√§misen tueksi. Rakentamistilan ollessa aktiivisena ei voi piirt√§√§, mutta sen avulla voidaan hakea n√§kyviin tarvittavia apuviivoja esim. et√§isyyden tai kulman suhteen. Rakentamistilaa voi k√§ytt√§√§ ennen tai kesken piirt√§misen.

Rakentamistila aktivoidaan laajennetun digitoinnin paneelista l√∂ytyv√§st√§ ![](img/harjoitus_3/image7.png)-nappulasta. Sen saa p√§√§lle/pois p√§√§lt√§ my√∂s pikakomennolla **C**.

Huom! Rakentamistilassa ollessa ei piirret√§ mit√§√§n. Kun olet saanut rakentamistilassa toivotut apuviivat n√§kyville ja haluat aloittaa varsinaisen piirt√§misen, rakentamistila tulee sulkea joko painamalla hiirell√§ ![](img/harjoitus_3/image8.png) tai **C**-n√§pp√§imell√§. Apuviivat j√§√§v√§t n√§kyviin ja voit piirt√§√§ niiden avulla pisteen haluamaasi paikkaan.

## Lis√§teht√§v√§ 3: Lis√§√§ Rakennukset tasolle funktio, jolla pinta-ala tieto p√§ivittyy automaattisesti

Avaa Rakennukset-tason ominaisuudet. Mene kohtaan Attribuuttilomake. Valitse kentist√§ Pohjan_ala ja selaa kohtaan Oletusarvot. Avaa oikean reunan funktio-painikkeesta auki lausekkeen muokkaus -ikkuna. Valitse Geometrian alta `$area`. Funktion voi my√∂s itse kirjoittaa suoraan oletusarvot -kentt√§√§n. Jos haluat viel√§ py√∂rist√§√§ arvoa niin, ettei kaikki desimaalit n√§y niin k√§yt√§ round-funktiota. Jos esimerkiksi haluat py√∂rist√§√§ pinta-alan kahden desimaalin tarkkuudella lauseke on `round($area,2)`. **Lopuksi muista laittaa t√§pp√§ tuohon "K√§yt√§ oletusarvoa p√§ivityksess√§" kohtaan**, niin QGIS laskee uudelle polygonille automaattisesti pinta-alan! üéâ

Kun olet valmis, tallenna projektitiedosto.

Olemme julkaisseet blogin my√∂s liittyen [CAD-aineistojen k√§sittelyyn QGISiss√§](https://gispo.fi/blogi/cad-aineistot-ja-qgis/).

::: hint-box
Psst! Gispolla on ihan oma kurssi kaavojen tekemiseen QGISill√§ nimelt√§√§n [Yleiskaavoitus QGISill√§](https://www.gispo.fi/koulutus/yleiskaavoitus-qgisilla/)
:::


