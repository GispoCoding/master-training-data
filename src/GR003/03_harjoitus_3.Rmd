# Harjoitus 3: Digitointi

**Harjoituksen sis√§lt√∂**

Harjoituksessa tehd√§√§n digitoinnin operaatioita QGISill√§.

**Harjoituksen tavoite**

Harjoituksen j√§lkeen opiskelija osaa hy√∂dynt√§√§ monipuolisemmin digitoinnin ja editoinnin ominaisuuksia.


## Valmistautuminen

Avaa uusi QGIS-projekti (**Projekti \> Uusi**) ja tallenna se nimell√§ "**QGIS-harjoitus 3**".

Lis√§√§ projektiin kurssihakemistosta seuraavat ortokuvat Maanmittauslaitokselta:

-   L4321G

-   L4321H

## Uusi taso ja digitoinnin perusty√∂kalut

T√§ss√§ harjoituksessa teemme rakennuksia rakennuspaikoille. 

Aloita valitsemalla ty√∂kalupalkista **Uusi GeoPackage-taso**. T√§ll√§ kertaa valitsemme **Tietokanta**-kentt√§√§n kohteeksi aiemmin luodun "Porvoo_koulutus"-Geopackagetiedoston, jolloin uusi taso tulee lis√§tyiksi siihen. Kun olet valinnut Porvoo_koulutus.gpkg:n tietokannaksi, anna tason nimeksi "Rakennukset" ja valitse geometriaksi "monikulmio". Koordinaattij√§rjestelm√§ pit√§isi olla EPSG:3880.Lis√§√§ kaksi uutta kentt√§√§. Nimeksi ensim√§iselle "K√§ytt√∂tarkoitus" ja Tyyppi "Teksti". Toiselle nimi "Pohjan_ala" ja Tyyppi "Desimaaliluku".
![](img/harjoitus_3/image1.png)

Tallennettaessa QGIS kysyy, korvataanko aiemmin luotu GeoPackage vai lis√§t√§√§nk√∂ uusi taso siihen. Valitse Lis√§√§ uusi taso.

![](img/harjoitus_3/image2.png)

Tarkista, ett√§ sinulla on esill√§ **Digitoinnin ty√∂kalupalkki** sek√§ **Tarttumisen ty√∂kalut**. T√§m√§n voit tehd√§ N√§yt√§-yl√§valikon kautta (Ty√∂kalut)

![](img/harjoitus_3/image37.png)
Laita Rakennusket-tason muokkaustila p√§√§lle ![](img/harjoitus_1/image9.png)

Nyt voit piirt√§√§ uusia kohteita Rakennus-tasolle painamalla ensin "Lis√§√§ monikulmiokohde" ![](img/harjoitus_1/image6.png) 

Sen j√§lkeen voit vapaasti piirt√§√§ rakennuksen taustakartan mukaan. Kokeile piirt√§√§ yksi rakennus ja kun olet valmis niin painat hiiren oikealla n√§pp√§imell√§. Nyt voit lis√§t√§ rakennuksen k√§ytt√∂tarkoituksen (voit keksi√§ itse). Pinta-alaa ei laiteta, koska sit√§ lasketaan geometrian mukaan my√∂hemmin.

## Tarttuminen

QGISill√§ on monta hy√∂dyllist√§ ty√∂kalua, jotka helpottavat digitointia. Voit seuraavaksi laittaa "Tarttuminen" p√§√§lle magneettisymbolista ![](img/harjoitus_3/image3.png)
Tarttuminen tarkoittaa, ett√§ kun olet piirt√§m√§ss√§ uutta kohdetta, niin voit helposti tarttua kiinnni olemassa oleviin kohteisiin, jotta ei tule p√§√§llekk√§isyyksi√§.

![](img/harjoitus_3/image38.gif)
Etsi nyt kartalta rakennus joka on kiinni toisessa rakennuksessa. Piirr√§ ensin yksi rakennus ja tarkista, ett√§ sinulla on Tarttuminen p√§√§ll√§. Piirr√§ sitten se toinen rakennus niin, ett√§ se "tarttuu kiinni" ensimm√§iseen rakennukseen. Voit katsoa esimerkin yll√§ olevasta kuvasta.

## Lis√§ty√∂kalut apuun

Kun ollaan piirt√§m√§ss√§ rakennuksia niin voisi olla hyv√§ saada 90 asteen kulmia rakennuksiin. Mene **N√§yt√§**-yl√§valikon kautta **Paneelit**-valikkoon ja tarkista, ett√§ **Digitoinnin lis√§ty√∂kalut**-paneeli on n√§kyviss√§. Ota sitten digitoinnin lis√§ty√∂kalut k√§ytt√∂√∂n painamalla ![](img/harjoitus_3/image14.png).

Lis√§ty√∂kalujen avulla voi saada n√§kyville apuviivat ja tarttumisasetukset tiettyihin kulmiin, esimerkiksi 45 tai 90 asteen v√§lein. Toiminnon saa p√§√§lle laajennetun digitoinnin paneelista (ikkunan vasemmassa laidassa). Laita  **tartu yleismpiin kulmiin --\> 90.0, 180.0, 270.0, 360.0** p√§√§lle ![](img/harjoitus_3/image9.png)-nappulasta

Oletuksena nollakulma on vaakatasossa piirtoalueen suhteen, mutta piirt√§misen alettua kulma lasketaan viimeisen piirretyn viivan mukaan ja n√§kyviin tulee tukiviivoja haluttujen kulmien kohdalle.

Kokeile nyt piirt√§√§ muutama muu rakennus 90 asteen kulmilla. Muista tallentaa tason muutoksia tasaisin v√§liajoin. 


## Rakentamistila

Jos piirt√§misen apuna tarvitaan et√§isyytt√§ tietyst√§ pisteest√§ tai tietty√§ kulmaa johonkin olemassa olevaan linjaan, rakentamistilan avulla saa n√§kyville apuviivoja piirt√§misen tueksi. Rakentamistilan ollessa aktiivisena ei voi piirt√§√§, mutta sen avulla voidaan hakea n√§kyviin tarvittavia apuviivoja esim. et√§isyyden tai kulman suhteen. Rakentamistilaa voi k√§ytt√§√§ ennen tai kesken piirt√§misen.

Rakentamistila aktivoidaan laajennetun digitoinnin paneelista l√∂ytyv√§st√§ ![](img/harjoitus_3/image7.png)-nappulasta. Sen saa p√§√§lle/pois p√§√§lt√§ my√∂s pikakomennolla **C**.

Huom! Rakentamistilassa ollessa ei piirret√§ mit√§√§n. Kun olet saanut rakentamistilassa toivotut apuviivat n√§kyville ja haluat aloittaa varsinaisen piirt√§misen, rakentamistila tulee sulkea joko painamalla hiirell√§ ![](img/harjoitus_2/image8.png) tai **C**-n√§pp√§imell√§. Apuviivat j√§√§v√§t n√§kyviin ja voit piirt√§√§ niiden avulla pisteen haluamaasi paikkaan.

## Teht√§v√§: "Rakennus 35√ó40 m tontin rajan suuntaisesti, et√§isyys rajaan 15 m"

Piirret√§√§n uusi kohde tietylle et√§isyydelle ja tietyss√§ kulmassa halutusta pisteest√§ tai linjasta. Esimerkiksi jos halutaan piirt√§√§ 15 metrin et√§isyydelle tontin reunasta suorakulmainen rakennus, jonka kukin sivu on 30 metri√§, sen voi tehd√§ laajennetun digitoinnin ty√∂kaluja hy√∂dynt√§en mm. seuraavasti:

1.  Lis√§√§ kurssihakemistostasi kiinteist√∂rajat sis√§lt√§v√§ vektoritaso **MML_kiinteistorekisterikartta_05-2023.gpkg**

2.  Valitse **Rakennukset** taso aktiiviseksi.

3.  Laita **editointi** p√§√§lle ![](img/harjoitus_2/image20.png){width="26" height="24"} **Rakennukset**- tasolle,¬† **monikulmiokohteen piirt√§minen p√§√§lle** ![](img/harjoitus_3/image21.png) sek√§ l**aajennetun digitoinnin ty√∂kalut** aktiivisiksi ![](img/harjoitus_3/image10.png){width="26" height="24"}.

4.  **Laita laajennetun digitoinnin** paneelista (vasen reuna) **rakentamistila** p√§√§lle ![](img/harjoitus_3/image8.png) (tai painamalla **C**).

5.  Aseta halutun kiinteist√∂nraja nollakulmaksi valitsemalla rajalta kaksi pistett√§.

6.  Valitse haluttu tukikulma 90 astetta painamalla **A** (kerran tai kahdesti, niin ett√§ fokus siirtyy laajennetun digitointipaneelin kohtaan a(ngle)) ja sy√∂tet√§√§n luku 90. Painetaan **enter**. K√§ytt√∂√∂n tulee apuviiva kohtisuorasti kiinteist√∂nrajaan. Huom! Jos kulma-asteiden apuviivat ovat k√§yt√∂ss√§ (![](img/harjoitus_3/image9.png)-valikosta), saat automaattisesti apuviivoja piirt√§misen avuksi eik√§ kulman arvoa tarvitse sy√∂tt√§√§ erikseen.

7.  Valitse haluttu et√§isyys 15 metri√§ painamalla **D** (fokus siirtyy kohtaan d(istance)). Sy√∂tet√§√§n **luku 15**. Painetaan **enter**. K√§ytt√∂√∂n tulee s√§de 15 m et√§isyydelle kiinteist√∂nrajaan piirretyn j√§lkimm√§isen apupisteen mukaan. HUOM! Mit√§√§n ei ole viel√§ piirretty.

8.  Aloita piirt√§minen poistamalla **rakentamistila** k√§yt√∂st√§ ![](img/harjoitus_3/image8.png) (tai painamalla **C**).

9.  **Piirr√§** ensimm√§inen piste kohtisuoraa apuviivaa ja -s√§dett√§ hy√∂dynt√§en.

10. Suora kulma pysyy valittuna, mutta et√§isyys halutaan muuttaa 35 metriin (rakennuksen 1. sein√§n mitta). Paina **D**, sy√∂t√§ arvoksi 35 ja paina **enter**. Apus√§de muuttuu 35 metriin. Piirr√§ rakennuksen seuraava nurkka.

11. Vaihda et√§isyydeksi 45 painamalla j√§lleen, sy√∂tt√§m√§ll√§ arvo ja painamalla **enter**. Ympyr√§ kasvaa ja piirt√§minen voidaan tehd√§ sen ja kohtisuoran apuviivan avulla. Et√§isyys ja kulma pysyv√§t samana: piirr√§ kolmas nurkkapiste.

12. Toista kohta 9.

13. Paina lopuksi hiiren oikeaa n√§pp√§int√§, jolloin alue sulkeutuu. N√§in rakennus on valmis.

![*Rakennuksen piirt√§minen k√§ytt√§m√§ll√§ aluksi rakennustilaa apuna et√§isyyden m√§√§ritt√§miseen alueen rajasta. T√§m√§n j√§lkeen rakennuksen mitat annetaan painamalla D ja antamalla sein√§n mitta, jolloin piirt√§misen avuksi tulee ympyr√§ annetun et√§isyyden s√§teell√§.*](img/harjoitus_3/image26.gif)

T√§m√§n j√§lkeen digitoi aineistoon rakennuksia v√§hint√§√§n kolme kappaletta hy√∂dynt√§en laajennetun digitoinnin ominaisuuksia. Koita my√∂s k√§√§nt√§√§ rakennuksia 45 astetta hy√∂dynt√§en **Kierr√§ kohteita -ty√∂kalua** ![](img/harjoitus_3/image27.png). **CTRL+hiiren klikkaus** asettaa k√§√§nn√∂kselle kulmapisteen, jonka mukaan k√§√§nt√∂ suoritetaan.

Ota lopuksi tason editointi pois p√§√§lt√§ ja tallenna tasoon tehdyt muutokset.


Olemme julkaisseet blogin my√∂s liittyen [CAD-aineistojen k√§sittelyyn QGISiss√§](https://gispo.fi/blogi/cad-aineistot-ja-qgis/).

## Lis√§teht√§v√§: Lis√§√§ Rakennukset tasolle funktio, jolla pinta-ala tieto p√§ivittyy automaattisesti

1.  Avaa Rakennukset-tason ominaisuudet. Mene kohtaan Attribuuttilomake

2.  Valitse kentist√§ Pinta-ala ja selaa kohtaan Oletusarvot.

3.  Avaa oikean reunan funktio-painikkeesta auki lausekkeen muokkaus -ikkuna.

4.  Valitse Geometrian alta `$area`. Funktion voi my√∂s itse kirjoittaa suoraan oletusarvot -kentt√§√§n.

5.  Jos haluat viel√§ py√∂rist√§√§ arvoa niin, ettei kaikki desimaalit n√§y niin k√§yt√§ round-funktiota. Jos esimerkiksi haluat py√∂rist√§√§ pinta-alan kahden desimaalin tarkkuudella lauseke on `round($area,2)`

6.  **Lopuksi muista laittaa t√§pp√§ tuohon "K√§yt√§ oletusarvoa p√§ivityksess√§" kohtaan**, niin QGIS laskee uudelle polygonille automaattisesti pinta-alan! üéâ

    ![](img/harjoitus_2/image36.png)![](img/harjoitus_3/image37.png){width="519"}



Kun olet valmis, tallenna projektitiedosto.
